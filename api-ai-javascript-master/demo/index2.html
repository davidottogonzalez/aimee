<html class="js no-touch fontface svg inlinesvg mediaqueries history svg localstorage webworkers hashchange canvas video cssgradients inlinesvg videoloop videopreload supports generatedcontent cssanimations csstransforms csstransforms3d csstransitions videoautoplay history svg localstorage webworkers hashchange canvas video cssgradients inlinesvg videoloop videopreload supports generatedcontent cssanimations csstransforms csstransforms3d csstransitions videoautoplay history svg localstorage webworkers hashchange canvas video cssgradients inlinesvg videoloop videopreload supports generatedcontent cssanimations csstransforms csstransforms3d csstransitions no-videoautoplay" lang="en" dir="ltr"><!--<![endif]--><head><script type="text/javascript" src="http://nbcu.demdex.net/event?d_nsid=0&amp;d_ld=_ts%3D1468646200566&amp;d_rtbd=json&amp;d_jsonv=1&amp;d_dst=1&amp;d_cb=demdexRequestCallback_0_1468646200566"></script><script type="text/javascript" src="http://bam.nr-data.net/1/78333456c2?a=11948648&amp;v=963.8b1290f&amp;to=Y1NSZEFXWBZQWhVaX1oZcVNHX1kLHkkAVFVrW1FeUlFTF25XDldVa0BZVURpRgRWXA%3D%3D&amp;rst=5781&amp;ref=http://localhost:3000/index2&amp;ap=1468&amp;be=646&amp;fe=5033&amp;dc=2463&amp;perf=%7B%22timing%22:%7B%22of%22:1468646194765,%22n%22:0,%22u%22:62,%22ue%22:71,%22f%22:2,%22dn%22:10,%22dne%22:11,%22c%22:11,%22ce%22:20,%22rq%22:20,%22rp%22:50,%22rpe%22:373,%22dl%22:139,%22di%22:3107,%22ds%22:3107,%22de%22:3254,%22dc%22:5678,%22l%22:5678,%22le%22:5773%7D,%22navigation%22:%7B%22ty%22:1%7D%7D&amp;at=TxRREglNSxg%3D&amp;jsonp=NREUM.setToken"></script><script type="text/javascript" src="http://cdn.krxd.net/userdata/get?pub=54983c83-8810-4a6b-9ff1-81f7349ce967&amp;callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="http://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script type="text/javascript" src="http://cdn.krxd.net/userdata/get?pub=54983c83-8810-4a6b-9ff1-81f7349ce967&amp;callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="http://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script type="text/javascript" src="http://cdn.krxd.net/userdata/get?pub=54983c83-8810-4a6b-9ff1-81f7349ce967&amp;callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="http://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script type="text/javascript" src="no_url?callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="no_url?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script src="http://js-agent.newrelic.com/nr-963.min.js"></script><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}</style><script src="http://pagead2.googlesyndication.com/pagead/osd.js"></script><script async="" src="//cdn.krxd.net/ctjs/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script async="" src="http://b.scorecardresearch.com/beacon.js"></script><script type="text/javascript" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.js"></script><script async="" src="//connect.facebook.net/en_US/fbds.js"></script><script type="text/javascript" id="tealium_controler_2156145242" src="http://tags.tiqcdn.com/utag/xaxis/localhost/prod/utag.js"></script><script type="text/javascript" async="" src="http://ping.crowdscience.com/max_log.js?a=7881f43af0&amp;lv=9:9&amp;v=9b70d89e1918ce04&amp;h=localhost&amp;cs=&amp;sr=1&amp;fl=localhost%7Cindex2&amp;fr=4&amp;fd=6&amp;fk=&amp;ft=5&amp;fp=1&amp;fb=4&amp;fs="></script><script async="" src="//cdn.krxd.net/ctjs/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script async="" src="//cdn.krxd.net/ctjs/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script type="text/javascript" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.js"></script><script type="text/javascript" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.js"></script><link href="http://assets.usanetwork.com/usanetwork/css/site.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="http://nbcu.demdex.net/event?d_nsid=0&amp;d_ld=_ts%3D1468645646611&amp;d_rtbd=json&amp;d_jsonv=1&amp;d_dst=1&amp;d_cb=demdexRequestCallback_0_1468645646611"></script><script type="text/javascript" src="http://bam.nr-data.net/1/78333456c2?a=11948648&amp;v=963.8b1290f&amp;to=Y1NSZEFXWBZQWhVaX1oZcVNHX1kLHkkAVFVrW1FeUlFTF25XDldVa0BZVURpRgRWXA%3D%3D&amp;rst=3658&amp;ref=http://localhost:3000/index2&amp;ap=1468&amp;be=595&amp;fe=2996&amp;dc=1157&amp;perf=%7B%22timing%22:%7B%22of%22:1468645642934,%22n%22:0,%22u%22:47,%22ue%22:55,%22f%22:1,%22dn%22:1,%22dne%22:1,%22c%22:1,%22ce%22:1,%22rq%22:30,%22rp%22:39,%22rpe%22:216,%22dl%22:67,%22di%22:1749,%22ds%22:1749,%22de%22:1823,%22dc%22:3591,%22l%22:3591,%22le%22:3644%7D,%22navigation%22:%7B%22ty%22:1%7D%7D&amp;at=TxRREglNSxg%3D&amp;jsonp=NREUM.setToken"></script><script type="text/javascript" src="http://cdn.krxd.net/userdata/get?pub=54983c83-8810-4a6b-9ff1-81f7349ce967&amp;callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="http://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script type="text/javascript" src="http://cdn.krxd.net/userdata/get?pub=54983c83-8810-4a6b-9ff1-81f7349ce967&amp;callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="http://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script src="http://js-agent.newrelic.com/nr-963.min.js"></script><script src="//geo.moatads.com/n.js?e=35&amp;ud=0&amp;qm=240&amp;qn=6OZw%3DoHB%2CEF%3FKC1I%3Cq.bWoCSV2W0Su*TDXlCfX2iR2%25(GyHN%3DI(%2C%3Ba15lK1t!9ZpAH..4iwM%25z4mc4%7Di3MTg%26B%3BLm!__PyDN(%2BWx*h~%3F03*%5B)%2C2iVSWfV%7D%2F%2FRA7R.eJKx%7Ci6sGm!ryh%7Cek)3.%5BqC%7DqLPgh%2C%7BNTrRx%5EdEZpe4tE0b15%7CQjw%60.%7BiO%23Ly*rdB%3Evq%2F9N%7CQEXp%2B3W%60R%2FKN38YeSot%7Cu7pRB%5Bz%26(K%2BxP%7CD7g%26kyM8F4%2BKCCRP)Et%5B%40(X%7C01%5B_)vVS%2F%2F.hX%3Dt%3C!T%5D%3DNMV8t8fvb%26%225gRo%2BG%22IQ3qC%3DAd%5EX%5E0oJU4b6W%3AGcS4(%5B*rUePpw4iqi%3CFEtmChkQPuf3%2BrNaU51%40%40HHzt%24bV%2F.4bIu%40vv%7DqB%3DmfV%7Dz(m3%3D%5BB*RpKD%2F%3D%2B%7B%7D%406U1k%3DhWio8bYLaXBjA%3AmQ)%3CF!tAbjrzJ%3BgoVYGVxc%40lQQV%23tc3%2Fh%7C%3FVKV%3BW5.NO)Wx%3D(K%24%3D!w3Lmbj~G~exECSR23_hFAkD%3Dv%3CN%5B.%22%24b_o%3FtVD%5D%5BpN%7CQF%40Sy7%7BlTr1W*d%5BOCF%25OJ&amp;qp=10000&amp;qq=000001100000&amp;qr=0&amp;gz=0&amp;hh=0&amp;hn=0&amp;qt=0&amp;i=NBCUV2&amp;zMoatPS=topbanner&amp;zMoatST=usa&amp;zMoatDomain=localhost&amp;zMoatSubdomain=localhost&amp;cm=62&amp;kq=1&amp;bq=0&amp;f=0&amp;j=&amp;o=3&amp;t=1468645646202&amp;de=92313731279&amp;m=0&amp;ar=860b7e0-clean&amp;q=1&amp;cb=0&amp;cu=1468645646202&amp;ll=4&amp;ln=1&amp;r=22.0.0&amp;em=0&amp;en=0&amp;d=19953618%3A330644058%3A389095938%3A118202494458&amp;qs=1&amp;bo=77913018&amp;bd=122984538&amp;fd=1&amp;ac=1&amp;it=500&amp;fs=86477&amp;na=1031878741&amp;cs=0&amp;callback=MoatSuperV22.gna942026"></script><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}</style><script src="http://pagead2.googlesyndication.com/pagead/osd.js"></script><script async="" src="//cdn.krxd.net/ctjs/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script type="text/javascript" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.js"></script><script async="" src="http://b.scorecardresearch.com/beacon.js"></script><script type="text/javascript" id="tealium_controler_0033018567" src="http://tags.tiqcdn.com/utag/xaxis/localhost/prod/utag.js"></script><script async="" src="//connect.facebook.net/en_US/fbds.js"></script><script async="" src="//cdn.krxd.net/ctjs/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script type="text/javascript" async="" src="http://ping.crowdscience.com/max_log.js?a=7881f43af0&amp;lv=9:9&amp;v=9b70d89e1918ce04&amp;h=localhost&amp;cs=&amp;sr=1&amp;fl=localhost%7Cindex2&amp;fr=4&amp;fd=6&amp;fk=&amp;ft=5&amp;fp=1&amp;fb=4&amp;fs="></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script type="text/javascript" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.js"></script><link href="http://assets.usanetwork.com/usanetwork/css/site.css" rel="stylesheet" type="text/css"><script type="text/javascript" async="" src="http://ping.crowdscience.com/max_log.js?a=7881f43af0&amp;lv=9:9&amp;v=9b70d89e1918ce04&amp;h=localhost&amp;cs=&amp;sr=1&amp;fl=localhost%7Cindex2&amp;fr=4&amp;fd=6&amp;fk=&amp;ft=5&amp;fp=1&amp;fb=4&amp;fs="></script><script type="text/javascript" src="http://bam.nr-data.net/1/78333456c2?a=11948648&amp;v=963.8b1290f&amp;to=Y1NSZEFXWBZQWhVaX1oZcVNHX1kLHkkAVFVrW1FeUlFTF25XDldVa0BZVURpRgRWXA%3D%3D&amp;rst=6086&amp;ref=http://localhost:3000/index2&amp;ap=1468&amp;be=291&amp;fe=5625&amp;dc=3524&amp;perf=%7B%22timing%22:%7B%22of%22:1468644607485,%22n%22:0,%22u%22:54,%22ue%22:58,%22f%22:1,%22dn%22:8,%22dne%22:8,%22c%22:8,%22ce%22:8,%22rq%22:8,%22rp%22:43,%22rpe%22:150,%22dl%22:142,%22di%22:3812,%22ds%22:3812,%22de%22:3821,%22dc%22:5913,%22l%22:5913,%22le%22:5975%7D,%22navigation%22:%7B%22ty%22:1%7D%7D&amp;at=TxRREglNSxg%3D&amp;jsonp=NREUM.setToken"></script><script type="text/javascript" src="http://nbcu.demdex.net/event?d_nsid=0&amp;d_ld=_ts%3D1468644613469&amp;d_rtbd=json&amp;d_jsonv=1&amp;d_dst=1&amp;d_cb=demdexRequestCallback_0_1468644613469"></script><script type="text/javascript" src="http://cdn.krxd.net/userdata/get?pub=54983c83-8810-4a6b-9ff1-81f7349ce967&amp;callback=Krux.ns._default.kxjsonp_userdata"></script><script type="text/javascript" src="http://beacon.krxd.net/optout_check?callback=Krux.ns._default.kxjsonp_optOutCheck"></script><script src="http://js-agent.newrelic.com/nr-963.min.js"></script><script src="//geo.moatads.com/n.js?e=35&amp;ud=0&amp;qm=240&amp;qn=6OZw%3DoHB%2CEF%3FKC1I%3Cq.bWoCSV2W0Su*TDXlCfX2iR2%25(GyHN%3DI(%2C%3Ba15lK1t!9ZpAH..4iwM%25z4mc4%7Di3MTg%26B%3BLm!__PyDN(%2BWx*h~%3F03*%5B)%2C2iVSWfV%7D%2F%2FRA7R.eJKx%7Ci6sGm!ryh%7Cek)3.%5BqC%7DqLPgh%2C%7BNTrRx%5EdEZpe4tE0b15%7CQjw%60.%7BiO%23Ly*rdB%3Evq%2F9N%7CQEXp%2B3W%60R%2FKN38YeSot%7Cu7pRB%5Bz%26(K%2BxP%7CD7g%26kyM8F4%2BKCCRP)Et%5B%40(X%7C01%5B_)vVS%2F%2F.hX%3Dt%3C!T%5D%3DNMV8t8fvb%26%225gRo%2BG%22IQ3qC%3DAd%5EX%5E0oJU4b6W%3AGcS4(%5B*rUePpw4iqi%3CFEtmChkQPuf3%2BrNaU51%40%40HHzt%24bV%2F.4bIu%40vv%7DqB%3DmfV%7Dz(m3%3D%5BB*RpKD%2F%3D%2B%7B%7D%406U1k%3DhWio8bYLaXBjA%3AmQ)%3CF!tAbjrzJ%3BgoVYGVxc%40lQQV%23tc3%2Fh%7C%3FVKV%3BW5.NO)Wx%3D(K%24%3D!w3Lmbj~G~exECSR23_hFAkD%3Dv%3CN%5B.%22%24b_o%3FtVD%5D%5BpN%7CQF%40Sy7%7BlTr1W*d%5BOCF%25OJ&amp;qp=10000&amp;qq=000001100000&amp;qr=0&amp;gz=0&amp;hh=0&amp;hn=0&amp;qt=0&amp;i=NBCUV2&amp;zMoatPS=topbanner&amp;zMoatST=usa&amp;zMoatDomain=localhost&amp;zMoatSubdomain=localhost&amp;cm=65&amp;kq=1&amp;bq=0&amp;f=0&amp;j=&amp;o=3&amp;t=1468644612887&amp;de=702797059962&amp;m=0&amp;ar=860b7e0-clean&amp;q=1&amp;cb=0&amp;cu=1468644612887&amp;ll=4&amp;ln=1&amp;r=22.0.0&amp;em=0&amp;en=0&amp;d=19953618%3A330644058%3A389095938%3A118202494458&amp;qs=1&amp;bo=77913018&amp;bd=122984538&amp;fd=1&amp;ac=1&amp;it=500&amp;fs=86477&amp;na=395905160&amp;cs=0&amp;callback=MoatSuperV22.gna627168"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.js"></script><script async="" src="//cdn.krxd.net/ctjs/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script src="http://pagead2.googlesyndication.com/pagead/osd.js"></script><script async="" src="http://b.scorecardresearch.com/beacon.js"></script><script type="text/javascript" id="tealium_controler_0026120981" src="http://tags.tiqcdn.com/utag/xaxis/localhost/prod/utag.js"></script><script async="" src="//connect.facebook.net/en_US/fbds.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script async="" type="text/javascript" src="https://www.googletagservices.com/tag/js/gpt.js"></script><script type="text/javascript" async="" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/max_log.js"></script><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/78333456c2"></script><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/event"></script><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/get"></script><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/optout_check"></script><script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/nr-963.min.js"></script><script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/n.js"></script><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}</style>
    <!--[if IE]><![endif]-->
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/osd.js"></script><script type="text/javascript" id="nbc_versa_9640681111" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/ebOneTag.js"></script><script async="" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/controltag.js.e0ce6829d34e23edb3c90f3615dd81e0"></script><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/utag.js"></script><script type="text/javascript" async="" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/w.js"></script><script async="" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/beacon.js"></script><script type="text/javascript" id="tealium_controler_0398940078" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/utag(1).js"></script><script async="" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/fbds.js"></script><script async="" type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/gpt.js"></script><link href="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/site.css" rel="stylesheet" type="text/css"><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(u(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(2),u=t(3),c=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var s=["setPageViewName","setCustomAttribute","finished","addToTrace","inlineHit"],p="api-",l=p+"ixn-";a(s,function(t,e){f[e]=o(p+e,!0,"api")}),f.addPageAction=o(p+"addPageAction",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var d=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(l+"tracer",[Date.now(),t,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{c.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){d[e]=o(l+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],2:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],3:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?u(t,a,i):i()}function n(n,r,o){t&&t(n,r,o);for(var i=e(o),a=l(n),u=a.length,c=0;c<u;c++)a[c].apply(i,r);var s=f[m[n]];return s&&s.push([w,n,r,i]),i}function p(t,e){g[t]=l(t).concat(e)}function l(t){return g[t]||[]}function d(t){return s[t]=s[t]||o(n)}function v(t,e){c(t,function(t,n){e=e||"feature",m[n]=e,e in f||(f[e]=[])})}var g={},m={},w={on:p,emit:n,get:d,listeners:l,context:e,buffer:v};return w}function i(){return new r}var a="nr@context",u=t("gos"),c=t(2),f={},s={},p=e.exports=o();p.backlog=f},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!h++){var t=y.info=NREUM.info,e=s.getElementsByTagName("script")[0];if(t&&t.licenseKey&&t.applicationID&&e){c(m,function(e,n){t[e]||(t[e]=n)});var n="https"===g.split(":")[0]||t.sslForHttp;y.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=y.proto+t.agent,e.parentNode.insertBefore(r,e)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=t("handle"),c=t(2),f=window,s=f.document,p="addEventListener",l="attachEvent",d=f.XMLHttpRequest,v=d&&d.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:d,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},t(1);var g=""+location,m={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-963.min.js"},w=d&&v&&v[p]&&!/CriOS/.test(navigator.userAgent),y=e.exports={offset:a(),origin:g,features:{},xhrWrappable:w};s[p]?(s[p]("DOMContentLoaded",i,!1),f[p]("load",r,!1)):(s[l]("onreadystatechange",o),f[l]("onload",r)),u("mark",["firstbyte",a()],null,"api");var h=0},{}]},{},["loader"]);</script>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="http://www.usanetwork.com/sites/usanetwork/themes/aurora_usa/images/favicon.ico">
<link rel="apple-touch-icon" href="http://www.usanetwork.com/sites/usanetwork/themes/aurora_usa/images/ios-home.png">
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/socialize.js">{"enabledProviders":"Facebook, Twitter","lang":"en","connectWithoutLoginBehavior":"loginExistingUser"}</script><!--[if lte IE 9]><script src="http://www.usanetwork.com/sites/usanetwork/themes/aurora_usa/javascripts/icomoon-gte-ie7.js" />
</script><![endif]--><meta name="description" content="MR. ROBOT is a psychological thriller that follows a young programmer who works as a cyber-security engineer by day and a vigilante hacker by night.">
<meta name="generator" content="Drupal 7 (http://drupal.org)">
<link rel="canonical" href="http://www.usanetwork.com/mrrobot">
<link rel="shortlink" href="http://www.usanetwork.com/node/56156">
<meta property="og:site_name" content="USA Network">
<meta property="og:type" content="article">
<meta property="og:title" content="Mr. Robot">
<meta property="og:url" content="http://www.usanetwork.com/mrrobot">
<meta property="og:description" content="Mr. Robot">
<meta property="og:updated_time" content="2016-07-15T11:08:25-04:00">
<meta property="og:image" content="http://www.usanetwork.com/sites/usanetwork/files/mrrobot_show_2560x1440.jpg">
<meta name="twitter:card" content="seeit">
<meta name="twitter:site" content="@USA_Network">
<meta name="twitter:url" content="http://www.usanetwork.com/mrrobot">
<meta name="twitter:title" content="Mr. Robot">
<meta name="twitter:description" content="Mr. Robot">
<meta property="article:published_time" content="2015-03-05T18:55:09-05:00">
<meta property="article:modified_time" content="2016-07-15T11:08:25-04:00">
<meta name="twitter:seeit:idspace" content="s">
    <title>Mr. Robot - TV Show - Watch Full Episodes | USA Network</title>
    <link rel="stylesheet" href="/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css">
<link rel="stylesheet" href="/css/css_rfGCQzXjIYHMFItwkk-pQ-guYoRGE4E0Z_UTawu7FhA.css">
<link rel="stylesheet" href="/css/css_XdgtbBLhb3i5bHAjOQPQmKBk9KGlrw4sC5dIG-M-N-8.css">
<link rel="stylesheet" href="/css/css_y8N-oq9TbD5ycuIHyd_9o3CbXsxk5thKoGcmzBp-dVY.css">
<link rel="stylesheet" href="/css/css_Tc6jbcYeKvswBfGgV8ru2yOuRvk0nIvR-iatRZBEZ9w.css">
    <script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/modernizr.custom.89692.js"></script>
<script>Modernizr.load({
  test: Modernizr.touch,
  yep : '/sites/usanetwork/themes/aurora_usa/javascripts/hammer.js'
});</script>
<script src="/js/js_0gj6QcpfRH2jzTbCQqf7kEkm4MXY0UA_sRhwPc8jC1o.js"></script>
<script src="/js/js_f3yKOzgBG7-W09URluMGn825mX1YZiclenrOMoruemk.js"></script>
<script src="/js/js_5Br7wpTVTkB0ll164JfORUEHBavylxBgjDqNHMtQqmA.js"></script>
<script src="/js/satelliteLib-24e397569ca85a58d3963043838c6696e85c5e9a.js"></script>
<script src="/js/mbox-contents-f0d66682672d85f0ef254de802110100ae05373e.js">
</script><style>.mboxDefault { visibility:hidden; }</style>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/target.js"></script>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/ajax"></script>
<script src="/js/js_DuYwgf0wDBsto4ZbxNJQeou95NQ7pJXgLGeUg_6SGhQ.js"></script>
<script src="/js/js_wS0owjb6XqM6232juj0uTIi4hg0pkdVZnhJ-Wh0gNVE.js"></script>
<script>var mpscall = {"site":"usa-web","path":"\/node\/56156","title":"Mr. Robot","content_id":"node56156","is_content":1,"type":"tv_show","cag":{"field-usa-tv-a-spot":"Mr-Robot-Aspot-201-Full-Episode","field-tvs-promo-items":"Mr-Robot-Show-Card-Promo-Episodes|Mr-Robot-Show-Card-Promo-Videos|Mr-Robot-Show-Card-Promo-Photos|Mr-Robot-Show-Card-Promo-Cast","field-hp-full-bleed-promo":"Mr-Robot-Full-Bleed-Enhanced-Episodes"},"pubdate":"1425599709","cat":"mrrobot"}
var mpsopts = {"host":"mps.nbcuni.com","updatecorrelator":1}
var mps = mps || {};
document.write('<scr'+'ipt id="mps-ext-load" src="//'+mpsopts.host+'/fetch/ext/load-'+mpscall.site+'.js"></scr'+'ipt>');</script><script id="mps-ext-load" src="//mps.nbcuni.com/fetch/ext/load-usa-web.js"></script><script src="http://partner.googleadservices.com/gpt/pubads_impl_91.js" async=""></script><script id="mps-request-undefined" src="http://mps.nbcuni.com/request/page/jsonp?CALLBACK=mpsCallback&amp;cat=mrrobot%7Chome&amp;site=usa-web&amp;path=%2Fnode%2F56156&amp;title=Mr.%20Robot&amp;is_content=1&amp;type=tv_show&amp;pubdate=1425599709&amp;field%5Bhost%5D=localhost&amp;field%5Bpath%5D=%2Findex2&amp;NOLOAD=mpstools&amp;cag%5Bfield-usa-tv-a-spot%5D=Mr-Robot-Aspot-201-Full-Episode&amp;cag%5Bfield-tvs-promo-items%5D=Mr-Robot-Show-Card-Promo-Episodes%7CMr-Robot-Show-Card-Promo-Videos%7CMr-Robot-Show-Card-Promo-Photos%7CMr-Robot-Show-Card-Promo-Cast&amp;cag%5Bfield-hp-full-bleed-promo%5D=Mr-Robot-Full-Bleed-Enhanced-Episodes"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468646114" class="mps-script-1468646114">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468646114" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script id="mps-ext-load" src="//mps.nbcuni.com/fetch/ext/load-usa-web.js"></script><script id="mps-request-0" src="http://mps.nbcuni.com/request/page/jsonp?CALLBACK=mpsCallback&amp;cat=mrrobot%7Chome&amp;site=usa-web&amp;path=%2Fnode%2F56156&amp;title=Mr.%20Robot&amp;is_content=1&amp;type=tv_show&amp;pubdate=1425599709&amp;field%5Bhost%5D=localhost&amp;field%5Bpath%5D=%2Findex2&amp;NOLOAD=mpstools&amp;cag%5Bfield-usa-tv-a-spot%5D=Mr-Robot-Aspot-201-Full-Episode&amp;cag%5Bfield-tvs-promo-items%5D=Mr-Robot-Show-Card-Promo-Episodes%7CMr-Robot-Show-Card-Promo-Videos%7CMr-Robot-Show-Card-Promo-Photos%7CMr-Robot-Show-Card-Promo-Cast&amp;cag%5Bfield-hp-full-bleed-promo%5D=Mr-Robot-Full-Bleed-Enhanced-Episodes"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468646114" class="mps-script-1468646114">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468646114" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script id="mps-request-undefined" src="http://mps.nbcuni.com/request/page/jsonp?CALLBACK=mpsCallback&amp;cat=mrrobot%7Chome&amp;site=usa-web&amp;path=%2Fnode%2F56156&amp;title=Mr.%20Robot&amp;is_content=1&amp;type=tv_show&amp;pubdate=1425599709&amp;field%5Bhost%5D=localhost&amp;field%5Bpath%5D=%2Findex2&amp;NOLOAD=mpstools&amp;cag%5Bfield-usa-tv-a-spot%5D=Mr-Robot-Aspot-201-Full-Episode&amp;cag%5Bfield-tvs-promo-items%5D=Mr-Robot-Show-Card-Promo-Episodes%7CMr-Robot-Show-Card-Promo-Videos%7CMr-Robot-Show-Card-Promo-Photos%7CMr-Robot-Show-Card-Promo-Cast&amp;cag%5Bfield-hp-full-bleed-promo%5D=Mr-Robot-Full-Bleed-Enhanced-Episodes"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468646114" class="mps-script-1468646114">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468646114" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script src="http://partner.googleadservices.com/gpt/pubads_impl_91.js" async=""></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468645629" class="mps-script-1468645629">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468645629" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script id="mps-ext-load" src="//mps.nbcuni.com/fetch/ext/load-usa-web.js"></script><script id="mps-request-3" src="http://mps.nbcuni.com/request/page/jsonp?CALLBACK=mpsCallback&amp;cat=mrrobot%7Chome&amp;site=usa-web&amp;path=%2Fnode%2F56156&amp;title=Mr.%20Robot&amp;is_content=1&amp;type=tv_show&amp;pubdate=1425599709&amp;field%5Bhost%5D=localhost&amp;field%5Bpath%5D=%2Findex2&amp;NOLOAD=mpstools&amp;cag%5Bfield-usa-tv-a-spot%5D=Mr-Robot-Aspot-201-Full-Episode&amp;cag%5Bfield-tvs-promo-items%5D=Mr-Robot-Show-Card-Promo-Episodes%7CMr-Robot-Show-Card-Promo-Videos%7CMr-Robot-Show-Card-Promo-Photos%7CMr-Robot-Show-Card-Promo-Cast&amp;cag%5Bfield-hp-full-bleed-promo%5D=Mr-Robot-Full-Bleed-Enhanced-Episodes"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468646114" class="mps-script-1468646114">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468646114" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script id="mps-request-0" src="http://mps.nbcuni.com/request/page/jsonp?CALLBACK=mpsCallback&amp;cat=mrrobot%7Chome&amp;site=usa-web&amp;path=%2Fnode%2F56156&amp;title=Mr.%20Robot&amp;is_content=1&amp;type=tv_show&amp;pubdate=1425599709&amp;field%5Bhost%5D=localhost&amp;field%5Bpath%5D=%2Findex2&amp;NOLOAD=mpstools&amp;cag%5Bfield-usa-tv-a-spot%5D=Mr-Robot-Aspot-201-Full-Episode&amp;cag%5Bfield-tvs-promo-items%5D=Mr-Robot-Show-Card-Promo-Episodes%7CMr-Robot-Show-Card-Promo-Videos%7CMr-Robot-Show-Card-Promo-Photos%7CMr-Robot-Show-Card-Promo-Cast&amp;cag%5Bfield-hp-full-bleed-promo%5D=Mr-Robot-Full-Bleed-Enhanced-Episodes"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468646114" class="mps-script-1468646114">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468646114" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468645629" class="mps-script-1468645629">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468645629" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script id="mps-request-undefined" src="http://mps.nbcuni.com/request/page/jsonp?CALLBACK=mpsCallback&amp;cat=mrrobot%7Chome&amp;site=usa-web&amp;path=%2Fnode%2F56156&amp;title=Mr.%20Robot&amp;is_content=1&amp;type=tv_show&amp;pubdate=1425599709&amp;field%5Bhost%5D=localhost&amp;field%5Bpath%5D=%2Findex2&amp;NOLOAD=mpstools&amp;cag%5Bfield-usa-tv-a-spot%5D=Mr-Robot-Aspot-201-Full-Episode&amp;cag%5Bfield-tvs-promo-items%5D=Mr-Robot-Show-Card-Promo-Episodes%7CMr-Robot-Show-Card-Promo-Videos%7CMr-Robot-Show-Card-Promo-Photos%7CMr-Robot-Show-Card-Promo-Cast&amp;cag%5Bfield-hp-full-bleed-promo%5D=Mr-Robot-Full-Bleed-Enhanced-Episodes"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468646114" class="mps-script-1468646114">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468646114" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468645629" class="mps-script-1468645629">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468645629" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["localhost"],"path":["\/index2"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468644609" class="mps-script-1468644609">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468644609" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script id="mps-ext-load" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/load-usa-web.js"></script><script id="mps-request-undefined" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/jsonp"></script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0); mps._queue=mps._queue||{}; mps._queue.gptloaded=mps._queue.gptloaded||[]; mps._queue.mpsloaded=mps._queue.mpsloaded||[]; mps._loadset=mps._loadset+1||0; mps.__refreshed=mps.__refreshed||[]; mps.__refreshed[mps._loadset]=false; mps._delays=mps._delays||{}; mps.__t=mps.__t||{}; var googletag=googletag||{}; googletag.cmd = googletag.cmd || [];

mps.pagevars = {"instance":"usa-web","cags":{"field-usa-tv-a-spot":["mr-robot-aspot-201-full-e"],"field-tvs-promo-items":["mr-robot-show-card-promo-"],"field-hp-full-bleed-promo":["mr-robot-full-bleed-enhan"]},"cat":"home","cats":["mrrobot","home"],"cid":"X91008712248","dart_cags":{"tag":{"0":"mrrobotshowcardpromocast","4":"mrrobotfullbleedenhancede"}},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":{"host":["www.usanetwork.com"],"path":["\/mrrobot"]},"freewheel_section":"fw_mrrobot_home","hierarchy":"mrrobot|home","hline":null,"loadmode":false,"modified":"2016-07-14 01:02:44","mpsid":"3737117","mpsurl":"mps.nbcuni.com","path":"\/node\/56156","pkg_exclude_cq":0,"ref":"usanetwork.com","responsive":{"full":[2000,0],"tabletwide":[1024,0],"tablet":[768,0],"0":[0,0]},"subtype":null,"stitle":null,"type":"tv_show","dart_lazy_load":"1"}; if(typeof mps._cloneObjects == 'function'){ mps._cloneObjects(); }</script>
<script>
  /* shared functions */
  mps._clone=function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor(),b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
  /* fix mpsloaded queue */
  if(Object.prototype.toString.call(mps._queue.mpsloaded)!='[object Array]') mps._queue.mpsloaded=[];
  /* multi-loadsets */
  (function(){
    if(mps && mps._ext && mpscall) {
      mps._ext.mpscalls = mps._ext.mpscalls||{};
      mps._ext.pagevars = mps._ext.pagevars||{};
      if(typeof(mps._ext.mpscalls[0])!='object') {
        mps._ext.mpscalls[0] = mps._clone(mpscall);
      }
      if(typeof(mps._ext.pagevars[0])!='object') {
        mps._ext.pagevars[0] = mps._clone(mps.pagevars);
      }
    }
  })();
</script>

<script>(function(){mps._dtparamsappend=mps._dtparamsappend||"";"function"==typeof mps._get&&(__qsparam=mps._get("adtest"))&&(mps._dtparamsappend+="adtest="+__qsparam.replace(/\W/g,"")+";")})();</script>

<script>window.console && console.log('--[executed]--> MPS Head Additions (1)');</script><script>// htmlParser used for postscribe.js 1.4.0
// Based on http://ejohn.org/blog/pure-javascript-html-parser/
(function(){function d(a,e){a=a||"";e=e||{};for(var b in g)g.hasOwnProperty(b)&&(e.autoFix&&(e["fix_"+b]=!0),e.fix=e.fix||e["fix_"+b]);var k=document.createElement("div"),h={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d={comment:function(){var c=a.indexOf("--\x3e");if(0<=c)return{content:a.substr(4,c),length:c+3}},endTag:function(){var c=a.match(t);if(c)return{tagName:c[1],length:c[0].length}},atomicTag:function(){var c=
    d.startTag();if(c){var b=a.slice(c.length);if(b.match(new RegExp("</\\s*"+c.tagName+"\\s*>","i"))&&(b=b.match(new RegExp("([\\s\\S]*?)</\\s*"+c.tagName+"\\s*>","i"))))return{tagName:c.tagName,attrs:c.attrs,content:b[1],length:b[0].length+c.length}}},startTag:function(){if(-1===a.indexOf(">"))return null;var c=a.match(u);if(c){var b={},e={},d=c[2];c[2].replace(v,function(c,a,f,h,q,n){f||h||q||n?n?(b[n]="",e[a]=!0):(f=f||h||q||w.test(a)&&a||"","string"===typeof f&&-1!==f.indexOf("&")&&(k.innerHTML=
    f,f=k.textContent||k.innerText||f),b[a]=f):b[a]=null;d=d.replace(c,"")});return{tagName:c[1],attrs:b,booleanAttrs:e,rest:d,unary:!!c[3],length:c[0].length}}},chars:function(){var c=a.indexOf("<");return{length:0<=c?c:a.length}}},m=function(){for(var c in h)if(h[c].test(a)){var b=d[c]();return b?(b.type=b.type||c,b.text=a.substr(0,b.length),a=a.slice(b.length),b):null}};e.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,k=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,
    d=[];d.last=function(){return this[this.length-1]};d.lastTagNameEq=function(b){var a=this.last();return a&&a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()};d.containsTagName=function(b){for(var a=0,c;c=this[a];a++)if(c.tagName===b)return!0;return!1};var h=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text));return a},g=m,p=function(){a="</"+d.pop().tagName+">"+a},f={startTag:function(b){var c=b.tagName;"TR"===c.toUpperCase()&&d.lastTagNameEq("TABLE")?
    (a="<TBODY>"+a,l()):e.fix_selfClose&&k.test(c)&&d.containsTagName(c)?d.lastTagNameEq(c)?p():(a="</"+b.tagName+">"+a,l()):b.unary||d.push(b)},endTag:function(a){d.last()?e.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?p():d.pop():e.fix_tagSoup&&(g(),l())}},l=function(){var b=a,c=h(g());a=b;if(c&&f[c.type])f[c.type](c)};m=function(){l();return h(g())}}();return{append:function(b){a+=b},readToken:m,readTokens:function(a){for(var b;(b=m())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";
  return b},rest:function(){return a},stack:[]}}var g=function(){var a={},e=this.document.createElement("div");e.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==e.innerHTML;e.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===e.childNodes.length;return a}(),u=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,v=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,
    w=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i;d.supports=g;d.tokenToString=function(a){var e={comment:function(b){return"\x3c!--"+b.content},endTag:function(b){return"</"+b.tagName+">"},atomicTag:function(b){return e.startTag(b)+b.content+e.endTag(b)},startTag:function(b){var a="<"+b.tagName,e;for(e in b.attrs){var a=a+(" "+e),d=b.attrs[e];if("undefined"==typeof b.booleanAttrs||"undefined"==typeof b.booleanAttrs[e])a+='="'+(d?d.replace(/(^|[^\\])"/g,
        '$1\\"'):"")+'"'}b.rest&&(a+=b.rest);return a+(b.unary&&!b.html5Unary?"/>":">")},chars:function(a){return a.text}};return e[a.type](a)};d.escapeAttributes=function(a){var e={},b;for(b in a){var d=a[b];e[b]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var r in g)d.browserHasFlaw=d.browserHasFlaw||!g[r]&&r;this.htmlParser=d})();

//  postscribe.js 1.4.0
//  (c) Copyright 2012-2015 to the present, Krux
//  postscribe is freely distributable under the MIT license.
//  For all details and documentation:
//  http://krux.github.io/postscribe
/*globals htmlParser:false*/
(function() {
  // A function that intentionally does nothing.
  function doNothing() {}

  // Available options and defaults.
  var OPTIONS = {
    // Called when an async script has loaded.
    afterAsync: doNothing,
    // Called immediately before removing from the write queue.
    afterDequeue: doNothing,
    // Called sync after a stream's first thread release.
    afterStreamStart: doNothing,
    // Called after writing buffered document.write calls.
    afterWrite: doNothing,
    // Allows disabling the autoFix feature of htmlParser
    autoFix: true,
    // Called immediately before adding to the write queue.
    beforeEnqueue: doNothing,
    // Called before writing a token.
    beforeWriteToken: function(tok) { return tok; },
    // Called before writing buffered document.write calls.
    beforeWrite: function(str) { return str; },
    // Called when evaluation is finished.
    done: doNothing,
    // Called when a write results in an error.
    error: function(e) { throw e; },
    // Whether to let scripts w/ async attribute set fall out of the queue.
    releaseAsync: false
  };

  var global = this;

  var UNDEFINED = void 0;

  function existy(thing) {
    return thing !== UNDEFINED && thing !== null;
  }

  if(global.postscribe) {
    return;
  }

  // Turn on to debug how each chunk affected the DOM.
  var DEBUG_CHUNK = false;

  // # Helper Functions

  var slice = Array.prototype.slice;

  // Is this a function?
  function isFunction(x) {
    return 'function' === typeof x;
  }

  // Loop over each item in an array-like value.
  function each(arr, fn, _this) {
    var i, len = (arr && arr.length) || 0;
    for(i = 0; i < len; i++) {
      fn.call(_this, arr[i], i);
    }
  }

  // Loop over each key/value pair in a hash.
  function eachKey(obj, fn, _this) {
    var key;
    for(key in obj) {
      if(obj.hasOwnProperty(key)) {
        fn.call(_this, key, obj[key]);
      }
    }
  }

  // Set properties on an object.
  function set(obj, props) {
    eachKey(props, function(key, value) {
      obj[key] = value;
    });
    return obj;
  }

  // Set default options where some option was not specified.
  function defaults(options, _defaults) {
    options = options || {};
    eachKey(_defaults, function(key, val) {
      if(!existy(options[key])) {
        options[key] = val;
      }
    });
    return options;
  }

  // Convert value (e.g., a NodeList) to an array.
  function toArray(obj) {
    try {
      return slice.call(obj);
    } catch(e) {
      var ret = [];
      each(obj, function(val) {
        ret.push(val);
      });
      return ret;
    }
  }

  var last = function(array) {
    return array[array.length - 1];
  };

  // Test if token is a script tag.
  function isScript(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('script');
  }

  function isStyle(tok) {
    return !tok || !('tagName' in tok) ? !1 : !!~tok.tagName.toLowerCase().indexOf('style');
  }

  // # Class WriteStream

  // Stream static html to an element, where "static html" denotes "html without scripts".

  // This class maintains a *history of writes devoid of any attributes* or "proxy history".
  // Injecting the proxy history into a temporary div has no side-effects,
  // other than to create proxy elements for previously written elements.

  // Given the `staticHtml` of a new write, a `tempDiv`'s innerHTML is set to `proxy_history + staticHtml`.
  // The *structure* of `tempDiv`'s contents, (i.e., the placement of new nodes beside or inside of proxy elements),
  // reflects the DOM structure that would have resulted if all writes had been squashed into a single write.

  // For each descendent `node` of `tempDiv` whose parentNode is a *proxy*, `node` is appended to the corresponding *real* element within the DOM.

  // Proxy elements are mapped to *actual* elements in the DOM by injecting a data-id attribute into each start tag in `staticHtml`.
  var WriteStream = (function(){

    // Prefix for data attributes on DOM elements.
    var BASEATTR = 'data-ps-';

    // get / set data attributes
    function data(el, name, value) {
      var attr = BASEATTR + name;

      if(arguments.length === 2) {
        // Get
        var val = el.getAttribute(attr);

        // IE 8 returns a number if it's a number
        return !existy(val) ? val : String(val);

      } else if(existy(value) && value !== '') {
        // Set
        el.setAttribute(attr, value);

      } else {
        // Remove
        el.removeAttribute(attr);
      }
    }

    function WriteStream(root, options) {
      var doc = (root.ownerDocument != null) ? root.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);
      set(this, {
        root: root,

        options: options,

        win: doc.defaultView || doc.parentWindow,

        doc: doc,

        parser: htmlParser('', { autoFix: options.autoFix }),

        // Actual elements by id.
        actuals: [root],

        // Embodies the "structure" of what's been written so far, devoid of attributes.
        proxyHistory: '',

        // Create a proxy of the root element.
        proxyRoot: doc.createElement(root.nodeName),

        scriptStack: [],

        writeQueue: []
      });

      data(this.proxyRoot, 'proxyof', 0);

    }

    WriteStream.prototype.write = function() {
      [].push.apply(this.writeQueue, arguments);
      // Process writes
      // When new script gets pushed or pending this will stop
      // because new writeQueue gets pushed
      var arg;
      while(!this.deferredRemote &&
      this.writeQueue.length) {
        arg = this.writeQueue.shift();

        if(isFunction(arg)) {
          this.callFunction(arg);
        } else {
          this.writeImpl(arg);
        }
      }
    };

    WriteStream.prototype.callFunction = function(fn) {
      var tok = { type: 'function', value: fn.name || fn.toString() };
      this.onScriptStart(tok);
      fn.call(this.win, this.doc);
      this.onScriptDone(tok);
    };

    WriteStream.prototype.writeImpl = function(html) {
      this.parser.append(html);

      var tok, tokens = [], script, style;

      // stop if we see a script token
      while((tok = this.parser.readToken()) && !(script=isScript(tok)) && !(style=isStyle(tok))) {
        tok = this.options.beforeWriteToken(tok);

        if (tok) {
          tokens.push(tok);
        }
      }

      this.writeStaticTokens(tokens);

      if(script) {
        this.handleScriptToken(tok);
      }
      if(style){
        this.handleStyleToken(tok);
      }
    };

    // ## Contiguous non-script tokens (a chunk)
    WriteStream.prototype.writeStaticTokens = function(tokens) {

      var chunk = this.buildChunk(tokens);

      if(!chunk.actual) {
        // e.g., no tokens, or a noscript that got ignored
        return;
      }
      chunk.html = this.proxyHistory + chunk.actual;
      this.proxyHistory += chunk.proxy;

      this.proxyRoot.innerHTML = chunk.html;

      if(DEBUG_CHUNK) {
        chunk.proxyInnerHTML = this.proxyRoot.innerHTML;
      }

      this.walkChunk();

      if(DEBUG_CHUNK) {
        chunk.actualInnerHTML = this.root.innerHTML; //root
      }

      return chunk;
    };

    WriteStream.prototype.buildChunk = function (tokens) {
      var nextId = this.actuals.length,

      // The raw html of this chunk.
          raw = [],

      // The html to create the nodes in the tokens (with id's injected).
          actual = [],

      // Html that can later be used to proxy the nodes in the tokens.
          proxy = [];

      each(tokens, function(tok) {

        var tokenRaw = htmlParser.tokenToString(tok);

        raw.push(tokenRaw);

        if(tok.attrs) { // tok.attrs <==> startTag or atomicTag or cursor
          // Ignore noscript tags. They are atomic, so we don't have to worry about children.
          if(!(/^noscript$/i).test(tok.tagName)) {
            var id = nextId++;

            // Actual: inject id attribute: replace '>' at end of start tag with id attribute + '>'
            actual.push(
                tokenRaw.replace(/(\/?>)/, ' '+BASEATTR+'id='+id+' $1')
            );

            // Don't proxy scripts: they have no bearing on DOM structure.
            if(tok.attrs.id !== 'ps-script' && tok.attrs.id !== 'ps-style') {
              // Proxy: strip all attributes and inject proxyof attribute
              proxy.push(
                  // ignore atomic tags (e.g., style): they have no "structural" effect
                  tok.type === 'atomicTag' ? '' :
                  '<'+tok.tagName+' '+BASEATTR+'proxyof='+id+(tok.unary ? ' />' : '>')
              );
            }
          }

        } else {
          // Visit any other type of token
          // Actual: append.
          actual.push(tokenRaw);
          // Proxy: append endTags. Ignore everything else.
          proxy.push(tok.type === 'endTag' ? tokenRaw : '');
        }
      });

      return {
        tokens: tokens,
        raw: raw.join(''),
        actual: actual.join(''),
        proxy: proxy.join('')
      };
    };

    WriteStream.prototype.walkChunk = function() {
      var node, stack = [this.proxyRoot];

      // use shift/unshift so that children are walked in document order

      while(existy(node = stack.shift())) {

        var isElement = node.nodeType === 1;
        var isProxy = isElement && data(node, 'proxyof');

        // Ignore proxies
        if(!isProxy) {

          if(isElement) {
            // New actual element: register it and remove the the id attr.
            this.actuals[data(node, 'id')] = node;
            data(node, 'id', null);
          }

          // Is node's parent a proxy?
          var parentIsProxyOf = node.parentNode && data(node.parentNode, 'proxyof');
          if(parentIsProxyOf) {
            // Move node under actual parent.
            this.actuals[parentIsProxyOf].appendChild(node);
            // MPS tracking array of inserted nodes
            "function" == typeof mps._postscribeCallback && "ps-script"!=node.id && mps._postscribeCallback(node.outerHTML);
          }
        }
        // prepend childNodes to stack
        stack.unshift.apply(stack, toArray(node.childNodes));
      }
    };

    // ### Script tokens
    WriteStream.prototype.handleScriptToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this script.
        this.writeQueue.unshift(remainder);
      }

      //noinspection JSUnresolvedVariable
      tok.src = tok.attrs.src || tok.attrs.SRC;

      tok = this.options.beforeWriteToken(tok);

      if(!tok) {
        // User has removed this token
        return;
      }

      if(tok.src && this.scriptStack.length) {
        // Defer this script until scriptStack is empty.
        // Assumption 1: This script will not start executing until
        // scriptStack is empty.
        this.deferredRemote = tok;
      } else {
        this.onScriptStart(tok);
      }

      // Put the script node in the DOM.
      var _this = this;
      this.writeScriptToken(tok, function() {
        _this.onScriptDone(tok);
      });
      // MPS tracking array of inserted scripts
      "function" == typeof mps._postscribeCallback && tok.content.length && mps._postscribeCallback("<script>"+tok.content+"\x3c/script>");
    };

    // ### Style tokens
    WriteStream.prototype.handleStyleToken = function(tok) {
      var remainder = this.parser.clear();

      if(remainder) {
        // Write remainder immediately behind this style.
        this.writeQueue.unshift(remainder);
      }

      tok.type = tok.attrs.type || tok.attrs.TYPE || 'text/css';

      tok = this.options.beforeWriteToken(tok);

      if(tok) {
        // Put the style node in the DOM.
        this.writeStyleToken(tok);
      }

      if(remainder) {
        this.write();
      }
    };

    // Build a style and insert it into the DOM.
    WriteStream.prototype.writeStyleToken = function(tok) {
      var el = this.buildStyle(tok);

      this.insertStyle(el);

      // Set content
      if(tok.content) {
        //noinspection JSUnresolvedVariable
        if(el.styleSheet && !el.sheet) {
          el.styleSheet.cssText=tok.content;
        }
        else {
          el.appendChild(this.doc.createTextNode(tok.content));
        }
      }
    };

    // Build a style element from an atomic style token.
    WriteStream.prototype.buildStyle = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      el.setAttribute('type', tok.type);
      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      return el;
    };

    // Insert style into DOM where it would naturally be written.
    WriteStream.prototype.insertStyle = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the style.
      this.writeImpl('<span id="ps-style"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-style');

      // Replace cursor with style.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.onScriptStart = function(tok) {
      tok.outerWrites = this.writeQueue;
      this.writeQueue = [];
      this.scriptStack.unshift(tok);
    };

    WriteStream.prototype.onScriptDone = function(tok) {
      // Pop script and check nesting.
      if(tok !== this.scriptStack[0]) {
        this.options.error({ message: 'Bad script nesting or script finished twice' });
        return;
      }
      this.scriptStack.shift();

      // Append outer writes to queue and process them.
      this.write.apply(this, tok.outerWrites);

      // Check for pending remote

      // Assumption 2: if remote_script1 writes remote_script2 then
      // the we notice remote_script1 finishes before remote_script2 starts.
      // I think this is equivalent to assumption 1
      if(!this.scriptStack.length && this.deferredRemote) {
        this.onScriptStart(this.deferredRemote);
        this.deferredRemote = null;
      }
    };

    // Build a script and insert it into the DOM.
    // Done is called once script has executed.
    WriteStream.prototype.writeScriptToken = function(tok, done) {
      var el = this.buildScript(tok);
      var asyncRelease = this.shouldRelease(el);
      var afterAsync = this.options.afterAsync;

      if(tok.src) {
        // Fix for attribute "SRC" (capitalized). IE does not recognize it.
        el.src = tok.src;
        this.scriptLoadHandler(el, !asyncRelease ? function() {
          done();
          afterAsync();
        } : afterAsync);
      }

      try {
        this.insertScript(el);
        if(!tok.src || asyncRelease) {
          done();
        }
      } catch(e) {
        this.options.error(e);
        done();
      }
    };

    // Build a script element from an atomic script token.
    WriteStream.prototype.buildScript = function(tok) {
      var el = this.doc.createElement(tok.tagName);

      // Set attributes
      eachKey(tok.attrs, function(name, value) {
        el.setAttribute(name, value);
      });

      // Set content
      if(tok.content) {
        el.text = tok.content;
      }

      return el;
    };

    // Insert script into DOM where it would naturally be written.
    WriteStream.prototype.insertScript = function(el) {
      // Append a span to the stream. That span will act as a cursor
      // (i.e. insertion point) for the script.
      this.writeImpl('<span id="ps-script"/>');

      // Grab that span from the DOM.
      var cursor = this.doc.getElementById('ps-script');

      // Replace cursor with script.
      cursor.parentNode.replaceChild(el, cursor);
    };

    WriteStream.prototype.scriptLoadHandler = function(el, done) {
      function cleanup() {
        el = el.onload = el.onreadystatechange = el.onerror = null;
      }

      // Error handler
      var error = this.options.error;

      function success() {
        cleanup();
        done();
      }

      function failure(err) {
        cleanup();
        error(err);
        done();
      }

      // Set handlers
      set(el, {
        onload: function() {
          success();
        },

        onreadystatechange: function() {
          if(/^(loaded|complete)$/.test( el.readyState )) {
            success();
          }
        },

        onerror: function() {
          failure({ message: 'remote script failed ' + el.src });
        }
      });
    };

    WriteStream.prototype.shouldRelease = function(el) {
      var isScript = /^script$/i.test(el.nodeName);
      return !isScript || !!(this.options.releaseAsync && el.src && el.hasAttribute('async'));
    };

    return WriteStream;

  }());

  // Public-facing interface and queuing
  global.postscribe = (function() {
    var nextId = 0;

    var queue = [];

    var active = null;

    function nextStream() {
      var args = queue.shift();
      var options;
      if(args) {
        options = last(args);
        options.afterDequeue();
        args.stream = runStream.apply(null, args);
        options.afterStreamStart();
      }
    }

    function runStream(el, html, options) {
      active = new WriteStream(el, options);

      // Identify this stream.
      active.id = nextId++;
      active.name = options.name || active.id;
      postscribe.streams[active.name] = active;

      // Override document.write.
      var doc = (el.ownerDocument != null) ? el.ownerDocument : (document.getElementsByTagName("body") && document.getElementsByTagName("body")[0].ownerDocument) || (document.getElementsByTagName('head') && document.getElementsByTagName('head')[0].ownerDocument);

      var stash = {
        close: doc.close,
        open: doc.open,
        write: doc.write,
        writeln: doc.writeln
      };

      function write(str) {
        str = options.beforeWrite(str);
        active.write(str);
        options.afterWrite(str);
      }

      set(doc, {
        close: doNothing,
        open: doNothing,
        write: function(){
          return write(toArray(arguments).join(''));
        },
        writeln: function() {
          return write(toArray(arguments).join('') + '\n');
        }
      });

      // Override window.onerror
      var oldOnError = active.win.onerror || doNothing;

      // This works together with the try/catch around WriteStream::insertScript
      // In modern browsers, exceptions in tag scripts go directly to top level
      active.win.onerror = function(msg, url, line) {
        options.error({ msg: msg + ' - ' + url + ':' + line });
        oldOnError.apply(active.win, arguments);
      };

      // Write to the stream
      active.write(html, function streamDone() {
        // restore document.write
        set(doc, stash);
        // restore window.onerror
        active.win.onerror = oldOnError;

        options.done();
        active = null;
        nextStream();
      });

      return active;
    }

    function postscribe(el, html, options) {
      if(isFunction(options)) {
        options = { done: options };
      }
      options = defaults(options, OPTIONS);

      el =
        // id selector
          (/^#/).test(el) ? global.document.getElementById(el.substr(1)) :
            // jquery object. TODO: loop over all elements.
              el.jquery ? el[0] : el;


      var args = [el, html, options];

      el.postscribe = {
        cancel: function() {
          if(args.stream) {
            // TODO: implement this
            args.stream.abort();
          } else {
            args[1] = doNothing;
          }
        }
      };

      options.beforeEnqueue(args);
      queue.push(args);

      if(!active) {
        nextStream();
      }

      return el.postscribe;
    }

    return set(postscribe, {
      // Streams by name.
      streams: {},
      // Queue of streams.
      queue: queue,
      // Expose internal classes.
      WriteStream: WriteStream
    });
  }());
}());

// MPS internal postscribe control and tracking functions
mps._postscribe = {
  enabled: 0,
  loaded: [],
  // Enable Postscribe: override document.write with async IE8+
  enable: function() {
    if((!this.enabled && typeof postscribe == "function" && !mps._checkua().oldie) || (!this.enabled &&  typeof postscribe == "function" && mps._checkua().oldie && mps._checkua().oldie > 8)) {
      document.write = function (write) {
        var el = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
        return function (write) {
          postscribe(el, write);
        }
      }(document.write);
      this.enabled = 1;
      return this.status();
    } else{
      this.disable();
      this.enabled = 0;
      mps._debug('[mps:Postscribe] Warning. Postscribe already enabled or using IE8');
    }

  },
  // Disable Postscribe: return document.write to native IE8+
  disable: function() {
    if(this.enabled && (mps._checkua().oldie && mps._checkua().oldie > 8) || (this.enabled && !mps._checkua().oldie)) {
      var iframeDocWrite = document.createElement('iframe');
      iframeDocWrite.setAttribute("id", "iframeDW");
      iframeDocWrite.width = "0px";
      iframeDocWrite.height = "0px";
      iframeDocWrite.style.visibility = "hidden";
      var docElement = document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0];
      docElement.appendChild(iframeDocWrite);
      document.write = iframeDocWrite.contentWindow.document.write;
      if(!mps._checkua().oldie){
        docElement.removeChild(iframeDocWrite);
      }
      /*else {
        // Throws can't execude from freed script error
        document.getElementById('iframeDW').removeNode(true);
       }*/
    }
    this.enabled = 0;
    return this.status();
  },
  status: function() {
    mps._debug('[mps:Postscribe] status:' + this.enabled);
    return this.enabled;
  }
};

// Postscribe Callback, track content
// Track each snippet that postscribe loads: postscribe.streams[2].actuals[1]
mps._postscribeCallback = function(content) {
  mps._postscribe.loaded.push(content);
  //mps._debug('[mps:Pixelman] postscribeCallback:'+ content);
};



mps._debug('[mps/JS] LOADED: Postscribe');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

// Requires js/advertising/postscribe.js [include htmlParser]

// Delay mps._execAd until all requirements have completed: 0/1
mps._delays.kvtimeout = mps._delays.kvtimeout || 3000;
mps._kvinsert = {
  pending: [], // required, before complete
  ready: [], // after complete finishes
  timeout: [], // force complete after timeout

  require: function(type) {
    if(!type || type.length==0){ mps._debug('^[mps:kvinsert] invalid require()'); return false; }
    if( mps._kvinsert.pending.indexOf(type) > -1  || mps._kvinsert.ready.indexOf(type) > -1) {
      mps._debug('[mps/kvinsert] SKIPPED: '+type+' '+mps._elapsed());
      return false;
    }
    if(mps._kvinsert.pending.indexOf(type) == -1){ mps._kvinsert.pending.push(type); }
    mps._debug('[mps/kvinsert] required: '+type+' '+mps._elapsed());
    setTimeout(function () {
      if (mps._kvinsert.ready.indexOf(type) == -1) {
        console.warn('[mps/kvinsert] force complete: '+type);
        mps._kvinsert.complete(type, true);
      }
    }, mps._delays.kvtimeout);
    return this.status();
  },

  complete: function(type,force){ // type=[str], OPTIONAL force[bool] complete
    if(!type || type.length===0){ mps._debug('^[mps:kvinsert] invalid complete()'); return false; }
    force = force || false;
    mps._reqs = mps._reqs || {};
    mps._reqs[mps._loadset] = mps._reqs[mps._loadset] || {};
    mps._reqs[mps._loadset].kvinserts = mps._reqs[mps._loadset].kvinserts || {};
    if (this.pending.indexOf(type) > -1) {
      var i = this.pending.indexOf(type);
      this.pending.splice(i, 1);
    }
    if(this.timeout.indexOf(type) == -1) {
      // force complete
      if (force) {
        this.timeout.push(type);
        this.pending = [];
        return false;
      }
      else {
        // good complete
        mps._reqs[mps._loadset].kvinserts['kv_' + type] = mps._elapsed('', true);
        if (this.ready.indexOf(type) == -1) {
          this.ready.push(type);
        }
        this.injectgpt(); // Set Page Targeting
        if (typeof mps.kvcomplete === 'function') {
          mps.kvcomplete(type);
        }
        mps._debug('[mps/kvinsert] complete: ' + type + ' ' + mps._elapsed());
        return this.status();
      }
    }
  },

  status: function(){
    var state = true;
    if(this.pending.length === 0) state = 1;
    if(this.pending.length > 0) state = false;
    return state;
  },

  injectgpt:  function() {
    if (typeof(__nbcudigitaladops_inject) == 'object' && __nbcudigitaladops_inject.getGPT) {
      var _GPT_params = __nbcudigitaladops_inject.getGPT();
      for (var _key in _GPT_params) {
        if (_GPT_params.hasOwnProperty(_key) &&  mps._keys(mps._targeting).indexOf(_key) == -1) {
          mps._debug('[mps:Pixelman] Page targeting: '+_key);
          mps._setPageTargeting(_key, _GPT_params[_key]);
        }
      }
    }
  }
};


var __nbcudigitaladops_dtparams =__nbcudigitaladops_dtparams || "pm=1;";
var __nbcudigitaladops_gptparams = __nbcudigitaladops_gptparams || "";

// Pixelman Header Methods
var __nbcudigitaladops_inject = __nbcudigitaladops_inject || {
      version: '3.0',
      init : function(){
        // legacy variables (requires optimisation)
        this.c_name = 'adops_master_kvs';
        this.c_expire_hour = 1440;
        this.qsparam = 'dart';
        this.sitefilter = ['google.com','go','ask.com','as','aol.com','ao','yahoo.com','ya'];
        this.drt_r = 'ref';
        if(this.qspass()) this.dtprm( this.qspass() );
        if(typeof this.ref == 'function'&& typeof this.dtprm == 'function'){ this.dtprm( this.ref() ); }
        if(typeof this.gc == 'function' && this.c_name) this.dtprm( this.gc(this.c_name) );
      },
      dtprm : function(p){
        // set object
        if(p==''||p==undefined) return false;
        p = mps._trim(p,';') +';';
        if(__nbcudigitaladops_dtparams.indexOf(p) == -1) {
          __nbcudigitaladops_dtparams += p;
          this._setGPTGlobal();
        }
        return __nbcudigitaladops_dtparams;
      },
      gc : function(n){
        var c_val = (n && mps._ck && typeof mps._ck.r == 'function') ? mps._ck.r(n) : false;
        c_val = (c_val == null) ? '' : c_val;
        return c_val;
      },
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      },
      qspass: function(){
        var qsval = this.getQSValue(this.qsparam);
        if(qsval!=''){
          qsval = this.qsparam+'='+qsval+';';
        }
        return qsval;
      },
      getQSValue: function(p){
        var qs=location.search+'';
        var i=qs.indexOf('&'+p+"="); // Find p after another param, avoid mid-param match
        if(-1==i){i=qs.indexOf('?'+p+"=");} // Find p as the first param
        if(-1==i){return '';}
        var len=i+p.length+2;
        var end=qs.indexOf("&", len);
        return qs.substring(len,end<0?qs.length:end);
      },
      ref: function(){
        var r = document.referrer,dlen = '',ref='',result='';
        r=r.replace(/^https*:\/\//i,'');
        r=r.split('/')[0];
        r=r.split('.');
        if(r!=''){
          ref=r[r.length-2]+'.'+r[r.length-1];
          dlen = r[r.length-2].length;
        }
        this.ref = ref;
        var f = this.sitefilter;
        for(var x=0;x<f.length;x+=2){
          if(f[x].toLowerCase() == this.ref){
            result = f[x+1]+dlen;
          }
        }
        if (result!=''){
          result = this.drt_r+'='+result+';';
        }
        return result;
      },
      getGPT: function(){
        var gpt = {};
        var dtparams = __nbcudigitaladops_dtparams.replace(/;+$/,'').split(/;/);
        for(var x=0;x<dtparams.length;x++){
          var d = dtparams[x].split(/=/);
          gpt[d[0]] = gpt[d[0]] || [];
          gpt[d[0]].push(d[1]);
        }
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt[y] = gpt[y].join(',');
          }
        }
        return gpt;
      },
      _setGPTGlobal: function(){
        var gpt = this.getGPT();
        var gpt_arr = [];
        var gpt_var = '';
        for ( var y in gpt ){
          if( gpt.hasOwnProperty(y) ){
            gpt_arr.push(y+'%3D'+gpt[y]);
          }
        }
        gpt_var = gpt_arr.join('%26');
        __nbcudigitaladops_gptparams = gpt_var;
        return gpt_var;
      }
    };

//init pixel header inclusion
if(Math.floor(__nbcudigitaladops_inject.version) === 3){
  __nbcudigitaladops_inject.init();
}

// Pixelman Footer Methods
var __nbcudigitaladops = __nbcudigitaladops || {
      init : function(){
        __nbcudigitaladops_inject.sc('');
      },
      dtprm : function(p){
        // set cookie
        if(p==''||p==undefined){
          return false;
        }
        p = p.replace(/;+$/,'') + ';';
        var cd = this.gc( this.c_name );
        cd += p;
        this.sc(cd,this.c_name,this.c_expire_hour);
      },
      // Duplicate setcookie function in__nbcudigitaladops (supports legacy pixelman)
      sc: function(cd,cn,ch){
        cn = (cn!=undefined) ? cn.toString().replace('null','') : this.c_name;
        ch = ch || this.c_expire_hour;
        var days = (ch/24);
        if((!cn || !mps._ck || typeof mps._ck.w != 'function')) return false;
        mps._ck.w(cn,cd,days); //mapto mps._ck.w(name,value,days)
      }
    };

// Legacy Pixelman Mapping
__nbcudigitaladops_header = __nbcudigitaladops;
__nbcudigitaladops.gc = __nbcudigitaladops_inject.gc || {};
__nbcudigitaladops.version = __nbcudigitaladops_inject.version;
__nbcudigitaladops.c_name = __nbcudigitaladops_inject.c_name || '';
__nbcudigitaladops.c_expire_hour = __nbcudigitaladops_inject.c_expire_hour || '';

//init pixel footer inclusion
if(Math.floor(__nbcudigitaladops.version) === 3){
  __nbcudigitaladops.init();
}

mps._debug('[mps/JS] LOADED: Pixelman');</script>

<script>mps.getResponsiveSet=function(width,height){
var vpsize = mps._viewport(), width=width?width:vpsize[0], height=height?height:vpsize[1];
if(width >= 0 && height >= 0) { rset="0" }
if(width >= 768 && height >= 0) { rset="tablet" }
if(width >= 1024 && height >= 0) { rset="tabletwide" }
if(width >= 2000 && height >= 0) { rset="full" }
if(typeof(rset)!='undefined') { return rset } else { return false; }
}</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.responsiveApply = function(norefresh) {
  mps._debug('[mps:Responsive] responsiveApply ('+(norefresh?'no refresh':'with refresh')+')');//DEBUG
  if(!mps.pagevars.responsive) return false;
  var _slot, _skiprefresh, rset=mps.getResponsiveSet();
  // skip if the responsive set hasn't changed
  if(rset===mps._rset) {
    mps._debug('[mps:Responsive] SKIP responsiveApply: Unchanged Set');//DEBUG
    return false;
  }
  var _execute = function(ask,lsk) {
    var refreshdelayms = mps._refreshdelayms || 500;
    setTimeout(function(){ mps._execAd(ask,lsk); },refreshdelayms*lsk); // execute ad with delay (gpt limitation)
  }
  // go through all responsive slots for each loadset
  for(lsk in mps.responsiveslots) { // loadset
    var _refreshset = [], _cloneset = [];
    for(ask in mps.responsiveslots[lsk]) { // slot
      _skiprefresh=false;
      if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset][0] && mps.responsiveslots[lsk][ask][rset]!='NONE' && (_slot=mps._slotsdisabled[lsk][ask])) { // SHOW
        mps._debug('[mps:Responsive] SHOW <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].splice(mps.slotsdisabled[lsk].indexOf(ask),1);
        mps._classRemove(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adshow', ask, lsk);
        if(typeof(mps.adshowCallback) =='function') mps.adshowCallback(ask,lsk);
        if(!mps._slotscalled[lsk][ask]) {
          _execute(ask,lsk);
          _skiprefresh=true;
        }
        delete mps._slotsdisabled[lsk][ask];
      } else if(mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset] && mps.responsiveslots[lsk][ask][rset]=='NONE' && !mps._slotsdisabled[lsk][ask] && (_slot=mps._adslots[lsk][ask])) { // HIDE
        mps._debug('[mps:Responsive] HIDE <'+lsk+':'+ask+'>');//DEBUG
        mps.slotsdisabled[lsk].push(ask);
        mps._slotsdisabled[lsk][ask] = mps._adslots[lsk][ask];
        mps._classAdd(mps._select('#'+_slot),'mps-gpt-hidden');
        mps._queue.render('adhide', ask, lsk);
        if(typeof(mps.adhideCallback) =='function') mps.adhideCallback(ask,lsk);
      }
      // Refresh if enabled
      if(!norefresh && !_skiprefresh && mps._slotscalled[lsk][ask] && !mps._slotsdisabled[lsk][ask]) {
        // Refresh if changed from previous responsive set
        if(!mps.responsiveslots[lsk][ask][rset] || !mps.responsiveslots[lsk][ask][mps._rset] || (mps.responsiveslots[lsk][ask][rset].join()!=mps.responsiveslots[lsk][ask][mps._rset].join())) {

          if(mps._advars[lsk][ask] && typeof(gpt[mps._advars[lsk][ask]])=='object') {
            _cloneset[0] = _cloneset[0] || [];
            // INSERTED ADS + CLONES:  Refresh combined inserted ad and clones together
            if(typeof mps._clonevars == 'object' && mps._clonevars[lsk] && mps._clonevars[lsk][ask] &&  mps._clonevars[lsk][ask].length>0) {
              _cloneset[0].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET+CLONE  <' + lsk + ':' + ask + '>');
            // INSERTED ADS: Refresh group based off loadset
            }else if(ask.indexOf('-C') === -1){
              _refreshset.push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] LOADSET <' + lsk + ':' + ask + '>');
            }
            // CLONE ADS: Refresh array _cloneset for respective cloned ads
            if(ask.indexOf('-C') !== -1) {
              var cloneset = (ask.split('-C').length>0) ? ask.split('-C')[1] : 0;
              var cloneslot = ask.split('-C')[0];
              _cloneset[cloneset] = _cloneset[cloneset] || [];
              _cloneset[cloneset].push(gpt[mps._advars[lsk][ask]]);
              mps._debug('[mps:Responsive] CLONESET  <' + cloneset + ':' + ask + '>');
            }
          }
        }
      }
    }
    // Execute refresh on insertAds per loadset (first)
    if(_refreshset.length > 0) {
      var changecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
      mps._debug('[mps:Responsive] Refresh (LOADSET '+lsk+'), correlator:'+changecorrelator);//DEBUG
      mps.refreshAds(_refreshset,lsk,changecorrelator,true);
    }
    // Execute refresh on cloneAds per cloneset (second)
    if(_cloneset.length > 1) {
      for (var j = 0; j < _cloneset.length; j++) {
        var clonecorrelator = mps._bool(mpsopts.updatecorrelator) == true || (mpsopts.updatecorrelator > 1 && lsk % mps._bool(mpsopts.updatecorrelator, true) === 0) ? true : false;
        mps._debug('[mps:Responsive] Refresh (CLONESET ' + (j) + '), correlator:' + clonecorrelator);//DEBUG
        mps.refreshAds(_cloneset[j], lsk, clonecorrelator, true);
        delete _cloneset[j];
      }
    }
  }
  mps._rset = rset;
  return true;
};

mps._debug('[mps/JS] LOADED: Responsive'); //DEBUG
</script>
<script>mps.lazyload=mps.lazyload||{}; mps.lazyload[0]={}; mps.lazyload[0].adslots =["topbox","midbanner","topbanner"];
var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});
mps._detect=mps._detect||{};
mps._detect._pending=mps._detect._pending||[];
mps._detect._refresh=mps._detect._refresh||{};
mps._detect.padding=mps._detect.padding||10;
mps._detect.removed=mps._detect.removed||{};
mps._detect._focus=false;
mps._detect._activerefresh=mps._detect && mps._detect.activerefresh ? mps._detect.activerefresh : 0;
mps._detect.getBoundingRect = function(s) {
  var sel = s, bRect = document.body.getBoundingClientRect(), elemRect = sel.getBoundingClientRect(),
      rectY = Math.round(elemRect.top), rectX = Math.round(elemRect.left), offsetY = rectY - bRect.top, offsetX = rectX - bRect.left;
  return { top: offsetY, left: offsetX };
};
mps._detect.viewport = function(s) {
  if(typeof s === 'object' && s !== null) {
    var win = window, winDocElem = win.document.documentElement, vp = mps._viewport(), vpW = vp[0], vpH = vp[1], elO = this.getBoundingRect(s), elY = elO.top, elX = elO.left,
        vpPad = mps._detect.padding, elW = s.offsetWidth ? s.offsetWidth : 0, elH = s.offsetHeight ? s.offsetHeight : 0,
        elA = elW * elH, scY = win.pageYOffset ? win.pageYOffset : winDocElem.scrollTop, scX = win.pageXOffset ? win.pageXOffset : winDocElem.scrollLeft;
    var vpMinX = elX >= ((scX - vpPad) < 0 ? -20 : (scX - vpPad)),vpMaxX = elX <= ((scX + vpW) + vpPad),vpMinY = elY >= ((scY - vpPad) < 0 ? -20 : (scY - vpPad)),vpMaxY = elY <= ((scY + vpH) + vpPad);
    // Negative padding, ads at absolute top/bottom.
    if(vpPad < 0) {
      if(elY<=0) { vpMinY = true; }
      else if(elY >= document.documentElement.offsetHeight) { vpMaxY = true; }
    }
    return vpMinX && vpMinY && vpMaxX && vpMaxY;
  } else {
    mps._debug('[mps:Detect] Invalid object: '+s);
    return false;
  }
};
mps._detect.load = function() {
  var ads = mps._detect._pending;
  if(ads.length > 0) {
    for(var i =0; i<ads.length; i++) { var _ads = ads[i], gptdiv = mps._adslots[_ads.loadset][_ads.slot];
      if(gptdiv && mps._detect.viewport(document.getElementById(gptdiv))) {
        var clone = (mps._clonevars && mps._clonevars[_ads.loadset] && typeof mps._clonevars[_ads.loadset][_ads.slot] != 'undefined' && mps._clonevars[_ads.loadset][_ads.slot].length > 0) ? mps._clonevars[_ads.loadset][_ads.slot].split('_C')[1] : 0;
        mps._detect.remove(_ads.slot, _ads.loadset);
        mps._execAd(_ads.slot, _ads.loadset, clone, true);
        mps._queue.render('lazyload', _ads.slot, _ads.loadset);
        if(typeof mps.lazyLoadCallback === 'function') { mps.lazyLoadCallback(_ads.slot, _ads.loadset); }
        mps._debug('[mps:Detect]: ' + _ads.slot + ' in loadset ' + _ads.loadset + ' detected in viewport, remove from pending, call mps._execAd.'); } }
  }
  var refresh = mps._detect._refresh;
  for(var i in refresh) {
    for(var j in refresh[i]) {
      if(mps._detect.viewport(document.getElementById(refresh[i][j]))) {
        mps._debug('[mps:Detect]: Ad detected in viewport from refresh queue, call mps.refresh.');
        delete mps._detect._refresh[i][j];
        if(mps._keys(mps._detect._refresh[i]).length == 0) delete mps._detect._refresh[i];
        mps.refreshAds(j,i);
        if(typeof mps.lazyloadRefreshCallback === 'function') { mps.lazyloadRefreshCallback(j, i); }
      }
    }
  }
};
mps._detect.remove = function(slot, loadset) { var pen = []; for(var i =0; i<mps._detect._pending.length; i++) { if(mps._detect._pending[i].slot !== slot || mps._detect._pending[i].loadset !== loadset) { pen.push(mps._detect._pending[i]); }} mps._detect._pending = pen; };
mps._detect.bindfocus = function() {
  mps._detect.focusListener = null;
  mps._detect.blurListener = null;
  if(window.addEventListener) {
    mps._detect.focusListener = window.addEventListener('focus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.addEventListener('blur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  } else {
    mps._detect._focus = true;
    mps._detect.focusListener = window.attachEvent('onfocus', function() {
      mps._detect._focus = true;
      if(typeof mps.detectwinfocusCallback === 'function') {
        mps.detectwinfocusCallback();
      }
    });
    mps._detect.blurListener = window.attachEvent('onblur', function() {
      mps._detect._focus = false;
      if(typeof mps.detectwinblurCallback === 'function') {
        mps.detectwinblurCallback();
      }
    });
  }
  mps._debug('[mps:Detect]: active refresh is enabled.');
};
mps._detect.bindfocus();
mps._debug('[mps/JS] LOADED: Lazyload');
</script>
<script>mps.pagevars.omnisects=null; mps.pagevars.omnitype=null;</script><style type="text/css" id="mps-gpt-shared" class="mps-style">.mps-gpt-hidden { display: none; }</style>
      <script id="mps-gpt-shared" class="mps-script">
        // mps._setAdId(gptadid[string]) used to modify gptid in g.definedSlot()
        mps._setAdId = function(gptadid){
          if(typeof mps.transformAdId == 'function' && gptadid) {
            var modgptadid = mps.transformAdId(gptadid).toString();
            mps._debug('[mps:GPT] OVERRIDE gptid: '+modgptadid);
            return modgptadid;
          }else{
            return gptadid;
          }
        };

        mps._abcallback = function(error) {
          if(Object.keys && Object.keys(gpt).length === 0 || error) {
            mps._gptError = true;
            mps._debug('[mps:GPT] There was an error loading GPT, check if an ad blocker is enabled.');
          } else {
            mps._gptError = false;
            mps._debug('[mps:GPT] GPT is loaded correctly, no ad blocker is enabled.');
          }
        };
        /*  mps._gptloadCallback() */
        mps._gptloadCallback = function(){
          if(mps._ext && mps._reqs && mps._reqs[mps._ext._set]){
            mps._reqs[mps._ext._set]['gptready'] = mps._elapsed('',true);
          }
          for(avk in mps.advars) {
            if(typeof(mps.advars[avk])=='string' && typeof(gpt[mps.advars[avk]])=='object') mps.adobs.push(gpt[mps.advars[avk]]);
          }
          mps._adobs[mps._loadset] = mps.adobs;
          mps._gptloaded = true;
          mps._gptrefresh = true;
          if(typeof(mps._cloneObjects)=='function') mps._cloneObjects();
          if(mps._queue.gptloadset[mps._loadset]) {
            while(mps._queue.gptloadset[mps._loadset].length) {
              mps._queue.gptloadset[mps._loadset].shift().call();
            }
          }
          if(!mps._queue.gptloadset[mps._loadset]) {
            mps._queue.gptloadset[mps._loadset] = []
          }
          if(mps._queue.mpsloaded.length) { mps._queue.mpsloaded.shift().call(); }
          mps._debug('[mps:GPT] READY: gpt-asynchronous (processing '+mps._queue.gptloadset[mps._loadset].length+' queue items) gptloaded '+mps._elapsed());
          if(typeof(mps.gptloadCallback)=='function') mps.gptloadCallback();
        };

        /*  mps._adloadCallback(eo=object, loadset=number) */
        mps._adloadCallback = function (eo, loadset) {
          if (typeof (eo) == 'object' && typeof (eo.slot) == 'object') {
            // Create vars
            var _refreshed = 0,
                _cloned = 0,
                _adtarget = eo.slot.getSlotElementId(),
                _gptid = eo.slot.getAdUnitPath(),
                _gptcorrelator = (mps._correlator && typeof mps._correlator.get == 'function') ? mps._correlator.get() : 0,
                _adslot = _adtarget.replace('div-gpt-', '').split('-'),
                cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
                adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
            //cloned ad
            mps._clonevars = mps._clonevars || {};
            mps._clonevars[adload] = mps._clonevars[adload] || [];
            mps._clonevars[adload][cleanslot] = mps._clonevars[adload][cleanslot] || '';
            var cloneset = (mps._clonevars[adload][cleanslot].length > 0 && mps._clonevars[adload][cleanslot].split('_')[2].indexOf('C') == -1) ? mps._clonevars[adload][cleanslot].split('_')[2] : 0;
            if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[2];
            } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
              var adslot = cleanslot + '-' + _adslot[3];
            } else {
              adslot = cleanslot;
            }
            var clonenum = (adslot.indexOf('C') != -1) ? parseInt(adslot.split('C')[1], 10) : false;
            // refreshed ad
            if (mps._adloads[adload] && mps._adloads[adload][adslot] && mps._ext._insertedads[adload].indexOf(adslot) > -1) _refreshed = 1;
            // cloned ad & !refreshed
            if (mps._clonevars[adload][cleanslot].length && parseInt(mps._clonevars[adload][cleanslot].split('_C')[1], 10) > 0) _cloned = 1;
            // Create internal eo._mps object
            eo._mps = {
              '_elapsed': mps._elapsed('', true),
              '_slot': cleanslot,
              '_targeting': eo.slot.getTargetingMap(),
              '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
              'adslot': mps._adslots[adload][adslot],
              'advar': mps._advars[adload][adslot],
              'gptid': _gptid,
              'correlator': _gptcorrelator,
              'loadset': loadset
            };
            //Create mps._adloads
            if (typeof adload == 'number' && adslot.length > 0) {
              mps._adloads[adload] = mps._adloads[adload] || {};
              mps._adloads[adload][adslot] = mps._adloads[adload][adslot] || [];
              mps._correlator.sets[adload] = mps._correlator.sets[adload] || {};
              mps._correlator.sets[adload][adslot] = mps._correlator.sets[adload][adslot] || [];
              var radload = 'R' + adload;
              if(_refreshed) {
                // Refreshed ads
                mps._correlator.sets[radload] = mps._correlator.sets[radload] ||{};
                mps._correlator.sets[radload][adslot] = mps._correlator.sets[radload][adslot]  ||[];
                mps._correlator.sets[radload][adslot] = _gptcorrelator;
                mps._adloads[radload] = mps._adloads[radload] || {};
                mps._adloads[radload][adslot] = mps._adloads[radload][adslot] || [];
                mps._adloads[radload][adslot].push({
                  'elapsed': mps._elapsed('', true),
                  'correlator': _gptcorrelator,
                  'empty': eo.isEmpty,
                  '_gpt': eo.slot
                });
                mps._adloads[adload][adslot]._mps._refreshed = (mps._adloads[radload][adslot].length) ? mps._adloads[radload][adslot].length : 0;
              } else {
                eo._mps._refreshed = false;
                if (!_cloned) {
                  // Non clone ads
                  eo._mps._clone = false;
                  mps._adloads[adload][adslot] = eo;
                }else if (_cloned) {
                  // Cloned ads
                  eo._mps._clone = clonenum;
                  mps._adloads[cloneset][adslot] = eo;
                  mps._adloads[adload][cleanslot]._mps._clone = true;
                  mps._adloads[cloneset][adslot] = eo;

                  mps._clonerunning = false;
                  if(mps._queue.clonead.length) {
                    mps._queue.clonead.shift().call();
                  }
                }
                mps._correlator.sets[adload][adslot] = _gptcorrelator;
                mps._debug("[mps:GPT] correlator: " + _gptcorrelator + ', ' + adslot + ', ' + mps._elapsed('', true) + 'ms');
              }
            }
            //save mps._req adslot end time
            if(mps._reqs && mps._reqs[mps._loadset] && eo._mps._slot !== '_oop') mps._reqs[mps._loadset]['end_'+adslot] = mps._elapsed('',true);
            mps._debug("[mps:GPT] ADLOAD/REFRESH "+adload+":"+adslot+" "+(eo.isEmpty ? "(isEmpty) ":"")+mps._elapsed());
            if(mps._ext._insertedads['NaN'] &&  mps._ext._insertedads['NaN'].length==0){ delete mps._ext._insertedads['NaN']; }
            // External adload queue and callback
            mps._queue.render('adload', eo);
            if(typeof(mps.adloadCallback)=='function') mps.adloadCallback(eo);
          }
        };

        mps._adViewCallback = function (eo) {
            var _adtarget = eo.slot.getSlotElementId();
            var _adslot = _adtarget.split('-');
            var _loadset = (typeof _adslot[4] !== 'undefined' && _adslot[4].indexOf('C') === -1) ? _adslot[4] : 0;
            mps._adviews[_loadset] = mps._adviews[_loadset] || [];
            for(var i in mps._adloads[_loadset]) {
              if(mps._adloads[_loadset][i]._mps.adslot === _adtarget) {
                var _time = (mps._elapsed('', true) - mps._adloads[_loadset][i]._mps._elapsed);
                mps._debug("[mps:GPT] ADVIEW /" + i + "/ in " + _time + 'ms');
                // Refreshed ad.
                if(mps._adviews[_loadset].indexOf(i) > -1) {
                  _loadset = 'R' + _loadset;
                  var _index = (mps._keys(mps._adloads[_loadset][i]).length) - 1;
                  mps._adloads[_loadset][i][_index]._viewed = 1;
                  mps._adloads[_loadset][i][_index]._viewtime = _time;
                  mps._adviews[_loadset] = mps._adviews[_loadset] || [];
                  var _resindex = 0;
                  while(mps._adviews[_loadset].indexOf(i) > -1) {
                    _resindex += 1;
                    i = i.split('-R');
                    i = (i[0] + '-R' +  _resindex);
                  }
                  mps._adviews[_loadset].push(i);
                // Ad or cloned ad.
                } else {
                  mps._adloads[_loadset][i]._mps._viewed = 1;
                  mps._adloads[_loadset][i]._mps._viewtime = _time;
                  mps._adviews[_loadset].push(i);
                }
                break;
              }
            }
            if (typeof(mps.adViewCallback) == 'function') {
                mps.adViewCallback(eo);
            }
            mps._queue.render('adview', eo);
        };

        /*  mps._execAd(slot=string, loadset=number, clone=number, detect=bool) */
        mps._execAd = function(slot,loadset,clone,detect) {
          if(!slot) return false;
          clone = clone || 0;
          detect = detect || false;
          loadset = (parseInt(loadset)>-1) ? parseInt(loadset) : mps._loadset;
          var gptdom;
          if((!clone && !mps._adslots) || (!clone && !mps._adslots[loadset]) || (mps._kvinsert && !mps._kvinsert.status())) {
            mps._delays.execadready = mps._delays.execadready||250;
            if(mps._kvinsert && mps._kvinsert.status()) { mps._debug('[mps:GPT] DELAYING mps._execAd: adslot ('+slot+','+loadset+')'+mps._elapsed());}
setTimeout(function(){              mps._execAd(slot,loadset);
 },mps._delays.execadready);            return false;
          }
          if(!clone && mps._slotscalled[loadset][slot]) {
            mps._debug('[mps:GPT] FAILED mps._execAd('+slot+'): Already called on loadset '+loadset+' '+mps._elapsed());
            return false;
          }
          var slotvar = (typeof clone == 'number' && clone>0) ? (slot+'-C'+clone) : slot; // clone or inserted ad
          var gptdiv = mps._adslots[loadset][slotvar];
          if(!slot || !mps.adslots || !gptdiv || !(gptdom=document.getElementById(gptdiv))) {
              if(slot !== '_oop') {
                var detectAd = { 'slot': slotvar, 'loadset': loadset };
                mps._detect._pending.push(detectAd);
              }
            mps._debug('[mps:GPT] FAILED mps._execAd');
            return false;
          }
            if(!clone && slot !== '_oop' && mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1 && !mps._detect.viewport(document.getElementById(gptdiv)) && !detect) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              return false;
            }
            // For Clones: lazyload initial, parent removed or cloneslot
            if(clone > 0 && !detect && ((mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slot) > -1) || (mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotvar) > -1)) && !mps._detect.viewport(document.getElementById(gptdiv))) {
              var detectAd = { 'slot': slotvar, 'loadset': loadset };
              mps._detect._pending.push(detectAd);
              mps._clonerunning = false;
              return false;
            }
          mps._slotscalled[loadset][slotvar] = gptdiv;
          if(mps.ab && typeof mps.ab._callback === 'function') { mps.ab._callback(slot, loadset);}
googletag.cmd.push(function() {            mps._delays.gptdisplay = mps._delays.gptdisplay||0;
            if(!parseInt(mps._delays.gptdisplay)) mps._delays.gptdisplay=0;
            if(mps.slotsdisabled[loadset].indexOf(slot)==-1) {
setTimeout(function(){              mps._debug('[mps:GPT] googletag.display <'+loadset+':'+slot+'> '+mps._elapsed()); //DEBUG
              googletag.display(gptdiv);
},mps._delays.gptdisplay);            } else {
              mps._slotsdisabled[loadset][slot] = gptdiv;
              delete mps._slotscalled[loadset][slot];
              mps._classAdd(gptdom,'mps-gpt-hidden');
              mps._debug('[mps:GPT] SKIP googletag.display <'+loadset+':'+slot+'> Responsive Disabled '+mps._elapsed()); //DEBUG
            }
});          return true;
        };
          mps._debug('[MPS:Detect Display]: Enabled.');
          if(mps._detect.interval) {
            clearInterval(mps._detect.interval);
          }
          mps._detect.intVal = mps._delays.detect ? mps._delays.detect : 500;
          mps._detect.interval = setInterval(mps._detect.load, mps._detect.intVal);
          if(window.addEventListener) {
            mps._scroll = window.addEventListener('scroll', mps._detect.load); mps._resize = window.addEventListener('resize', mps._detect.load);
          } else {
            mps._scroll = window.attachEvent('onresize', mps._detect.load); mps._resize = window.attachEvent('onscroll', mps._detect.load);
          }
      </script>
      <script id="mps-gpt-boilerplate-1468642752" class="mps-script-1468642752">
        mps._debug('[mps:GPT] INIT: gpt-asynchronous '+mps._elapsed());
        mps._gptloaded = false;
        mps._adloads=mps._adloads||{};       // global adloads object
        mps._correlator=mps._correlator||{}; // global correlator array
        mps._adviews=mps._adviews||[];
        mps._adobs=mps._adobs||{};
        mps._adslots=mps._adslots||{};
        mps._advars=mps._advars||{};
        mps._slotscalled=mps._slotscalled||{};
        mps._slotscalled[mps._loadset]={};
        mps._slotsdisabled=mps._slotsdisabled||{};
        mps._slotsdisabled[mps._loadset]={}
        mps._rsizemap={};
        mps._resetrsizemap = mps._resetrsizemap || {};
        mps.slotsdisabled = mps.slotsdisabled||{};
        mps.slotsdisabled[mps._loadset]=[];
	      mps._gptTargeting = mps._gptTargeting || {};
        mps._resetcatexclusion = mps._resetcatexclusion || {};
        mps._resettargeting = mps._resettargeting || {};
        mps._pagecontext = mps._pagecontext || {};
        mps._gptTargeting[mps._loadset] = mps._gptTargeting[mps._loadset] || {};
        if(typeof mps._ext === 'undefined' && typeof(mpscall.path) === 'undefined') {
          mpscall.path = '~';
        }
        var gpt=gpt||{};

        mps._rsizemap[3737117] = {};
        mps._rset=mps.getResponsiveSet();        //• GPT-ASYNCHRONOUS Boilerplate

	      if(mps._gptrefresh) {
          (function(){
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (mps._gadsurl) ? mps._gadsurl : (useSSL ? 'https:' : 'https:') + '//www.googletagservices.com/tag/js/gpt.js';
            gads.onload=function() { setTimeout(function() { mps._abcallback(); }, 500); }
            gads.onerror=function() { mps._abcallback(true); }
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
	}
      </script>
      <script id="mps-gpt-code-1468642752" class="mps-scripts">
        if(mps._gptrefresh) { googletag.cmd.push(function() {  // [open: Asynchronous Wrapper]
      //• GPT Slot Definitions (Unit-Level Targeting & Exclusions) w/ Responsive Map

        // ADSLOT: topbanner [topbanner]
mps._rsizemap[3737117]["topbanner"] = googletag.sizeMapping().addSize([2000,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([1024,0],[[728,90],[970,90],[970,66],[1400,600]]).addSize([768,0],[[728,90]]).addSize([0,0],[[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbanner_3737117'] = {
       sizes:  [[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbanner-3737117'
     };
     gpt.topbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[728,90],[970,90],[970,66]],'div-gpt-topbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('mrrobot');
        }

        gpt.topbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbanner_3737117'] = mps._resetcatexclusion['gpt.topbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.topbanner_3737117'].push('home');
        }

        gpt.topbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbanner")
        .setCollapseEmptyDiv(true);
gpt.topbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbanner"]);
gpt.topbanner_3737117.addService(googletag.pubads());

        // ADSLOT: topbox [topbox]
mps._rsizemap[3737117]["topbox"] = googletag.sizeMapping().addSize([2000,0],[[300,250]]).addSize([1024,0],[[300,250]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.topbox_3737117'] = {
       sizes:  [300,250],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-topbox-3737117'
     };
     gpt.topbox_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[300,250],'div-gpt-topbox-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('mrrobot');
        }

        gpt.topbox_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.topbox_3737117'] = mps._resetcatexclusion['gpt.topbox_3737117'] || [];
          mps._resetcatexclusion['gpt.topbox_3737117'].push('home');
        }

        gpt.topbox_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","topbox")
        .setCollapseEmptyDiv(true);
gpt.topbox_3737117.defineSizeMapping(mps._rsizemap[3737117]["topbox"]);
gpt.topbox_3737117.addService(googletag.pubads());
        if((["0"].indexOf(mps.getResponsiveSet()) > -1)) {
          mps.slotsdisabled[mps._loadset].push("topbox");
        }

        // ADSLOT: showcardad [showcardad]
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.showcardad_3737117'] = {
       sizes:  [[300,250],[450,375]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-showcardad-3737117'
     };
     gpt.showcardad_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[300,250],[450,375]],'div-gpt-showcardad-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('mrrobot');
        }

        gpt.showcardad_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.showcardad_3737117'] = mps._resetcatexclusion['gpt.showcardad_3737117'] || [];
          mps._resetcatexclusion['gpt.showcardad_3737117'].push('home');
        }

        gpt.showcardad_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","showcardad")
        .setCollapseEmptyDiv(true,true);
gpt.showcardad_3737117.addService(googletag.pubads());

        // ADSLOT: midbanner [midbanner]
mps._rsizemap[3737117]["midbanner"] = googletag.sizeMapping().addSize([2000,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([1024,0],[[700,1],[728,90],[970,90],[970,66]]).addSize([768,0],[[700,10],[728,90]]).addSize([0,0],[[700,1],[320,50],[300,50]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.midbanner_3737117'] = {
       sizes:  [[700,1],[728,90],[970,90],[970,66]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-midbanner-3737117'
     };
     gpt.midbanner_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[700,1],[728,90],[970,90],[970,66]],'div-gpt-midbanner-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('mrrobot');
        }

        gpt.midbanner_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.midbanner_3737117'] = mps._resetcatexclusion['gpt.midbanner_3737117'] || [];
          mps._resetcatexclusion['gpt.midbanner_3737117'].push('home');
        }

        gpt.midbanner_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","midbanner")
        .setCollapseEmptyDiv(true);
gpt.midbanner_3737117.defineSizeMapping(mps._rsizemap[3737117]["midbanner"]);
gpt.midbanner_3737117.addService(googletag.pubads());

        // ADSLOT: logosponsor [logosponsor]
mps._rsizemap[3737117]["logosponsor"] = googletag.sizeMapping().addSize([2000,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([1024,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([768,0],[[1428,592],[282,50],[140,70],[200,60]]).addSize([0,0],[[428,320],[282,50],[140,70],[200,60]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.logosponsor_3737117'] = {
       sizes:  [[1428,592],[282,50],[140,70],[200,60]],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-logosponsor-3737117'
     };
     gpt.logosponsor_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[[1428,592],[282,50],[140,70],[200,60]],'div-gpt-logosponsor-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('mrrobot');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.logosponsor_3737117'] = mps._resetcatexclusion['gpt.logosponsor_3737117'] || [];
          mps._resetcatexclusion['gpt.logosponsor_3737117'].push('home');
        }

        gpt.logosponsor_3737117.setCategoryExclusion("home")
        .setTargeting("promoid","")
        .setTargeting("logotype","")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","logosponsor")
        .setCollapseEmptyDiv(true,true);
gpt.logosponsor_3737117.defineSizeMapping(mps._rsizemap[3737117]["logosponsor"]);
gpt.logosponsor_3737117.addService(googletag.pubads());

        // ADSLOT: galleryadrepeat [galleryadrepeat]
mps._rsizemap[3737117]["galleryadrepeat"] = googletag.sizeMapping().addSize([2000,0],[[1920,1080]]).addSize([1024,0],[[1920,1080]]).addSize([768,0],[[1920,1080]]).addSize([0,0],[[820,920]]).build();
     if(mps._loadset === 0) {
        if(mps.lazyload && mps.lazyload[0]) {
          mps._lazyloadmap = mps._clone(mps.lazyload[0]);
        }
     }
     mps._resetrsizemap = mps._clone(mps._rsizemap[3737117]);
     mps._gptTargeting[mps._loadset]['gpt.galleryadrepeat_3737117'] = {
       sizes:  [1920,1080],
       gptid:  '/2620/nbcu.usa/mrrobot/home',
       gptdiv: 'div-gpt-galleryadrepeat-3737117'
     };
     gpt.galleryadrepeat_3737117=googletag.defineSlot(mps._setAdId('/2620/nbcu.usa/mrrobot/home'),[1920,1080],'div-gpt-galleryadrepeat-3737117')

        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('mrrobot');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("mrrobot")
        ;
        if(mps._loadset === 0) {
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.galleryadrepeat_3737117'].push('home');
        }

        gpt.galleryadrepeat_3737117.setCategoryExclusion("home")
        .setTargeting("site","usa")
        .setTargeting("pageid","X91008712248")
        .setTargeting("cont","tv_show")
        .setTargeting("sect","mrrobot")
        .setTargeting("sub","home")
        .setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"])
        .setTargeting("pos","galleryadrepeat")
        .setCollapseEmptyDiv(false);
gpt.galleryadrepeat_3737117.defineSizeMapping(mps._rsizemap[3737117]["galleryadrepeat"]);
gpt.galleryadrepeat_3737117.addService(googletag.pubads());
      // slot: Out Of Page

      gpt.outofpage_3737117=googletag.defineOutOfPageSlot(mps._setAdId("/2620/nbcu.usa/mrrobot/home"), "div-gpt-outofpage-3737117");
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'] = {};
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptid = "/2620/nbcu.usa/mrrobot/home";
        mps._gptTargeting[mps._loadset]['gpt.outofpage_3737117'].gptdiv = "div-gpt-outofpage-3737117";

        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('mrrobot');
        }
      gpt.outofpage_3737117.setCategoryExclusion("mrrobot");
        if (mps._loadset === 0) {
          mps._resetcatexclusion['gpt.outofpage_3737117'] = mps._resetcatexclusion['gpt.galleryadrepeat_3737117'] || [];
          mps._resetcatexclusion['gpt.outofpage_3737117'].push('home');
        }
      gpt.outofpage_3737117.setCategoryExclusion("home");
      gpt.outofpage_3737117.setTargeting("site","usa");
      gpt.outofpage_3737117.setTargeting("pageid","X91008712248");
      gpt.outofpage_3737117.setTargeting("cont","tv_show");
      gpt.outofpage_3737117.setTargeting("sect","mrrobot");
      gpt.outofpage_3737117.setTargeting("sub","home");
      gpt.outofpage_3737117.setTargeting("tag",["mrrobotfullbleedenhancede","mrrobotshowcardpromocast"]);
      gpt.outofpage_3737117.setTargeting("pos","_oop").addService(googletag.pubads());

      // SlotRenderEnded Event
      if(mps._loadset === 0) {
        googletag.pubads().addEventListener('slotRenderEnded',function(eo){
          if(typeof(mps._adloadCallback)=='function') {
            googletag.cmd.push( function() {
              mps._adloadCallback(eo, mps._loadset);
            });
          }
        });

        // Ad impression view.
        googletag.pubads().addEventListener('impressionViewable',function(eo){
          if(typeof(mps._adViewCallback)=='function') {
              googletag.cmd.push( function() {
                  mps._adViewCallback(eo);
              });
          }
        });
      }

      //• Targeting Injection
      if(typeof(mps._dtparamsappend)=='string' && mps._dtparamsappend.length > 0) {
        mps._dtparamsappend = mps._trim(mps._dtparamsappend,' ;')+';'.replace(';;',';');
        var __dtp = mps._trim(mps._dtparamsappend,'; ').split(';');
        for(var dk in __dtp) {
          dtparr = __dtp[dk].split('=');
          if(dtparr.length===2 && dtparr[0].length>0 && dtparr[1].length>0) {
            mps._setPageTargeting(dtparr[0], dtparr[1]);
          }
        }
      }
      if(typeof(__nbcudigitaladops_inject) == 'object' && typeof(__nbcudigitaladops_inject.getGPT) == 'function'){
        mps._debug('[mps:GPT] Set pixelman targeting.');
        var _GPT_params = __nbcudigitaladops_inject.getGPT();
        for(var _key in _GPT_params){
          if(_GPT_params.hasOwnProperty(_key)){
            mps._setPageTargeting(_key, _GPT_params[_key]);
          }
        }
      }

      //• DFP Publisher Service Initialization
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
        }); }
      //• MPS Ad References
      mps.adslots={}; mps.advars={}; mps._advarprefix = 'gpt'||{}; mps.responsiveslots=mps.responsiveslots||{}; mps.responsiveslots[mps._loadset]={};
      mps.adslots.topbanner = 'div-gpt-topbanner-3737117';
      mps.advars.topbanner = 'topbanner_3737117';
        mps.responsiveslots[mps._loadset]["topbanner"] = {"full":[[728,90],[970,90],[970,66],[1400,600]],"tabletwide":[[728,90],[970,90],[970,66],[1400,600]],"tablet":[[728,90]],"0":[[320,50],[300,50]]};
      mps.adslots.topbox = 'div-gpt-topbox-3737117';
      mps.advars.topbox = 'topbox_3737117';
        mps.responsiveslots[mps._loadset]["topbox"] = {"full":[[300,250]],"tabletwide":[[300,250]],"0":["NONE"]};
      mps.adslots.showcardad = 'div-gpt-showcardad-3737117';
      mps.advars.showcardad = 'showcardad_3737117';
      mps.adslots.midbanner = 'div-gpt-midbanner-3737117';
      mps.advars.midbanner = 'midbanner_3737117';
        mps.responsiveslots[mps._loadset]["midbanner"] = {"full":[[700,1],[728,90],[970,90],[970,66]],"tabletwide":[[700,1],[728,90],[970,90],[970,66]],"tablet":[[700,10],[728,90]],"0":[[700,1],[320,50],[300,50]]};
      mps.adslots.logosponsor = 'div-gpt-logosponsor-3737117';
      mps.advars.logosponsor = 'logosponsor_3737117';
        mps.responsiveslots[mps._loadset]["logosponsor"] = {"full":[[1428,592],[282,50],[140,70],[200,60]],"tabletwide":[[1428,592],[282,50],[140,70],[200,60]],"tablet":[[1428,592],[282,50],[140,70],[200,60]],"0":[[428,320],[282,50],[140,70],[200,60]]};
      mps.adslots.galleryadrepeat = 'div-gpt-galleryadrepeat-3737117';
      mps.advars.galleryadrepeat = 'galleryadrepeat_3737117';
        mps.responsiveslots[mps._loadset]["galleryadrepeat"] = {"full":[[1920,1080]],"tabletwide":[[1920,1080]],"tablet":[[1920,1080]],"0":[[820,920]]};
      mps.advars._oop = 'outofpage_3737117';
      mps.adslots._oop = 'div-gpt-outofpage-3737117';
    // update adslots & advars
    mps.adobs = [];
    mps._adslots[mps._loadset] = mps.adslots;
    mps._advars[mps._loadset] = mps.advars;


    // not serverside
    if(typeof mpscall != 'undefined' && typeof(mpscall.path) != 'undefined') {
      googletag.cmd.push(function () {
        // Check if page context exists.
        if(typeof(mps._loadset) === 'undefined' || mps._loadset === 0 || mps._pagecontextKey() === false) {
          var _pagecontextlen = mps._keys(mps._pagecontext).length;
          var _pagecontextindex = (typeof(_pagecontextlen) === 'number' && _pagecontextlen > 0) ? _pagecontextlen : 0;
          var _pagecontext = mpscall.path;
          // New page context.
          mps._pagecontext[_pagecontextindex] = {
            mpscall: mps._clone(mpscall),
            loadsets: [mps._loadset],
            targeting: {},
            mpsid: 3737117,
            adunits: typeof(mps.response.dart.adunits) === 'object' ? mps.response.dart.adunits : null,
            gpt: mps._clone(mps._gptTargeting[mps._loadset])
          };
          if(!mps._loadset) {
            mps._pagecontext[_pagecontextindex].pagevars = mps.response.pagevars;
          }
          for (var i in mps.advars) {
            mps._pagecontext[_pagecontextindex]['targeting'][i] = mps._resetTargetingObj(gpt[mps.advars[i]].getTargetingMap());
          }
        }
      });
    }
      if(mps._gptrefresh) {
      googletag.cmd.push(function() {
        mps._gptloadCallback();
      });
    }
      </script><script>mps.adunits={"Top Banner":"topbanner","Box Ad":"topbox","Show Card Ad":"showcardad","Mid Banner":"midbanner","Logo Sponsor":"logosponsor","Top Banner HP":"topbanner","Gallery Ad Repeat":"galleryadrepeat","Watchwith In Program":"inprogram","Bottom Banner":"bottombanner","Top 3 Logo":"topthreelogo","No Ads":"noads","Box Ad 2":"topbox"};</script><script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script><script>var mps=mps||{},mpsopts=mpsopts||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

var mps = mps || {};
var debugmode = debugmode || {};
mpsopts.multiplyrefresh = mpsopts.multiplyrefresh||false;
if(typeof(debugmode.log)=='undefined'||typeof(window.console)!='object')debugmode.log=0;
mps._elapsed = (typeof(mps._elapsed)=='function') ? mps._elapsed  : function(){return ''};
mps.__refreshing = false;
mps.refreshDetect = function(slotname, loadset) {
  if((typeof loadset != 'undefined' || typeof loadset === 'number') && typeof slotname != 'object') {
    var slotElem = document.getElementById(mps._slotscalled[loadset][slotname]);
    var lazyLoadEnabled=mps.lazyload[loadset].adslots.indexOf(slotname) > -1;
    var slotElemName = slotname;
    var cleanslot = (slotname.indexOf('-C') > -1) ? slotname.split('-C')[0] : slotname;
    var isclone = (slotname.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = ((mps.lazyload[loadset].adslots.indexOf(cleanslot) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotname) > -1));
  } else {
    var slotElemId = slotname.getSlotElementId();
    var slotElem = document.getElementById(slotElemId);
    var slotElemName = slotElem.dataset?slotElem.dataset.mpsSlot:slotElem.getAttribute('data-mps-slot');
    if(!slotElem)  { return false }
    var loadset = slotElem.dataset?parseInt(slotElem.dataset.mpsLoadset):parseInt(slotElem.getAttribute('data-mps-loadset'));
    var isclone = (slotElemName.indexOf('-C') > -1) ? true : false;
    var lazyLoadEnabled = (mps.lazyload[loadset] && mps.lazyload[loadset].adslots.indexOf(slotElemName) > -1) || (isclone && mps.lazyloadclone[loadset] && mps.lazyloadclone[loadset].indexOf(slotElemName) > -1);
    slotname=slotElemName;
    if(typeof loadset !== 'number') {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' loadset could not be determined.');
      return false;
    }
    var lazyLoadEnabled=false;
    for(var i in mps.lazyload) {
      if(mps.lazyload[i].adslots.indexOf(slotElemName) > -1) {
        lazyLoadEnabled=true;
        break;
      }
    }
  }
  if(lazyLoadEnabled && slotElem != null && !mps._detect.viewport(slotElem)) {
    if(mps._adloads && mps._adloads[loadset] && mps._adloads[loadset][slotElemName]) {
      mps._debug('[mps:Refresh] ' + slotElemName + ' isn\'t in the viewport, pushing to mps._detect._refresh queue: '+mps._slotscalled[loadset][slotElemName]);
      mps._detect._refresh[loadset]  = mps._detect._refresh[loadset]||{};
      mps._detect._refresh[loadset][slotElemName] = mps._slotscalled[loadset][slotElemName];
    } else {
      mps._debug('[mps:Refresh] Slot ' + slotname + ' is not yet loaded, ad will not be refreshed or queued.');
    }
    return false;
  }
  return true;
};

mps.refreshClone = function(adob, timer, gptopts) {
  var _adob = adob;
  var _timer = timer;
  setTimeout(function() {
    //mps._correlator.update();
    googletag.cmd.push(function() {
      googletag.pubads().refresh([_adob], gptopts);
    });
  }, _timer);
};

mps.refreshAds = function (slotname,loadset,changecorrelator,_skipresponsive,_interval) {
  if(typeof changecorrelator == 'undefined') changecorrelator = mpsopts.updatecorrelator;
  var _set = _set+1 || 0, totalAds = [], loadcount= 0, numOfAds=0;
  mps._delays.refreshads = mps._delays.refreshads||1500;
  //changecorrelator = changecorrelator || 1;
  if(_interval) clearInterval(_interval);
  if(mps.__refreshing) {
    _interval = setInterval(function(){
      mps.refreshAds(slotname,loadset,changecorrelator,_skipresponsive,_interval);
      return false;
    },mps._delays.refreshads);
    return false;
  }
  mps.__refreshing = true;
  !_skipresponsive && mps.responsiveApply && mps.responsiveApply(true);
  var _oopExec = function(loadset) {
    if(mps.loadrails && mps.removeRails) mps.removeRails(loadset);
    mps._debug('[mps:Refresh] w/ OOP Slot');
  };

  // Build Refresh Object
  if(slotname === false) return false;
  if((!window.googletag || !googletag.apiReady) || typeof(mps.pagevars.dart_mode) == "undefined" || mps.pagevars.dart_mode != "gpt-asynchronous") {
    mps._log("[mps:Refresh] FAILED refreshAds: Not GPT Asynchronous");
    return false;
  } else {
    if(typeof(slotname) == 'string' && slotname.length > 0) slotname = [slotname];
    if(typeof(slotname) == 'object' && typeof(slotname.getName)=='function') slotname = [slotname];
    var slotvar, slotvars=[], _slotvars={}, gptopts={};
    if(typeof(slotname) != 'object') {
      slotvars = '';
    } else {
      if (slotname.length < 1) {
        mps._delays.refreshads = 0;
      }
      for (var i in slotname) {
        // Refresh all clones, per loadset
        for (var ls in mps._advars) {
          var _ls = (typeof loadset != 'undefined') ? parseInt(loadset) : ls;
          for (var cs=0; cs<mps._keys(mps._advars[_ls]).length; cs++) {
            if (typeof(slotname[i])== 'string'  && mps._keys(mps._advars[_ls])[cs].indexOf(slotname[i] + '-C') > -1) {
              var _loadset = (typeof loadset != 'undefined' && typeof parseInt(loadset) == 'number') ? '_' : _ls;
              _slotvars[_loadset] = _slotvars[_loadset] || [];
              clonevar = (typeof(slotname[i]) == 'object') ? slotname[i] : mps.getSlot(mps._keys(mps._advars[_ls])[cs], _ls);
              if (typeof(clonevar) == 'object' && !mps._slotsdisabled[_ls][slotname[i]]) {
                if (!mps.lazyload) {
                  slotvars.push(clonevar);
                  _slotvars[_loadset].push(clonevar);
                } else {
                  if (mps.refreshDetect(mps._keys(mps._advars[_ls])[cs], _ls)) {
                    slotvars.push(clonevar);
                    _slotvars[_loadset].push(clonevar);
                  }
                }
              }
            }
          }
          if(typeof loadset != 'undefined'){ mps._debug('[mps:Refresh] Break loop on loadset: '+loadset); break; }
        }
        // Refresh by slot object ALL loadsets
        if (typeof loadset == 'undefined') {
          for(aok in mps._adobs) {
            _slotvars[aok] = _slotvars[aok]||[];
            if(slotname[i]=='_oop') _oopExec(aok);
            slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],aok);
            if(typeof(slotvar)=='object' && !mps._slotsdisabled[aok][slotname[i]]) {
              if(!mps.lazyload) {
                slotvars.push(slotvar);
                _slotvars[aok].push(slotvar);
              } else {
                if(mps.refreshDetect(slotname[i],aok)) {
                  slotvars.push(slotvar);
                  _slotvars[aok].push(slotvar);
                }
              }
            }
          }
        } else {
          var numOfAds = slotname.length;
          mps._delays.refreshads = (mpsopts.multiplyrefresh && (numOfAds > 0) && (300 * numOfAds) <= 1800) ? (300 * numOfAds) : 1500;
          if(slotname[i]=='_oop') _oopExec((loadset==undefined)?loadset:null);
          _slotvars['_'] = _slotvars['_']||[];
          slotvar = (typeof(slotname[i])=='object') ? slotname[i] : mps.getSlot(slotname[i],loadset);
          if(typeof(slotvar)=='object') {
            if(!mps.lazyload) {
              slotvars.push(slotvar);
              _slotvars['_'].push(slotvar);
            } else {
              if(mps.refreshDetect(slotname[i],loadset)) {
                slotvars.push(slotvar);
                _slotvars['_'].push(slotvar);
              }
            }
          }
        }
      }
      if (mps.lazyload && !slotvars.length) {
        mps.__refreshing = false;
        return false;
      }
    }
    // No Slot Param - Refresh All
    if(typeof(slotname) != 'object' || slotvars === '') {
      _slotvars = [];
      mps._debug('[mps:Refresh] Refreshing [ALL] ad slots on page or in loadset: '+loadset);
      for(lsk in mps._slotscalled) { // loadset
        if(typeof loadset != 'undefined' && lsk != loadset) continue;
        _slotvars[lsk] = [];
        for(ask in mps._slotscalled[lsk]) { //slot
          if(!mps._slotsdisabled[lsk][ask] && mps._advars[lsk][ask] && gpt[mps._advars[lsk][ask]]) {
            if(ask=='_oop') _oopExec(lsk);
            if(!mps.lazyload || (typeof(mps.lazyload[lsk]) === 'undefined')) {
              _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
            } else {
              // All Ads ie.  'topbanner' and 'topbanner-C1'
              var askclean = (ask.indexOf('-C') > -1) ? ask.split('-C')[0] : ask;
              mps._detect._refresh[lsk] = mps._detect._refresh[lsk] || {};
              if(ask !== '_oop' &&  (mps.lazyload[lsk] && mps.lazyload[lsk].adslots.indexOf(askclean) > -1) || (mps.lazyloadclone[lsk] && mps.lazyloadclone[lsk].indexOf(ask) > -1))  {
                var _slotElem = document.getElementById(mps._slotscalled[lsk][ask]);
                if(mps._detect.viewport(_slotElem)) {
                  _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
                } else {
                  mps._detect._refresh[lsk][ask] = mps._detect._refresh[lsk][ask] || '';
                  mps._detect._refresh[lsk][ask] = mps._slotscalled[lsk][ask];
                }
              }else{
                _slotvars[lsk].push(gpt[mps._advars[lsk][ask]]);
              }
            }
          }
        }
      }
    }
    // Validate Refresh Set
    var keys = mps._keys(_slotvars);
    if((typeof(slotvars)=='object' && !keys.length) || !keys.length) {
      mps._log("[mps:Refresh] FAILED refreshAds: No ads to refresh");
      return false;
    }

    if(!changecorrelator || mps._bool(mpsopts.updatecorrelator) === false) {
      mps._debug('[mps:Refresh] Setting no correlator change');
      gptopts.changeCorrelator=false;
    } else {
      gptopts.changeCorrelator=true;
    }
    var _execute = function(svk,_slotvars,_set, clone) {
      setTimeout(function() {
        var _clonedslotvars = [], _updatedslotvars = [];
        mps._debug('[mps:Refresh] Execute Refresh ('+svk+') delay:'+_set*mps._delays.refreshads+' : '+mps._elapsed());//DEBUG
        if(!gptopts.changeCorrelator) {
          _updatedslotvars = _slotvars[_set];
        } else {
          // Remove cloned ads, queue.
          for(var i = 0; i < _slotvars[svk].length; i += 1) {
            var _id = _slotvars[svk][i].getSlotElementId();
            if(_id.indexOf('-C') === -1) {
              _updatedslotvars.push(_slotvars[svk][i]);
            } else {
              _clonedslotvars.push( _slotvars[svk][i]);
            }
          }
        }
        // Refresh ads in loadset.
        googletag.cmd.push(function() { googletag.pubads().refresh(_updatedslotvars, gptopts); });
        // Refresh cloned ads with new correlators.
        googletag.cmd.push(function() {
          for(var j = 0; j < _clonedslotvars.length; j += 1) {
            mps.refreshClone(_clonedslotvars[j], (j + 1) * 500, gptopts);
          }
        });
      }, _set*mps._delays.refreshads); // delay execution between sets (gpt limitation)
    };
    if(typeof(mps.__refreshed[mps._loadset])!='object') mps.__refreshed[mps._loadset] = [];
    mps.__refreshed[mps._loadset].push(_slotvars);
    for(var svk in _slotvars) {
      if(svk == 0) _set=0;
      else _set=+1;
      if(typeof loadset != 'undefined') _set = loadset;
      _execute(svk,_slotvars,_set);
    }
    setTimeout(function(){
      mps._queue.render('refreshads', _slotvars);
      if(typeof(mps.refreshAdsCallback)=='function') {
        mps._debug('[mps:Refresh] mps.refreshAdsCallback delay: '+mps._delays.refreshads*(_set+1)+'ms'+' : '+mps._elapsed());
        mps.refreshAdsCallback(_slotvars);
      }
      mps.__refreshing = false;
    },mps._delays.refreshads*(_set+1));
    return true;
  }
};

mps.refreshAdsInterval = function (intervalsecs,slotname,loadset,intervalkey) {
  if(slotname === false) return false;
  mps.refreshintervals = mps.refreshintervals || {};
  var intervalkey = intervalkey || (mps._keys(mps.refreshintervals).length + 1);
  if(intervalsecs > 0) {
    mps._debug('[mps:Refresh] Set ad refresh interval for '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) [interval key: '+intervalkey+']');
    mps.refreshintervals[intervalkey] = setInterval(function(){mps._debug('[mps:Refresh] Reached '+intervalsecs+'s ('+intervalsecs*1000 + 'ms) interval - Refreshing ad slots [interval key: '+intervalkey+']');
          // Detected display active refresh enabled.
          if(mps._detect && mps._detect.activerefresh) {
            // Check if window has focus.
            if(mps._detect._focus) {
              mps._debug("[mps:Refresh]: window has focus, refresh ads.");
              mps.refreshAds(slotname,loadset);
            } else {
              mps._debug("[mps:Refresh]: window doesn't have focus, don't refresh ads.");
            }
          } else {
            mps.refreshAds(slotname,loadset);
          }
        },
        intervalsecs*1000);
    return intervalkey;
  }
};

mps.removeRefreshAdsInterval = function (intervalkey) {
  mps.refreshintervals = mps.refreshintervals || {};
  if(typeof(mps.refreshintervals) != 'object' || (mps._keys(mps.refreshintervals).length) < 1) {
    mps._debug('[mps:Refresh] There are no intervals to remove.');
    return false;
  }
  // If no key is passed, remove all refresh intervals
  if(typeof(intervalkey) != 'string' && typeof(intervalkey) != 'number') {
    for (rik in mps.refreshintervals) {
      clearInterval(mps.refreshintervals[rik]);
      delete mps.refreshintervals[rik];
      mps._debug('[mps:Refresh]  Removed interval [interval key: '+rik+']');
    }
  } else {
    if(typeof(mps.refreshintervals[intervalkey]) != 'undefined') {
      clearInterval(mps.refreshintervals[intervalkey]);
      delete mps.refreshintervals[intervalkey];
      mps._debug('[mps:Refresh] Removed interval [interval key: '+intervalkey+']');
    } else {
      mps._debug('[mps:Refresh] No matching interval found [interval key: '+intervalkey+']');
    }
  }
  return mps.refreshintervals;
};

mps._debug('[mps/JS] LOADED: Refresh');</script>
<script>var mps=mps||{},debugmode=debugmode||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

mps.loadrails = mps.loadrails || 0;
mps._loadrails = mps._loadrails || 0;

//--[setRails] Ad triggered unified handler for rails/skins/fishtanks
if(typeof(mps.setRails)!='function'){
  mps.setRails = function (railvars) {
    mps.railvars = mps.railvars || {};
    mps._prerailstate = mps._prerailstate || {};
    mps._debug('[mps:Rails] CALLED mps.setRails() '+mps._elapsed());
    top.railvars = railvars;
    if(typeof(railvars)!='object' || typeof(railvars.railAdBg)!='string' || (typeof(mps.disableRails)!='undefined' && mps.disableRails==0)) {
      mps._debug('[mps:Rails] setRails Failed (undefined railvars, disabled rails or invalid selector)');
      return false;
    } else {
      mps._debug('[mps:Rails] TRIGGER mps.setRails() '+mps._elapsed());
      var _loadrails = mps._loadrails+1;
      // Merge mps.railvarsOverride (if defined)
      if(typeof(mps.railvarsOverride)=='object' && typeof(mps._merge)=='function') {
        mps._debug('[mps:Rails] OVERRIDE Merge (railvars + mps.railvarsOverride)');
        railvars = mps._merge(railvars,mps.railvarsOverride);
      }
      // Determine rails mode
      railvars.railClassicWidth = parseInt(railvars.railClassicWidth);
      // On rails mode allow settings from mps.pagevars.rails
      if(railvars.railClassicWidth && typeof(mps.pagevars.rails)=='object') {
        if(mps.pagevars.rails.target) railvars.railTarget = mps.pagevars.rails.target;
        if(mps.pagevars.rails.offset) railvars.railOffsetTop = mps.pagevars.rails.offset;
        if(mps.pagevars.rails.offsetdynamic) railvars.offsetDynamic = mps.pagevars.rails.offsetdynamic;
        mps._debug('[mps:Rails] USING mps.pagevars.rails '+JSON.stringify(mps.pagevars.rails));
      }
      railvars.railAdBgColor = mps._trim(railvars.railAdBgColor,'#');
      if(railvars.railAdBgColor) railvars.railAdBgColor = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(railvars.railAdBgColor) ? '#'+railvars.railAdBgColor : '';
      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);

      railvars._target = (typeof railvars.railTarget =='string' && railvars.railTarget.length > 1) ? railvars.railTarget : 'body';
      railvars._selector = mps._select(railvars._target);
      mps._ready(function(){
        if(typeof(railvars._selector)!='object') {
          mps._debug('[mps:Rails] FAILED setRails missing selector: '+railvars._target);
          return false;
        } else {
          // If mps-has-rails class exists return false.
          if(mps._classHas(railvars._selector, 'mps-has-rails')){
            mps._debug('[mps:Rails] SKIP setRails (target already set)');
            return false;
          }
          // Execute Rails (selector and railvars available)
          railvars._selector.className = railvars._selector.className + " mps-rails-" + _loadrails;
          mps._prs = (railvars.railClassicWidth) ? mps._select('body') : railvars._selector;
          if(!mps._prerailstate[_loadrails]) {
            mps._prerailstate[_loadrails] = {"background":mps._prs.style.background,"backgroundImage":mps._prs.style.backgroundImage,"backgroundAttachment":mps._prs.style.backgroundAttachment,"backgroundPosition":mps._prs.style.backgroundPosition,"backgroundColor":mps._prs.style.backgroundColor,"backgroundRepeat":mps._prs.style.backgroundRepeat,"backgroundSize":mps._prs.style.backgroundSize,"height":mps._prs.style.height,"width":mps._prs.style.width,"margin":mps._prs.style.margin,"padding":mps._prs.style.padding,"cursor":mps._prs.style.cursor};
          }
          if(!railvars.railClassicWidth) { //--EXECUTE: Skins & Fishtanks
            railvars._type = 'skin';
            railvars.railContainer = (Math.floor(railvars.railContainer) > 0) ? Math.floor(railvars.railContainer) : false;
            if(Math.floor(railvars.railParallax)==1) {
              railvars.railAdBgAttachment = 'fixed';
              railvars._type = 'fishtank';
            }
            if(railvars.railAdBgAttachment == 'fixed' && mps._checkua().mobile) {
              railvars.railAdBgAttachment = 'scroll';
              railvars._selector.style.backgroundSize = '100%';
            }
            if(railvars.railAdBg) {
              railvars._selector.style.backgroundImage = 'url('+railvars.railAdBg+')';
              railvars._selector.style.backgroundPosition = 'top center';
            }
            railvars._selector.style.backgroundAttachment = (railvars.railAdBgAttachment) ? railvars.railAdBgAttachment : 'fixed';
            railvars._selector.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : '';
            railvars._selector.style.backgroundSize = (railvars.railAdBgSize) ? railvars.railAdBgSize : '';
            if(railvars.railAdBgColor) railvars._selector.style.backgroundColor = railvars.railAdBgColor;
            if(railvars.railAdBgRepeat) railvars._selector.style.backgroundRepeat = railvars.railAdBgRepeat;
            if(railvars.railAdBgClickthru) {
              if(railvars._target == 'body') {
                railvars._type = 'rails1';
              } else {
                railvars._selector.style.cursor = 'pointer';
              }

              if (railvars._selector.addEventListener) {
                railvars._selector.addEventListener('click', mps._railsClick, false);
              } else {
                railvars._selector.attachEvent('onclick', mps._railsClick);
              }
            }
            if(railvars._target == 'body') {
              railvars._bodytarget = (typeof(railvars._bodytarget)=='string') ? railvars._bodytarget : 'mps-slot:first';
              railvars._selector = mps._select(railvars._bodyselector);
              mps._debug('[mps:Rails] OVERRIDE body selector');
            }
            mps._classAdd(railvars._selector,'mps-has-rails');
          } else { //--EXECUTE: New Rails
            railvars._type = 'rails2';
            //get target dimensions and create divs
            var contentDiv = railvars._selector.getBoundingClientRect(),
                contentWidth = contentDiv.width,
                contentHeight = contentDiv.height,
                adWidth = parseInt(railvars.railClassicWidth),
                railsAdWrapper = document.createElement('div'),
                leftAdContainer = document.createElement('div'),
                rightAdContainer = document.createElement('div'),
                creativeBg = new Image();
            // append railsAdWrapper to body
            if(mps._checkua().oldie && mps._checkua().oldie <=8) {
              var ieWidth = railvars._selector.currentStyle['width'];
              ieWidth = ieWidth.replace('px', '');
              contentWidth = parseInt(ieWidth);
            }

            // If creative + content well < viewport skip setRails
            var railVarsForce = railvars.railForceSet&&railvars.railForceSet==1;
            var pagevarsForce = mps.pagevars.rails&&mps.pagevars.rails.forceset&&mps.pagevars.rails.forceset==1;
            if(mps._viewport()[0] < (adWidth * 2 + contentWidth) && !railVarsForce && !pagevarsForce) {
              mps._debug('[mps:Rails] SKIP setRails (viewport too small)');
              return false;
            }


            document.body.insertBefore(railsAdWrapper, document.body.childNodes[0]);
            mps._classAdd(railvars._selector,'mps-has-rails');
            mps._classAdd(railsAdWrapper,'rails-ad-wrapper mps-has-rails');
            mps._classAdd(leftAdContainer,'mps-rails-left');
            mps._classAdd(rightAdContainer,'mps-rails-right');
            railsAdWrapper.appendChild(leftAdContainer);
            railsAdWrapper.appendChild(rightAdContainer);
            // Set background style properties
            if(railvars.railAdBg) {
              creativeBg.src = railvars.railAdBg;
              creativeBg.height = (creativeBg.height > 0) ? creativeBg.height : 720;
              if(railvars.railAdBgColor){
                var _bodyselect =  mps._select('body');
                _bodyselect.style.background = 'none';
                _bodyselect.style.backgroundImage = 'none';
                _bodyselect.style.backgroundColor = railvars.railAdBgColor;
                leftAdContainer.style.backgroundColor = railvars.railAdBgColor;
                rightAdContainer.style.backgroundColor = railvars.railAdBgColor;
              }
              if(railvars.railAdBgRepeat){
                leftAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
                rightAdContainer.style.backgroundRepeat = railvars.railAdBgRepeat;
              }
              leftAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top left';
              rightAdContainer.style.backgroundPosition = (railvars.railAdBgPosition) ? railvars.railAdBgPosition : 'top right';
              if(adWidth > 0 && contentWidth > 0){
                leftAdContainer.style.left = contentWidth - adWidth + 'px';
                rightAdContainer.style.left = contentWidth + 'px';
                leftAdContainer.style.width = adWidth + 'px';
                rightAdContainer.style.width = adWidth + 'px';
                mps._select('.rails-ad-wrapper').style.width = contentWidth +'px';
              }
              var offSetTop = railvars.railOffsetTop ? Math.floor(railvars.railOffsetTop) : 0;
              rightAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.height = creativeBg.height+ 'px';
              leftAdContainer.style.position = 'fixed';
              rightAdContainer.style.position = 'fixed';
              leftAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              rightAdContainer.style.zIndex = (railvars.railZindex) ? railvars.railZindex : 4999;
              leftAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              rightAdContainer.style.backgroundImage = 'url('+railvars.railAdBg+')';
              leftAdContainer.style.top = offSetTop + 'px';
              rightAdContainer.style.top = offSetTop + 'px';
              function shiftViewport() {
                // Update container div coordinates.
                var updatedWidth = railvars._selector.clientWidth;
                var updatedLeft = railvars._selector.getBoundingClientRect().left;
                // False = change top offset until X pixels, true = always fixed.
                if(!railvars.offsetDynamic) {
                  if(mps._checkua().oldie && mps._checkua().oldie <=8) {
                    var pageYOffSet = window.document.documentElement.scrollTop;
                  } else {
                    var pageYOffSet = window.pageYOffset;
                  }
                  if(pageYOffSet <= offSetTop) {
                    leftAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                    rightAdContainer.style.top = offSetTop - pageYOffSet + 'px';
                  } else {
                    leftAdContainer.style.top = '0px';
                    rightAdContainer.style.top = '0px';
                  }
                }
                var leftAdContainerX = updatedLeft - adWidth;
                var rightAdContainerX = updatedWidth + updatedLeft;
                leftAdContainer.style.left = leftAdContainerX + 'px';
                rightAdContainer.style.left = rightAdContainerX + 'px';
              }
              shiftViewport();
            }
            if(railvars.railAdBgClickthru) {
              leftAdContainer.style.cursor = 'pointer';
              rightAdContainer.style.cursor = 'pointer';
              if (leftAdContainer.addEventListener) {
                leftAdContainer.addEventListener('click', mps._railsClick, false);
                rightAdContainer.addEventListener('click', mps._railsClick, false);
              } else {
                leftAdContainer.attachEvent('onclick', mps._railsClick);
                rightAdContainer.attachEvent('onclick', mps._railsClick);
              }
            }
            mps._debug('[mps:Rails] EXECUTED mps.setRails() '+mps._elapsed());
            // scroll rail ads with window scroll and window resize
            if(leftAdContainer && rightAdContainer){
              if(!mps._checkua().mobile){
                window.onscroll = shiftViewport;
                window.onresize = shiftViewport;
              }
            }
          }

          // Save railvars and trigger callback
          mps.railvars[_loadrails] = railvars;
          mps._loadrails = _loadrails;
          if(typeof(top.mps._setRailsCallback)=='function') {
            if(typeof(top.mps)!='undefined' && typeof(top.mps._setRailsCallback)=='function') {
              delayms = 200;
              mps._debug('[mps:Rails] TRIGGER setRailsCallback [delayed: '+delayms+'ms]');
              googletag.cmd.push(function() {
                setTimeout(function(){ top.mps._setRailsCallback(mps.railvars[_loadrails]); },delayms);
              });
            }
          }
          mps.loadrails++;
          mps._debug('[mps:Rails] EXECUTED setRails() '+mps._elapsed());
        }

      });
    }

    return mps.loadrails;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.setRails function');
}

// rails callback function for skins and fishtank only
mps._setRailsCallback = function(railvars) {
  if (railvars._type !== 'rails2' && typeof(railvars) === 'object' && typeof(railvars._selector) === 'object' && railvars.railContainer > 0) {
    var PADBOTTOM = 15;
    if(!mps._checkua().oldie && !mps._checkua().oldie <= 8) {
      var currentPadTop = parseInt(window.getComputedStyle(railvars._selector, null).paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(window.getComputedStyle(railvars._selector, null).paddingBottom.replace('px', ''), 10);
    } else {
      var currentPadTop = parseInt(railvars._selector.currentStyle.paddingTop.replace('px', ''), 10);
      var currentPadBottom = parseInt(railvars._selector.currentStyle.paddingBottom.replace('px', ''), 10);
    }
    var currheight = parseInt(railvars._selector.clientHeight, 10) >= 0 ? parseInt(railvars._selector.clientHeight, 10) : parseInt(mps._select(railvars._target).clientHeight, 10);
    var targetheight = parseInt(railvars.railContainer, 10);
    var padtop;
    currheight = (currheight - currentPadTop - currentPadBottom);
    if (targetheight > currheight) {
      if(typeof(mps.getResponsiveSet)=='function' && mps.getResponsiveSet()=='tablet' && Math.floor(railvars.railParallax)!=1) { // not responsive, tablet or fishtank
        railvars._selector.style.padding = (currheight == 90) ? '15px 0' : 0 ;
        railvars._selector.style.backgroundSize = '100%';
      } else {
        var railvarsSkinOffset = (railvars._type === 'skin' && (!railvars.railOffsetBottom||railvars.railOffsetBottom==0) && (!railvars.railOffsetTop||railvars.railOffsetTop==0));
        if(!railvarsSkinOffset) {
          var pad = (targetheight - currheight) / 2;
          var offsetBottom = railvars.railOffsetBottom;
          var offsetTop = railvars.railOffsetTop;
          var offsetBottomSet = offsetBottom && parseInt(offsetBottom) > 0;
          var offsetTopSet = offsetTop && parseInt(offsetTop) > 0;
          padtop = offsetTopSet ? offsetTop : pad;
          PADBOTTOM = offsetBottomSet ? offsetBottom : pad;
          if((offsetTopSet && offsetBottomSet) || (!offsetTopSet && offsetTopSet)) {
            padtop = PADBOTTOM = pad;
          } else {
            // Remove bottom if both set.
            if(offsetTopSet&&offsetBottomSet) {
              offsetBottomSet = 0;
            }
            if(offsetTopSet) {
              PADBOTTOM = (targetheight - currheight) - padtop;
            } else {
              padtop = (targetheight - currheight) - PADBOTTOM;
            }
          }
        } else {
          var pad = (targetheight - currheight) / 2;
          padtop = pad;
          PADBOTTOM = pad;
        }
        mps._debug('[mps:Rails] targetheight: '+targetheight+' currheight:'+currheight+' padtop: '+padtop+' padbottom: '+PADBOTTOM);
        railvars._selector.style.paddingTop = (padtop) + 'px';
        railvars._selector.style.paddingBottom = (PADBOTTOM) + 'px';
      }
    }
    mps._queue.render('setrails', railvars);
    if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
  } else {
    if (railvars._type === 'rails1' || railvars._type === 'rails2') {
      mps._queue.render('setrails', railvars);
      if(typeof mps.setRailsCallback === 'function') mps.setRailsCallback(railvars);
    } else {
      mps._debug('[mps:Rails] setRailsCallback FAILED');
    }
  }
};

//--[removeRails] Revert page to pre-rails/skin/fishtank state.
if(typeof(mps.removeRails)!='function'){
  mps.removeRails = function(loadset) {
    var _iterator = function(railvars) {
          if(typeof(railvars)=='object') {
            for(var rv in railvars){
              if(typeof(railvars.push)=='function') rv = loadset[rv];
              if(typeof(mps.railvars[rv]) == 'object') {
                mps.removeRails(rv);
              }
            }
          }
        },
        loadset = loadset || mps.railvars || {};
    // If object or array is passed, iterate through them
    if(typeof(loadset)=='object') {
      _iterator(loadset);
      return true;
    }
    if(typeof(mps.railvars[loadset])!='object' && typeof(mps.railvars[loadset])!=null) {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): invalid loadset');
      return false;
    }
    mps.railvars[loadset]._selector = (typeof mps.railvars[loadset].railTarget =='string' && mps.railvars[loadset].railTarget.length > 1) ? mps._select(mps.railvars[loadset].railTarget) : mps._select('body');
    // Only execute witb pre-rails state
    if(typeof(mps.railvars[loadset]._selector) == 'object' && typeof(mps._prerailstate[loadset]) == 'object' && mps.loadrails > 0) {
      //if rails2 remove injected divs and body style
      if(mps.railvars[loadset]._type == 'rails2'){
        var railsAdWrap = mps._select('.rails-ad-wrapper');
        railsAdWrap.parentNode.removeChild(railsAdWrap);
      }
      // Restore selector styles
      for(var sbi in mps._prerailstate[loadset]){
        mps._prs = (mps.railvars[loadset].railClassicWidth) ? mps._select('body') : mps.railvars[loadset]._selector;
        mps._prs.style[sbi] = mps._prerailstate[loadset][sbi];
      }
      // Remove event listeners
      mps._eventRemove(mps.railvars[loadset]._selector,'click', mps._railsClick);
      if(typeof(top.mps.removeRailsCallback)=='function') { // Execute page callback (if defined)
        mps._debug('[mps:Rails] TRIGGER removeRailsCallback('+loadset+')');
        top.mps.removeRailsCallback();
      }
      mps.railvars[loadset]._selector.onclick = null;

      // Remove classes
      mps._classRemove(mps.railvars[loadset]._selector,'mps-has-rails');
      mps.loadrails -= 1;
      // Remove from railvars object
      delete mps._prerailstate[loadset];
      delete mps.railvars[loadset];
      mps._debug('[mps:Rails] EXECUTED removeRails('+loadset+')');
    } else {
      mps._debug('[mps:Rails] FAILED removeRails('+loadset+'): missing pre-rails');
      return false;
    }
    return true;
  }
} else {
  mps._debug('[mps:Rails] OVERRIDE: Using custom mps.removeRails function');
}

mps._railsClick = function(e){
  evt = e || window.event;
  if(e.target) targ = e.target;
  else if(e.srcElement) targ = e.srcElement;
  if(targ.nodeType == 3) targ = targ.parentNode; // Safari bug?
  if(mps.railvars[mps._loadrails]._target == 'body') {
    if((typeof targ.className!='undefined') && (targ.className.indexOf('mps-rails-'+mps._loadrails)!=-1)) mps._debug('[mps:Rails] Skipping Click: '+mps.railvars[mps._loadrails].railAdBgClickthru)

  } else {
    window.open(mps.railvars[mps._loadrails].railAdBgClickthru);
  }
}

mps._debug('[mps/JS] LOADED: Rails');
</script>
<script>var mps=mps||{},debugmode=debugmode||{};mps.__prescalestate=mps.__prescalestate||{};debugmode.log&&window.console||(debugmode.log=0);mps._elapsed||(mps._elapsed=function(){return""});

//mps._scaleAd ('topbanner',0.5[optional],0[default=mps._loadset])
mps._scaleAd = function (adslot,forceratio,loadset) {
  mps._debug('[mps.scaleAd]:'+ adslot+', '+forceratio+', '+loadset);
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe');

  var _viewport = mps._viewport && mps._viewport();
  if (typeof aiframe ==='object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);

      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
        mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
          'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');

      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps.scaleAd] /'+adslot+':'+loadset+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
      return true;
    }
  } else {
    mps._debug('[mps.scaleAd] Bypass /'+adslot+':'+loadset+'/ '+mps._elapsed());
    return false;
  }
};

//mps._scaleAdRevert ('topbanner',0[default=mps._loadset])
mps._scaleAdRevert = function (adslot,loadset) {
  var adslot = adslot,
      loadset = (typeof(parseInt(loadset,10) == 'number') && parseInt(loadset,10) < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
      adivgpt = mps._select('#'+mps._adslots[loadset][adslot]),
      aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
     _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot] || {};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate[loadset])=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|\s)mps-has-scaled(?!\S)/ , '' );
    mps.__prescalestate[loadset]=mps.__prescalestate[loadset][adslot]={}; // clear old __prescalestate
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscaled '+mps._elapsed());
    return true;
  } else {
    mps._debug('[mps.scaleAdRevert] /'+adslot+':'+loadset+'/ Unscale FAILED '+mps._elapsed());
    return false;
  }
};


mps._scaleAdAsync = function (adslot,forceratio,loadset) {
  if (typeof(adslot) != 'string') return false;
    var loadset = (typeof(parseInt(loadset,10) == 'number') && loadset < mps._keys(mps._adloads).length) ? parseInt(loadset,10) : mps._loadset,
        checkslotcount = 1, checkslotinterval = 250, checkslotmax = 12, slotminwidth = 300;
    var checkslot = function (recheckms) {
    var checkslotrun = setTimeout(function () {
    if (mps.selectAd(adslot) && mps._select('#'+mps._adslots[loadset][adslot]+' iframe').clientWidth >= slotminwidth) {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Execute Scaling (on try '+checkslotcount+') '+mps._elapsed());
      mps._scaleAd(adslot,forceratio,loadset);
      clearTimeout(checkslotrun);
    } else {
      checkslotcount++;
    if (checkslotcount < checkslotmax) {
      checkslot(checkslotinterval);
    } else {
      mps._debug('[mps.scaleAdAsync] /'+adslot+':'+loadset+'/ Not Loaded: '+checkslotmax+' attempts made every '+checkslotinterval+'ms '+mps._elapsed());
    }
  }
}, recheckms);
};
checkslot();
};
</script>
<script>mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run"},"fruits":{},"adobe":{"oxygen-web":"DIL2"}};</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--1-{@head}-PM: [1] Postscribe+Pixelman3-->
<script class="mps-pm3-shared">//--[2016-06-27]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{};
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._l('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._l('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._l('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._l('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._l('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._l('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._l('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._l('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._l('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] FAILED - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._l("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  // no matches - give up
  mps._l('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>


<!--{@head} adViewCallback: Ad View Callback-->
<script>//--[2016-01-15] reference: mps._l(mps._adsviewed,mps._adviews)
mps._adViewCallback = function(eo) {
  if (typeof(eo)!= 'object' || typeof (eo.slot)!='object') return false;
  var loadset = 0,
  _adtarget = eo.slot.getSlotElementId(),
  _gptid = eo.slot.getAdUnitPath(),
  _gptcorrelator = googletag.pubads().getCorrelator(),
  _adslot = _adtarget.replace('div-gpt-', '').split('-'),
  cleanslot = (_adslot[0] != 'outofpage') ? _adslot[0].toString() : '_oop',
  adload = (parseInt(_adslot[2]) > 0) ? parseInt(_adslot[2]) : 0;
  //---------------
  var _divarr = _adtarget.split('-');
  if(_divarr.length === 5) loadset = _divarr[4];
  //---------------
  if (_adslot[2] && _adslot[2].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[2];
  } else if (_adslot[3] && _adslot[3].indexOf('C') != -1) {
    var adslot = cleanslot + '-' + _adslot[3];
  } else {
    adslot = cleanslot;
  }
  //---------------
  eo._mps = {
    '_elapsed': mps._elapsed('', true),
    'advar': mps._advars[adload][adslot],
    'adslot': mps._adslots[adload][adslot],
    '_unit': (adslot != '_oop') ? mps._keys(mps.adunits, cleanslot).toString() : 'outofpage',
    'gptid': _gptid,
    '_slot': cleanslot,
    'loadset': loadset,
    'correlator': _gptcorrelator
  };
  //---------------
  mps._adsviewed=mps._adsviewed||[]; mps._adviews=mps._adviews||{}; mps._adviews[loadset]=mps._adviews[loadset]||{};
  mps._adsviewed.push(eo);
  mps._adviews[loadset][adslot] = eo;
  mps._l("[mps:GPT] ADVIEW /"+eo._mps._slot+"/ "+mps._elapsed());
  if(typeof(mps.adviewCallback)=='function') mps.adviewCallback(eo);
}
if(mps._loadset === 0) {
  googletag.cmd.push(function(){
    googletag.pubads().addEventListener('impressionViewable', function(eo) {
      mps._adViewCallback(eo);
    });
  });
}
</script>


<!--{@head}-PM-KV-krux: [pm] Krux KV Insert-->
<script class="mps-pm3" data-mps-pm3="kv-krux">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-krux',function(){
  mps._kvinsert.require('krux');
  //--KRUX KV - COOKIE
  window.Krux || ((Krux = function() {
    Krux.q.push(arguments);
  }).q = []);
  (function() {
    //--KRUX: READ FROM COOKIE
    function retrieve(n) {
      var m, k = 'kx' + n;
      if (window.localStorage) {
        return window.localStorage[k] || ""
        "";
      } else if (navigator.cookieEnabled) {
        m = document.cookie.match(k + '=([^;]*)');
        return (m && unescape(m[1])) || ""
        "";
      } else {
        return '';
      }
    }
    var kvs = [];
    Krux.user = retrieve('user');
    if (Krux.user) {
      kvs.push('u=' + Krux.user);
    }
    Krux.segments = retrieve('segs') && retrieve('segs').split(',') || [];
    for (var i = 0; i < Krux.segments.length; i++) {
      kvs.push('ksg=' + Krux.segments[i]);
    }
    Krux.dartKeyValues = kvs.length ? kvs.join(';') + ';' : '';
    //--KRUX: KV INJECT
    var kvs = window.Krux ? window.Krux.dartKeyValues : '';
    __nbcudigitaladops_inject.dtprm(kvs);
    if(__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) __nbcudigitaladops_inject.dtprm(kvs);
    mps._l('[mps:PM3] LOADED KRUX KV INSERTS');
  })();
  mps._kvinsert.complete('krux');
});
</script>


<!--{@head}:adobe-dil-1: [admp]-1-DIL1-->
<script>//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var d=[],b,f;a!==Object(a)&&(a={});var g,k,m,u,w,n,q,D,x,B,K,E;g=a.partner;k=a.containerNSID;m=!!a.disableDestinationPublishingIframe;u=a.iframeAkamaiHTTPS;w=a.mappings;n=a.uuidCookie;q=!0===a.enableErrorReporting;D=a.visitorService;x=a.declaredId;B=!0===a.removeFinishedScriptsAndCallbacks;K=!0===a.delayAllUntilWindowLoad;E=!0===a.disableIDSyncs;var L,M,N,H,F,O,P,Q;L=!0===a.disableScriptAttachment;M=!0===a.disableCORSFiring;N=!0===a.disableDefaultRequest;
H=a.afterResultForDefaultRequest;F=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;q&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&d.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),
!isNaN(k)&&0<=k&&(b="");b&&(k=0,d.push(b),b="");f=DIL.getDil(g,k);if(f instanceof DIL&&f.api.getPartner()===g&&f.api.getContainerNSID()===k)return f;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},I=
{stuffed:{}},l={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var s=this,a,h,b,d;if("function"===typeof e&&"function"===typeof e.getInstance){if(D===Object(D)&&(a=D.namespace)&&"string"===
typeof a)h=e.getInstance(a,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&h instanceof e&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs&&"function"===typeof h.isOptedOut){this.VisitorAPI=e;if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",
s.releaseRequests())};d=h.getMarketingCloudVisitorID(b);if("string"===typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(c){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():
null},getMIDQueryString:function(){var e=v.isPopulatedString,s=this.getMarketingCloudVisitorID();e(this.mid)&&this.mid===s||(this.mid=s);return e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var s="",a=[],h=[],b,d;for(b in e)e.hasOwnProperty(b)&&(h[0]=b,d=e[b],d===Object(d)&&(h[1]=d.id||"",h[2]=d.authState||0,a.push(h),h=[]));if(h=a.length)for(e=0;e<h;e++)s+="&d_cid_ic="+
t.encodeAndBuildRequest(a[e],"%01");return s}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e;this.isOptedOutCallbackCalled=!0;p.registerRequest()}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,s){var a=v.isPopulatedString,h=encodeURIComponent;if(e===Object(e)&&
a(s)){var b=e.dpid,d=e.dpuuid,c=null;if(a(b)&&a(d)){c=h(b)+"$"+h(d);if(!0===this.declaredIdCombos[c])return"setDeclaredId: combo exists for type '"+s+"'";this.declaredIdCombos[c]=!0;this.declaredId[s]={dpid:b,dpuuid:d};return"setDeclaredId: succeeded for type '"+s+"'"}}return"setDeclaredId: failed for type '"+s+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,s=this.declaredId.init,a=encodeURIComponent,h="";null!==e?h="&d_dpid="+a(e.dpid)+"&d_dpuuid="+a(e.dpuuid):null!==s&&(h=
"&d_dpid="+a(s.dpid)+"&d_dpuuid="+a(s.dpuuid));return h}},registerRequest:function(e){var a=this.firingQueue;e===Object(e)&&a.push(e);this.firing||!a.length||K&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,e=a.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),v.isPopulatedString(e.corsPostData)&&
(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),C.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(e){if(!B)return"removeFinishedScriptsAndCallbacks is not boolean true";var a=this.toRemove,r,h;e===Object(e)&&(r=e.script,h=e.callbackName,(r===Object(r)&&"SCRIPT"===r.nodeName||"no script created"===r)&&"string"===
typeof h&&h.length&&a.push(e));if(this.readyToRemove&&a.length){h=a.shift();r=h.script;h=h.callbackName;"no script created"!==r?(e=r.src,r.parentNode.removeChild(r)):e=r;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:e,callbackName:h});DIL.variables.scriptsRemoved.push(e);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};f=function(){var e="http://fast.",a="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);
if("string"===typeof F&&F.length)return F+a;A.IS_HTTPS&&(e=!0===u?"https://fast.":"https://");return e+g+".demdex.net/dest5.html"+a};var y={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:f(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function e(){h=
document.createElement("iframe");h.id=b.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=b.url;b.newIframeCreated=!0;a();document.body.appendChild(h)}function a(){t.addListener(h,"load",function(){h.className="aamIframeLoaded";b.iframeHasLoaded=!0;b.requestToProcess()})}var b=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,a()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):e();this.iframe=h},requestToProcess:function(e,a){var b=this;e&&!v.isEmptyObject(e)&&this.process(e,a);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){b.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,a){var b=encodeURIComponent,h,
d,c,g,f,k;a===Object(a)&&(k=t.encodeAndBuildRequest(["",a.dpid||"",a.dpuuid||""],","));if((h=e.dests)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("dests"),b(g.id||""),b(g.y||""),b(g.c||"")],this.addMessage(g.join("|"));if((h=e.ibs)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],g=[b("ibs"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=e.dpcalls)&&h instanceof Array&&(d=h.length))for(c=0;c<d;c++)g=h[c],
f=g.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],g=[b("dpm"),b(g.id||""),b(g.tag||""),t.encodeAndBuildRequest(g.url||[],","),b(g.ttl||""),t.encodeAndBuildRequest(f,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var a=encodeURIComponent,a=q?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+e)},sendMessages:function(){var e=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),
this.messagesPosted.push(a),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},J={traits:function(e){v.isValidPdata(e)&&(l.sids instanceof Array||(l.sids=[]),t.extendArray(l.sids,e));return this},pixels:function(e){v.isValidPdata(e)&&(l.pdata instanceof Array||(l.pdata=[]),t.extendArray(l.pdata,e));return this},logs:function(e){v.isValidLogdata(e)&&(l.logdata!==Object(l.logdata)&&(l.logdata={}),t.extendObject(l.logdata,e));return this},customQueryParams:function(e){v.isEmptyObject(e)||
t.extendObject(l,e,p.reservedKeys);return this},signals:function(e,a){var b,h=e;if(!v.isEmptyObject(h)){if(a&&"string"===typeof a)for(b in h={},e)e.hasOwnProperty(b)&&(h[a+b]=e[b]);t.extendObject(l,h,p.reservedKeys)}return this},declaredId:function(e){p.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"===typeof e&&(l.callback=e);return this},afterResult:function(e){"function"===typeof e&&(l.postCallbackFn=e);return this},useImageRequest:function(){l.useImageRequest=
!0;return this},clearData:function(){l={};return this},submit:function(){C.submitRequest(l);l={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return d},getState:function(){var e={},a={};t.extendObject(e,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});t.extendObject(a,y,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:l,otherRequestInfo:e,destinationPublishingInfo:a}},idSync:function(e){if(E)return"Error: id syncs have been disabled";
if(e!==Object(e)||"string"!==typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof e.url||!e.url.length)return"Error: config.url is empty";var a=e.url,b=e.minutesToLive,h=encodeURIComponent,d,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";d=t.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],",");e=["ibs",h(e.dpid),"img",
h(a),b,"",d];y.addMessage(e.join("|"));p.firstRequestHasFired&&y.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(E)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!==typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(v.isEmptyObject(e))return"Error: json is empty or not an object";y.ibsDeleted.push(e.ibs);delete e.ibs;
C.defaultCallback(e);return e},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var e=p,a=e.modStatsParams,b=e.platformParams,h;if(!a){a={};for(h in b)b.hasOwnProperty(h)&&!e.nonModStatsParams[h]&&(a[h.replace(/^d_/,"")]=b[h]);e.modStatsParams=a}return a}},C={corsMetadata:function(){var e="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
e="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:e,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){p.registerRequest(C.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var a=p,b,h=e.callback,d="img",c;if(!v.isEmptyObject(w)){var g,
f,n;for(g in w)w.hasOwnProperty(g)&&(f=w[g],null!=f&&""!==f&&g in e&&!(f in e||f in p.reservedKeys)&&(n=e[g],null!=n&&""!==n&&(e[f]=n)))}v.isValidPdata(e.sids)||(e.sids=[]);v.isValidPdata(e.pdata)||(e.pdata=[]);v.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=t.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);a.useJSONP=!0!==e.useImageRequest;a.useJSONP&&(d="script",b=a.callbackPrefix+"_"+k+"_"+
(new Date).getTime());a=this.makeRequestSrcData(e,b);!P&&(c=this.getCORSInstance())&&a.truncated&&(this.corsMetadata.corsCookiesEnabled||a.isDeclaredIdCall)&&(d="cors");return{tag:d,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:h,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:c,corsPostData:a.corsPostData,hasCORSError:!1}},defaultCallback:function(e,a){var b,h,d,c,g,f,k,x,q;if((b=e.stuff)&&b instanceof Array&&(h=b.length))for(d=0;d<h;d++)if((c=
b[d])&&c===Object(c)){g=c.cn;f=c.cv;k=c.ttl;if("undefined"===typeof k||""===k)k=Math.floor(t.getMaxCookieExpiresInMinutes()/60/24);x=c.dmn||"."+document.domain.replace(/^www\./,"");q=c.type;g&&(f||"number"===typeof f)&&("var"!==q&&(k=parseInt(k,10))&&!isNaN(k)&&t.setCookie(g,f,1440*k,"/",x,!1),I.stuffed[g]=f)}b=e.uuid;v.isPopulatedString(b)&&!v.isEmptyObject(n)&&(h=n.path,"string"===typeof h&&h.length||(h="/"),d=parseInt(n.days,10),isNaN(d)&&(d=100),t.setCookie(n.name||"aam_did",b,1440*d,h,n.domain||
"."+document.domain.replace(/^www\./,""),!0===n.secure));m||p.abortRequests||y.requestToProcess(e,a)},makeRequestSrcData:function(e,a){e.sids=v.removeEmptyArrayValues(e.sids||[]);e.pdata=v.removeEmptyArrayValues(e.pdata||[]);var b=p,d=b.platformParams,c=t.encodeAndBuildRequest(e.sids,","),f=t.encodeAndBuildRequest(e.pdata,","),n=(e.logdataArray||[]).join("&");delete e.logdataArray;var x=A.IS_HTTPS?"https://":"http://",q=b.declaredId.getDeclaredIdQueryString(),w=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):
"",z;z=[];var l,m,u,B;for(l in e)if(!(l in b.reservedKeys)&&e.hasOwnProperty(l))if(m=e[l],l=encodeURIComponent(l),m instanceof Array)for(u=0,B=m.length;u<B;u++)z.push(l+"="+encodeURIComponent(m[u]));else z.push(l+"="+encodeURIComponent(m));z=z.length?"&"+z.join("&"):"";l=!1;c="d_nsid="+d.d_nsid+q+w+(c.length?"&d_sid="+c:"")+(f.length?"&d_px="+f:"")+(n.length?"&d_ld="+encodeURIComponent(n):"");d="&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst;x=x+g+".demdex.net/event";f=b=x+"?"+c+(b.useJSONP?
d+"&d_cb="+(a||""):"")+z;2048<b.length&&(b=b.substring(0,b.lastIndexOf("&")),l=!0);return{corsSrc:x+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:f,truncated:l,corsPostData:c+d+z,isDeclaredIdCall:""!==q}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===e.tag?this.fireScript(e,a):"cors"===e.tag&&this.fireCORS(e,a)}},fireImage:function(e){var a=
p,c,h;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(e),c.onload=function(){a.firing=!1;a.fired.push(e);a.num_of_img_responses++;a.registerRequest()},h=function(c){b="imgAbortOrErrorHandler received the event of type "+c.type;d.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(e);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",h,!1),c.addEventListener("abort",h,!1)):c.attachEvent&&(c.attachEvent("onerror",h),c.attachEvent("onabort",h)),c.src=
e.src)},fireScript:function(e,a){var c=this,h=p,f,k,n=e.src,x=e.postCallbackFn,q="function"===typeof x,l=e.internalCallbackName;h.abortRequests||(h.firing=!0,window[l]=function(c){try{c!==Object(c)&&(c={});E&&(y.ibsDeleted.push(c.ibs),delete c.ibs);var f=e.callbackFn;h.firing=!1;h.fired.push(e);h.num_of_jsonp_responses++;f(c,a);q&&x(c,a)}catch(r){r.message="DIL jsonp callback caught error with message "+r.message;b=r.message;d.push(b);r.filename=r.filename||"dil.js";r.partner=g;DIL.errorModule.handleError(r);
try{f({error:r.name+"|"+r.message},a),q&&x({error:r.name+"|"+r.message},a)}catch(n){}}finally{h.requestRemoval({script:k,callbackName:l}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:l})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){h.requestRemoval({script:k,callbackName:l});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,e)},!1),k.type="text/javascript",
k.src=n,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(k,f)),h.sent.push(e),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(r){var n;try{if(n=JSON.parse(r),n!==Object(n)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(q){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var x=a.callbackFn;k.firing=!1;k.fired.push(a);k.num_of_cors_responses++;x(n,c);m&&w(n,c)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message;
b=l.message;d.push(b);l.filename=l.filename||"dil.js";l.partner=g;DIL.errorModule.handleError(l);try{x({error:l.name+"|"+l.message},c),m&&w({error:l.name+"|"+l.message},c)}catch(p){}}finally{k.registerRequest()}}var h=this,k=p,n=this.corsMetadata.corsType,x=a.corsSrc,q=a.corsInstance,l=a.corsPostData,w=a.postCallbackFn,m="function"===typeof w;if(!k.abortRequests){k.firing=!0;if(M)k.firing=!1;else try{q.open("post",x,!0),"XMLHttpRequest"===n?(q.withCredentials=!0,q.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===n&&(q.onload=function(){f(this.responseText)}),q.onerror=function(){h.handleCORSError(a,c,"onerror")},q.ontimeout=function(){h.handleCORSError(a,c,"ontimeout")},q.send(l)}catch(u){this.handleCORSError(a,c,"try-catch")}k.sent.push(a);k.declaredId.declaredId.request=null}},handleCORSError:function(a,b,c){a.hasCORSError||
(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(c),a.tag="script",this.fireScript(a,b))},handleScriptError:function(a,b){p.num_of_jsonp_errors++;this.handleRequestError(a,b)},handleRequestError:function(a,b){var c=p;d.push(a);c.abortRequests=!0;c.firing=!1;c.errored.push(b);c.registerRequest()}},v={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==
Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,d,g=[],b=0;b<c;b++)d=a[b],"undefined"!==typeof d&&null!==d&&""!==d&&g.push(d);return g},isPopulatedString:function(a){return"string"===typeof a&&a.length}},t={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+
b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[],g,f;b||(b="=");for(g in a)a.hasOwnProperty(g)&&(f=a[g],"undefined"!==typeof f&&null!==f&&""!==f&&d.push(g+b+(c?encodeURIComponent(f):f)));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==
typeof b)throw new TypeError;for(var g=Array(d),f=0;f<d;f++)f in c&&(g[f]=b.call(b,c[f],f,c));return g},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var g=[],f=0;f<d;f++)if(f in c){var k=c[f];b.call(b,k,f,c)&&g.push(k)}return g}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,d,f;c=0;for(d=b.length;c<d;c++){for(f=b[c];" "===f.charAt(0);)f=
f.substring(1,f.length);if(0===f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,g){var k=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(k.getTime()+c)).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===
Object(b)){for(d in b)!b.hasOwnProperty(d)||!v.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===g&&0===k&&t.addListener(window,"load",function(){DIL.windowLoaded=!0});var R=!1,G=function(){R||(R=!0,p.registerRequest(),U(),m||p.abortRequests||y.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){m||setTimeout(function(){N||p.firstRequestHasFired||
("function"===typeof H?J.afterResult(H).submit():J.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},S=document;"error"!==g&&(DIL.windowLoaded?G():"complete"!==S.readyState&&"loaded"!==S.readyState?t.addListener(window,"load",function(){DIL.windowLoaded=!0;G()}):(DIL.windowLoaded=!0,G()));p.declaredId.setDeclaredId(x,"init");p.processVisitorAPI();this.api=J;this.getStuffedVariable=function(a){var b=I.stuffed[a];b||"number"===typeof b||(b=t.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=
v;this.helpers=t;this.constants=A;this.log=d;T&&(this.pendingRequest=l,this.requestController=p,this.setDestinationPublishingUrl=f,this.destinationPublishing=y,this.requestProcs=C,this.variables=I,this.callWindowLoadFunctions=G)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;
if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+
(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,c,d){c=c+"$"+d;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var d;"string"!==typeof a&&(a="");c||(c=0);d=a+"$"+c;return d in this.dils?this.dils[d]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,d){c=this.getDil(c,d);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,d){var b=1;c&&
(window.postMessage?d.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},d=!1;return{activate:function(){d=!0},handleError:function(b){if(!d)return"DIL error module has not been activated";
b!==Object(b)&&(b={});var f=b.name?(b.name+"").toLowerCase():"",g=[];b={name:f,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(f in c?c[f]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,d){var b="";c=c||"Error caught in DIL module/submodule: ";
a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;d instanceof DIL&&(a.partner=d.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var d=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),f="",g="",k={queryParam:"q"};return(f=d.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(d.helpers.extendObject(k,f),g=k.queryPattern?
(f=(""+b.search).match(k.queryPattern))?f[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),d=document.createElement("a");d.href=a||document.referrer;return{hash:d.hash,host:d.host.split(":").shift(),hostname:d.hostname,href:d.href,pathname:d.pathname.replace(/^\//,""),protocol:d.protocol,search:d.search,uriParams:function(a,d){c.helpers.map(d.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},d.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),d,b,f,g,k;d=0;for(f=arguments.length;d<f;d++)if(g=arguments[d],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d,b){try{var f=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=f.constructTrackVars(d);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",d=this.s,g,m=[];g=[];var w={},u=!1;if(d!==Object(d))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof d.foreachVar)d.foreachVar(function(a,b){"undefined"!==typeof b&&(w[a]=b,u=!0)},this.trackVars);else{if(!(d.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(d.lightProfileID)(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+",");else if(d.pe||d.linkType)a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",");if(a){b=0;for(m=a.split(",");b<m.length;b++)0<=c.indexOf(","+m[b]+",")&&g.push(m[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=d.va_t.length;g<b;g++)a=d.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof d[a]&&null!==d[a]&&""!==d[a]&&(w[a]=d[a],u=!0)}f.includeContextData(d,
w).store_populated&&(u=!0);u&&this.d.api.signals(w,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(m){return this.handle(m,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],d,b,f,g,k;if(a===Object(a)){d=a.names;if(d instanceof Array&&(f=d.length))for(b=0;b<f;b++)g=d[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(f=a.length))for(b=0;b<f;b++)if(d=a[b],d===Object(d)&&(g=d.name,k=parseInt(d.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(d=0;d<=k;d++)c.push(g+d);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var d={},b=!1;if(a.contextData===Object(a.contextData)){var f=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,m={},u,w,n,q;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(u=0,w=k.length;u<w;u++)n=k[u],this.dil.validators.isPopulatedString(n)&&(m[n]=!0);for(q in f)!f.hasOwnProperty(q)||m[q]||!(k=f[q])&&"number"!==typeof k||(q=("contextData."+q).replace(/\./g,g),c[q]=k,b=!0)}d.store_populated=b;return d}};
DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},f="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",
b.message=f,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(f="gaArray is not an array or is empty",b.message=f,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(d);this.errorMessage=f}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],d,b,f,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){f=this.defaultTrackVars;g={};d=0;for(b=f.length;d<b;d++)g[f[d]]=
!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(d=0;d<b;d++)f=a[d],"string"===typeof f&&f.length&&f in g&&c.push(f);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var d,b,f,g;d=0;for(b=a.length;d<b;d++)f=a[d],f instanceof Array&&f.length&&(f=[],g=a[d],f instanceof Array&&g instanceof Array&&Array.prototype.push.apply(f,g),g=f.shift(),"string"===
typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(f)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,
f,g){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",d);this.addToSignals("c_itemPrice",f);this.addToSignals("c_itemQuantity",g)},_addTrans:function(a,b,c,d,f,g,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",d);this.addToSignals("c_transShipping",f);this.addToSignals("c_transCity",g);this.addToSignals("c_transState",
k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",d)}},d=this.tv,b,f,g,k,m,u;b=0;for(f=d.length;b<f;b++)if(g=d[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(u=a[g],u instanceof Array))for(k=0,m=u.length;k<m;k++)c[g].apply(this,u[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();
return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,d){try{this.callback=this.dil=null,this.errorMessage=
"",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(d)?d:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,d,b,f,g,k;k=!1;var m=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(d=c.length))for(a=0;a<d;a++)if((b=
c[a])&&b===Object(b)&&(f=b.cn,g=b.cv,f===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(d=c.length;a<d&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",m++,g,k,1]),m>this.LIMIT);a++);this.errorMessage=1<m?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},
submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,d){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=d===Object(d)?d:{};d={name:"DIL Peer39 Module Error"};var b=[],f="";this.isSecurePageButNotEnabled(document.location.protocol)&&(f="Module has not been enabled for a secure page",b.push(f),d.message=f,DIL.errorModule.handleError(d));c instanceof
DIL?(this.dil=c,d.partner=this.dil.api.getPartner()):(f="dilInstance is not a valid instance of DIL",b.push(f),d.message=f,DIL.errorModule.handleError(d));"string"===typeof a&&a.length?this.aid=a:(f="aid is not a string or is empty",b.push(f),d.message=f,DIL.errorModule.handleError(d));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),d=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};d.parentNode.insertBefore(c,d);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,d,b,f,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,d=a.length;c<d;c++)b=a[c].split("="),f=b[0],b=b[1],f&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[f]instanceof Array||(g[f]=[]),g[f].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,d=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof d&&d.length?d:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=(this.dil.constants.IS_HTTPS?
"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


//DIL instantiation starts. Configurable section below

var nbcuDil = DIL.create({
    partner: "nbcu",
    containerNSID: 0 ,
    uuidCookie: {
        name: 'aam_uuid',
        days: 30
    }

});
if(typeof customObj != 'undefined'){
  mps._l('[mps/aam] Sending Custom Object',window.customObj);
  //Object is present, submit data
  var nbcuDilInstance = DIL.getDil('nbcu');
  nbcuDilInstance.api.signals(customObj, 'c_').submit();
  };
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>window.console && console.log('--[executed]--> MPS Header Additions (2)');</script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--NEW {@bodyheader} execShowCard: Show Card Ad Execution 2-->
<script>// USA NETWORK: Show Card Execution II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._showcardslot = 'showcardad';
  mps._delays.showcard = 300;
  mps.usa._insertstatus = 0;
  mps.usa.execShowCard = function(cardselector,adselector,mpspath,attempt) {
    mps._l('[mps+USA] execShowCard("'+cardselector+'","'+adselector+'","'+mpspath+'")');
    var attempt = attempt||0, cardelement = mps._select(cardselector), adelement = mps._select(adselector);
    if(!cardelement || !adelement) {
      mps._l('[mps+USA] execShowCard FAILED (invalid selectors)');
    }
    if(typeof(mps._select(adselector+' .mps-slot')) == 'object') { // Ad has already loaded
      mps._l('[mps+USA] execShowCard SKIPPED (already loaded)');
      return false;
    }
    mps.railvarsOverride = {'railTarget':cardselector, 'railAdBgSize':'cover'};
    mps._l('[mps+USA] execShowCard Called ('+cardselector+', '+adselector+', '+mpspath+') '+mps._loadset);
    if(!mps._ext.loaded || !mps._gptloaded) { // MPS Request still running
      window.console&&console.log('[mps+USA] execShowCard: not ready - trying again...');
      setTimeout(function(){
        mps.usa.execShowCard(cardselector,adselector,mpspath,attempt+1);
      }, mps._delays.showcard);
      return false;
    }
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype=;promoid='+promoid+';';
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(mps._select(adselector),mps.usa._showcardslot,targetingstr,0,mpspath,1);
    mps.usa._insertstatus = 0;
    mps._l('[mps+USA] execShowCard: INSERTED '+mps.usa._showcardslot+' [promoid='+mpscall['field[promoid]']+';]');
  }
} else {
  mps._l('[mps+USA] execShowCard: UNAVAILABLE')
}
</script>


<!--NEW {@bodyheader} insertLogo: Dynamic Logo Handler 2-->
<script>//--[2016-01-04] (temporary)
  mps.usa.updateCorrelator = function(){
    if(typeof(googletag)=='object' && googletag.pubadsReady) {
      mps._l('[mps+USA] updating correlator');
      return googletag.pubads().updateCorrelator();
    } else {
      return false;
    }
  }
</script>

<script>/*
window.console&&console.debug('[mps+USA] DEFINE MPSLOADED');
mps._queue.mpsloaded.push(function(){
  window.console&&console.debug('[mps+USA] (mpsloaded) INSERT STATUS: '+mps.usa._insertstatus);
});
if(mps._loadset===0) {
  window.console&&console.debug('[mps+USA] DEFINE MPSINIT');
  mps._queue.mpsinit.push(function(){
    window.console&&console.debug('[mps+USA] (mpsinit) INSERT STATUS: '+mps.usa._insertstatus);
  });
}
*/</script>

<script>// USA NETWORK: Dynamic Logo Inserts II
if(mps && mps._ext && mpscall) {
  mps.usa = mps.usa||{};
  mps.usa._logoslot = 'logosponsor';
  mps._delays.logoinsert = 300;
  mps._delays.logofirst = 1000;
  mps.usa._insertstatus = 0;
  mps.usa.insertLogo = function(element,logotype,mpspath,attempt) {
    var attempt = attempt||0;
    var delayms = attempt==0 ? mps._delays.logofirst : mps._delays.logoinsert;
    if(!mps._ext.loaded || !mps._gptloaded || document.readyState!=='complete' || attempt==0) { // MPS Request still running
      window.console&&console.log('[mps+USA] insertLogo: not ready - trying again...');
      setTimeout(function(){
        mps.usa.insertLogo(element,logotype,mpspath,attempt+1);
      }, delayms);
      return false;
    }

    mps._l('[mps+USA] insertLogo("'+element+'","'+logotype+'","'+mpspath+'") ');
    //mpscall.path = (typeof(mpspath)=='string') ? mpspath : '';
    var promoid = mps._trim(mpspath,'/ ').replace('/','').replace('-',''),
    targetingstr = 'logotype='+logotype+';promoid='+promoid+';';
    //mpscall.READONLY = 1;
    mpsopts.updatecorrelator = 0; mps.usa._insertstatus = 1;
    mps.insertAd(element,mps.usa._logoslot,targetingstr,0,mpspath,1);
    mps._l('[mps+USA] insertLogo: INSERTED '+mps._loadset+':'+mps.usa._logoslot+" ["+targetingstr+"] ("+(attempt*mps._delays.logoinsert)+"ms delay)");
    mps.usa._insertstatus = 0;
  }
} else {
  mps._l('[mps+USA] insertLogo: UNAVAILABLE')
}
</script>


<!--{@bodyheader} autoScale: Auto Ad Scaling-->
<script>
// USA NETWORK: Adload Callback
mps.adloadCallback = function(eo,loadset) {
  if(typeof(loadset)=='undefined' && eo._mps.adslot || typeof(eo._mps.adslot)=='string' || eo._mps.adslot.indexOf('div-gpt-')===0) { // figure out loadset
      var _div = eo._mps.adslot.split('-');
    loadset = (_div.length===5) ? _div[4] : 0;
  }
  mps.autoScale(eo._mps._slot,loadset,eo.size,eo.isEmpty);
}

// USA NETWORK: Auto Scaling
mps._autoscaled = mps._autoscaled||{};
mps.autoScale = function(slot,loadset,adsizes,adempty) {
  var scalable = ['showcardad','logosponsor','galleryadrepeat'], // slots to autoscale
    withattr = 'data-scalemps', // attribute to find
    scalemin = 1, // number between 0 and 1
    dome={}, slot=slot, loadset=loadset, adsizes=adsizes, adempty=adempty||0;
  /*--[Validation]--*/
  if(typeof(loadset)=='undefined') {
    window.console && console.log('[mps:AutoScale] FAILED MISSING LOADSET');
    return false;
  }
  if(scalable.indexOf(slot)<0) {
    window.console && console.log('[mps:AutoScale] SKIPPED ('+loadset+':'+slot+')');
    return false;
  }
  if(adempty) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO CREATIVE ('+loadset+':'+slot+')');
    return false;
  }
  dome.ad = mps._select('#'+mps._adslots[loadset][slot]);
  if(!dome.ad) {
    window.console && console.log('[mps:AutoScale] FAILED SELECT ('+mps._adslots[loadset][slot]+')');
    return false;
  }
  dome.adparent = dome.ad.parentElement;
  if(!dome.adparent.getAttribute(withattr)) {
    window.console && console.log('[mps:AutoScale] SKIPPED NO ATTRIBUTE ('+loadset+':'+slot+')');
    return false;
  }
  /*--[Calculate]--*/
  var _padlr = (parseInt(window.getComputedStyle(dome.adparent).paddingLeft) + parseInt(window.getComputedStyle(dome.adparent).paddingRight))
  if(!adsizes || !adsizes[0] || !adsizes[1]) return false;
  var sz = { awidth: parseInt(adsizes[0]), aheight: parseInt(adsizes[1]), cwidth: dome.adparent.clientWidth, cheight: dome.adparent.clientHeight, cpad: _padlr }
  if(_padlr > 0) sz.cwidth = (sz.cwidth - _padlr);
  sz.ratio = (sz.cwidth / sz.awidth);
  sz.ratio = (Math.floor(sz.ratio*1000)/1000);
  if(sz.ratio > scalemin) sz.ratio = scalemin
  if(!mps._autoscaled[loadset+'|'+slot] && sz.cwidth >= sz.awidth) {
    mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":.999};
    window.console && console.log('[mps:AutoScale] NO SCALING NEEDED ('+loadset+':'+slot+')');
    return false;
  }
  if(sz.ratio > .999) sz.ratio = .999;
  if(mps._autoscaled[loadset+'|'+slot] && mps._autoscaled[loadset+'|'+slot]['ratio'] == sz.ratio) { //
    window.console && console.log('[mps:AutoScale] NO SCALING CHANGES ('+loadset+':'+slot+')');
    return false;
  }
  //console.debug(sz);
  /*--[Execute Scaling]--*/
  window.console && console.log('[mps:AutoScale] mps._scaleAd("'+slot+'",'+sz.ratio+','+loadset+')');
  mps._autoscaled[loadset+'|'+slot] = {"slot":slot, "loadset":loadset, "adsizes":adsizes, "ratio":sz.ratio};
  mps._autoscaled[loadset+'|'+slot].ratio = sz.ratio;
  mps._scaleAd(slot,sz.ratio,loadset);
}
mps.autoScaleAgain = function() {
  var scalecount=0,delay=500,keys = mps._keys(mps._autoscaled);
  if(keys.length > 0) {
    window.console && console.log('[mps:AutoScale] RESCALING '+keys.length);
    for(var key in mps._autoscaled) {
      mps.autoScale(mps._autoscaled[key].slot,mps._autoscaled[key].loadset,mps._autoscaled[key].adsizes)
      scalecount++;
    }
  }
  return keys.length;
}

// USA NETWORK: Autoscale Again on Window Resize
mps._debounce=function(b,f,c){var a;return function(){var d=this,e=arguments,g=c&&!a;clearTimeout(a);a=setTimeout(function(){a=null;c||b.apply(d,e)},f);g&&b.apply(d,e)}};
mps._debouncereautoscale = mps._debounce(function() {
  mps.autoScaleAgain();
}, 250);
</script>


<!--{@bodyheader} insertInterstitial: Gallery Interstitial Ads-->
<script>//--[2016-01-15]
mps.usa._adcounts=mps.usa._adcounts||{}
mps.usa.insertInterstitial = function(target) {
  var adslot = 'galleryadrepeat';
  mps._queue.gptloaded.push(function() {
    mps._l('[mps+USA] Attempting to insert interstitial ad');
    if(typeof(mps.usa._adcounts[adslot])!='number') mps.usa._adcounts[adslot] = 0;
    if(mps.usa._adcounts[adslot]!=0 && mps.usa.updateCorrelator) mps.usa.updateCorrelator();
    mps.usa._adcounts[adslot]++;
    return mps.cloneAd(target,adslot);
  });
}
</script>


<!--{@bodyheader} scaleAd: New Ad Scaling-->
<script>// OVERRIDE scaling.js (May 2015 @rrhee)
mps._scaleAd = function (adslot,forceratio,loadset) {
  var scaleclass = 'mps-has-scaled',
    adslot = adslot,
    forceratio = forceratio,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  mps._debug('[mps:ScaleAd] CALLED ('+ adslot+', '+forceratio+', '+loadset+')');
  if(mps._viewport) var _viewport = mps._viewport();
  if(typeof aiframe === 'object' && typeof _viewport ==='object' ) {
    if(_viewport[0] < aiframe.clientWidth || forceratio > 0){
      var vpwidth = _viewport[0],
        sideoffset = Math.floor(aiframe.offsetLeft),
        scaleratio = typeof(forceratio)!='number' ? (vpwidth / (aiframe.clientWidth + sideoffset * 2)) : forceratio,
        scaleratioh = typeof(forceratio)!='number' ? (vpwidth / aiframe.clientWidth) : forceratio,
        scaledwidth = Math.floor(aiframe.clientWidth * scaleratio),
        scaledheight = Math.floor(aiframe.clientHeight * scaleratioh);
      mps.__prescalestate = mps.__prescalestate || {};
      mps.__prescalestate[loadset] = mps.__prescalestate[loadset] || {};
      if(mps._classHas(adivgpt,scaleclass)) {
        mps._scaleAdRevert(adslot,loadset);
      } else {
        mps.__prescalestate[loadset][adslot] = { 'div':adivgpt.getAttribute('style'), 'iframe':aiframe.getAttribute('style') }
      }
      aiframe.setAttribute('style',
        'zoom: 1;'+
          'scale:'+scaleratio+';'+
          '-moz-transform-origin: 0 0;'+
          '-moz-transform: scale('+scaleratio+');'+
          '-o-transform-origin: 0 0;'+
          '-o-transform: scale('+scaleratio+');'+
          '-webkit-transform-origin: 0 0;'+
          '-webkit-transform: scale('+scaleratio+');'+
          '-ms-transform-origin: 0 0;'+
          '-ms-transform: scale('+scaleratio+');'+
          'transform-origin: 0 0;'+
          'transform: scale('+scaleratio+');'+
          'border: 0');
      adivgpt.setAttribute('style',
        ((scaleratio < 1) ? 'overflow: hidden;' : '')+
          'margin: 0 auto;'+
          'padding: 0;'+
          'height:'+scaledheight+'px;'+
          'width:'+scaledwidth+'px;');
      aiframe.setAttribute('data-scale',scaleratio);
      mps._classAdd(adivgpt,scaleclass);
      mps._debug('[mps:ScaleAd] /'+adslot+'/ Viewport Width: '+vpwidth+'px | Left Offset: '+sideoffset+'px | Right Offset: '+(vpwidth-(scaledwidth+sideoffset))+'px | Iframe Width: '+aiframe.clientWidth+'px | Scale Ratio (w): '+scaleratio+' | Scale Ratio (h): '+scaleratioh+' | Scaled Ad (w): '+scaledwidth+'px | Scaled Ad (h): '+scaledheight+'px '+mps._elapsed());
    }
  } else {
    mps._debug('[mps:ScaleAd] Bypass /'+adslot+'/ '+mps._elapsed());
  }
};

mps._scaleAdRevert = function(adslot,loadset) {
  var adslot = adslot,
    loadset = (parseInt(loadset)!=NaN) ? parseInt(loadset) : mps._loadset,
    aiframe = mps._select('#'+mps._adslots[loadset][adslot]+' iframe'),
    adivgpt = mps._select('#'+mps._adslots[loadset][adslot]);
  var _viewport = mps._viewport && mps._viewport();
  mps.__prescalestate[loadset][adslot] = mps.__prescalestate[loadset][adslot]||{};
  if(typeof(aiframe)==='object' && typeof(_viewport)==='object' && typeof(mps.__prescalestate)=='object' && typeof(mps.__prescalestate[loadset][adslot])=='object') {
    if(mps.__prescalestate[loadset][adslot].iframe) { aiframe.setAttribute('style',mps.__prescalestate[loadset][adslot].iframe); } else { aiframe.removeAttribute('style'); }
    if(mps.__prescalestate[loadset][adslot].div) { adivgpt.setAttribute('style',mps.__prescalestate[loadset][adslot].div); } else { adivgpt.removeAttribute('style'); }
    adivgpt.className = adivgpt.className.replace( /(?:^|s)mps-has-scaled(?!S)/ , '' );
    delete mps.__prescalestate[loadset][adslot];
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALED '+mps._elapsed());
  } else {
    mps._debug('[mps:ScaleAd] /'+loadset+'|'+adslot+'/ UNSCALE FAILED '+mps._elapsed());
  }
};
</script>


<!--{@bodyheader}:handleAthena: [shared] Athena Handler-->
<script>//--[2016-04-26]
top.mps.handleAthena = function(ele) {
  mps._l('[mps+Athena] handleAthena Triggered',ele)

  setTimeout(function(){
    mps._l('[mps+Athena] handleAthena - element height: '+ele.clientHeight);
    var __athenaid;  // find athena gpt container on page
    for(var k in mps._adloads){
      for(var kk in mps._adloads[k]){
        if(typeof(mps._adloads[k][kk])!='object' || !mps._adloads[k][kk]['size'] || !mps._adloads[k][kk]['size'].length || !mps._adloads[k][kk]._mps) continue;
        if(mps._adloads[k][kk]['size'].join('x')=='700x50') __athenaid = '#'+mps._adloads[k][kk]._mps.adslot;
      }
    }

    if(!__athenaid || !mps._select(__athenaid)) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to find Athena container');
      return false;
    }
    var __athenaele = mps._select(__athenaid);

    // ATHENA CONTAINER EXISTS - RESET IFRAME HEIGHT
    if(ele.clientHeight) {
      var __athenaifr = mps._select(__athenaid+' iframe');
      if(!__athenaifr || !__athenaifr.getAttribute) return false;
      var __athenaifrheight = Number.parseInt(__athenaifr.getAttribute('height'),10);
      mps._l('[mps+Athena] handleAthena: CHECK Athena Iframe: ' +__athenaifrheight);
      mps._l('[mps+Athena] handleAthena: LOADED Athena Creative: ' +ele.clientHeight);
      if(__athenaifrheight > ele.clientHeight) {
        __athenaifr.setAttribute('height',ele.clientHeight);
        mps._l('[mps+Athena] handleAthena: RESIZING Athena Iframe to: '+ele.clientHeight+' (old height: '+__athenaifrheight+')');
      }
      return true;
    }
    var __athenaele = mps._select(__athenaid);
    if(!__athenaele || !__athenaele.style) {
      mps._l('[mps+Athena] handleAthena FAILED: Unable to select Athena container');
      return false;
    }
    // HIDE ATHENA CONTAINER
    __athenaele.style.display = 'none';
      mps._l('[mps+Athena] handleAthena SUCCESS: no third party creative - container hidden');
    if(typeof(mps.handleAthenaCallback)=='function') mps.handleAthenaCallback();
  }, 2100); }
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<script>var _sf_startpt=(new Date()).getTime()</script>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/js_cFJQR8ONl4RWf0eTikO7Q-Zli_BSLi50GEfP-CgzC-A.js"></script>
<script>/* DART Inject Javascript V3.5 */
if (typeof eTandomAd == "undefined") eTandomAd = "none";

// GENERAL
if (typeof usa_debugFlag == 'undefined') var usa_debugFlag = (window.location.hostname == 'www.usanetwork.com') ? false : true;
if (typeof usa_debug == 'undefined') {
  function usa_debug(msg, obj) {
    if (usa_debugFlag && typeof console == 'object' && typeof console.log != 'undefined') {
      console.log(msg);
      if (typeof obj != 'undefined') {
        console.log(obj);
      }
    }
  }
}
usa_debug('Script override v3.5');

var usa_sponsorOverride = false;
var url = window.location.href;
var urlParts = url.split('/');
usa_debug('urlParts.length: ' + urlParts.length + '\nurlParts: ', urlParts);
//usa_debug('urlParts[0]: ' + urlParts[0] + '\nurlParts[3]: ' + urlParts[3] + '\nurlParts[4]: ' + urlParts[4] + '\nurlParts[5]: ' + urlParts[5]);

/* ========= */
// Unused DART function
/* ========= */
var usa_currentTagObjArray = {};
// iterate over the tag object and eval anything that needs it so we can pass it to our iframe
function usa_getCurrentTagObj(key) {
  usa_debug('LEGACY: usa_getCurrentTagObj()');
  var returnObj = usa_currentTagObjArray[key];
  var vals = returnObj['key_vals'];

  for(var key in vals) {
    value = vals[key];

    for(var val in value) {
      if (value[val]['eval'] == 1) {
        value[val]['val'] = eval(value[val]['val']);
        value[val]['eval'] = 0;
      }
    }
  }

  return returnObj;
}


/* ========= */
// Main Override for Drupal.DART.tag function
/* ========= */

var iframeQueue = new Array();

Drupal.DART.tag = function(tag) {

  // social recap
  if (urlParts.length >= 5) {
    if (urlParts[3].toLowerCase() == 'suits' && urlParts[4].toLowerCase() == 'socialrecaps') {
      Drupal.settings.USA.DART.values.sub = 'socialrecap';
    }
  }



  tag = typeof(tag) == 'string' ? eval('(' + tag + ')') : tag;
  usa_debug('LEGACY: Drupal.DART.tag()\ntag: ', tag);

  // Ad Ops new system as of 1/6/2014
  dart_url = 'http://ad.doubleclick.net/N2620';

  if (usa_deviceInfo.smartphone) {
    // SMARTPHONE
    if (tag.sz == '728x90' || tag.sz == '728x90,970x66') {
      // this unit should become a 300x50 unless we are on the homepage, and then we shouldn't render anything as it's in a different spot
      if (Drupal.settings.USA.DART.values.sect == 'home') {
        return;
      }
      else {
        tag.sz = '300x50';
        tag.key_vals.sz[0] = {'val' : '300x50', 'eval': false};
      }
    }
    else if (tag.sz == '300x250') {
      // no 300x250's on mobile, so exit, unless its the homepage and it will turn into a mobile unit
      if (Drupal.settings.USA.DART.values.sect == 'home') {
        tag.sz = '300x50';
        tag.key_vals.sz[0] = {'val' : '300x50', 'eval': false};
      }
      else {
        return;
      }
    }
  }
  else if (usa_deviceInfo.mobileDevice && !usa_deviceInfo.smartphone) {
    // TABLET
    if (tag.sz == '728x90,970x66' || tag.sz == '728x90') {
      if (Drupal.settings.USA.DART.is_sponsored || Drupal.settings.USA.DART.values.sub == 'video' || usa_sponsorOverride) {
        // no OPA push down's for tablets thanks! and only if sponsored
        tag.sz == '728x90';
        tag.key_vals.sz[0] = {'val' : '728x90', 'eval': false};
      }
      else {
        // placing them back on
        // return;
        tag.sz == '728x90';
        tag.key_vals.sz[0] = {'val' : '728x90', 'eval': false};
      }
    }
  }
  else {
    // DESKTOP
    // TGIMF overrides
    if (urlParts.length >= 3) {
      if (urlParts[3].toLowerCase() == 'tgimf' || urlParts[3].toLowerCase() == 'adops-test') {
        if (tag.sz == '728x90') {
          // switch 728x90 to 728x90,970x66
          tag.sz = '728x90,970x66';
          tag.key_vals.sz[0] = {'val' : '728x90,970x66', 'eval': false};
          tag.settings.options.method = 'adj';
        }
      }
    }

    // SYNC overrides
    if (urlParts.length >= 4) {
      if (urlParts[3].toLowerCase() == 'social' && urlParts[4].toLowerCase() == 'sync') {
        if (tag.sz == '728x90') {
          // switch 728x90 to 728x90,970x66
          tag.sz = '728x90,970x66';
          tag.key_vals.sz[0] = {'val' : '728x90,970x66', 'eval': false};
          tag.settings.options.method = 'adj';
        }
      }
    }

    if (urlParts.length >= 5) {
      if (urlParts[4].toLowerCase() == 'social' && urlParts[5].toLowerCase() == 'sync') {
        if (tag.sz == '728x90') {
          // switch 728x90 to 728x90,970x66
          tag.sz = '728x90,970x66';
          tag.key_vals.sz[0] = {'val' : '728x90,970x66', 'eval': false};
          tag.settings.options.method = 'adj';
        }
      }
      /* RF PATCH for Gallery dual 728x90 */
      else if (urlParts[4].toLowerCase() == 'photos') {
        if (tag.sz == '728x90') {
          return;
        }
      }
    }
  }


  // check for sponsored
  // hide tune in on desktop and tablet
  // dont show for smartphone at all

  // @TODO: check for sponsor logo size, then sponsor flag

  if (tag.sz == '220x50') {
    // this is a sponsor unit

    if (Drupal.settings.USA.DART.is_sponsored || usa_sponsorOverride) {
      // page is sponsored
      if (usa_deviceInfo.smartphone) {
        // no sponsored logos for smartphones, so hide block and exit
        jQuery('.utilities-sponsored .block-dart').hide();
        return;
      }
      else {
        jQuery('aside.show-time').hide();
        jQuery('#head-sponsored').css('margin', '-1px 150px 0 0'); // @TODO: remove post deploy
      }
    }
    else {
      // dont render this sponsor tag as this page is NOT sponsored
      jQuery('.utilities-sponsored .block-dart').hide();
      return;
    }
  }

  // force smartphones to use JS instead of IFRAMEs
  if (usa_deviceInfo.smartphone) {
    //tag.settings.options.method = 'adj'; // we don't need to force this as 300x50 can now use IFRAMES
  }

  var tagname = tag.settings.options.method == 'adj' ? 'script' : 'iframe';
  var options = tag.settings.options.method == 'adj' ? 'type="text/javascript"' : 'frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"';

  // Allow other modules to include js that can manipulate the tag object.
  var processed_tag = ($ !== undefined) ? $(document).triggerHandler('dart_tag_process', [tag]) : undefined;
  tag = processed_tag !== undefined ? processed_tag : tag;

  if (usa_deviceInfo.smartphone) {
    // SMARTPHONE
    // is this an iframe unit or not?
    if (tag.settings.options.method == 'adi') {
      // set our own iframe
      usa_debug(tag.machinename);
      usa_currentTagObjArray[String(tag.machinename)] = tag;

      //document.write('<center><iframe src="/custom-dart-iframe?key='+tag.machinename+'" frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"></iframe></center>');
      iframeQueue.push({'tag' : tag.machinename, 'html' : '<center><iframe src="/custom-dart-iframe?key='+tag.machinename+'" frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"></iframe></center>'});
      return '';
    }


    tag.key_vals.sz[0] = {'val' : '300x50', 'eval': false};
    delete tag.key_vals.dcopt;
    delete tag.key_vals.tile;
    delete tag.key_vals.pm;
    delete tag.key_vals.tandomad;

    ad = '<' + tagname + ' ' + options + ' src="';

    // previous production mobile network
    // ad +="http://ad.mo.doubleclick.net/DARTProxy/mobile.handler?k=mo.";
    // new DFP mobile network
    ad +="http://ad.mo.doubleclick.net/DARTProxy/mobile.handler?k=N2620/mo.";

    ad += tag.site + "/";
    //ad += tag.zone;
    if (typeof tag.key_vals.sect != 'undefined') {
      var sectVal = (tag.key_vals.sect[0].eval) ? eval(tag.key_vals.sect[0].val) : tag.key_vals.sect[0].val;
      if (sectVal != '') {
        ad += sectVal + "_";
      }
    }

    if (typeof tag.key_vals.sub != 'undefined') {
      var subVal = (tag.key_vals.sub[0].eval) ? eval(tag.key_vals.sub[0].val) : tag.key_vals.sub[0].val;
      if (subVal != '') {
        ad += subVal;
      }
    }
    ad += ";mdeck=1";
    ad += ";site=" + tag.site + ";";
    ad += this.keyVals(tag.key_vals);

    //usa_debug('Smartphone Device Detected, outputting mobile ad tag: ');
  }
  else if (usa_deviceInfo.mobileDevice && !usa_deviceInfo.smartphone) {
    // TABLET

    // is this an iframe unit or not?
    if (tag.settings.options.method == 'adi') {
      // set our own iframe
      usa_debug(tag.machinename);
      usa_currentTagObjArray[String(tag.machinename)] = tag;

      //document.write('<center><iframe src="/custom-dart-iframe?key='+tag.machinename+'" frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"></iframe></center>');
      iframeQueue.push({'tag' : tag.machinename, 'html' : '<center><iframe src="/custom-dart-iframe?key='+tag.machinename+'" frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"></iframe></center>'});
      return '';
    }


    ad = '<' + tagname + ' ' + options + ' src="';
    ad += dart_url + "/";
    ad += tag.network_id !== '' ? tag.network_id + "/" : "";
    ad += tag.settings.options.method + "/";
    ad += tag.prefix + '.' + tag.site + "/"; // + tag.zone;
    if (typeof tag.key_vals.sect != 'undefined') {
      var sectVal = (tag.key_vals.sect[0].eval) ? eval(tag.key_vals.sect[0].val) : tag.key_vals.sect[0].val;
      if (sectVal != '') {
        ad += sectVal + "_";
      }
    }
    if (typeof tag.key_vals.sub != 'undefined') {
      var subVal = (tag.key_vals.sub[0].eval) ? eval(tag.key_vals.sub[0].val) : tag.key_vals.sub[0].val;

      // social recap
      if (urlParts.length >= 5) {
        if (urlParts[3].toLowerCase() == 'suits' && urlParts[4].toLowerCase() == 'socialrecaps') {
          subVal = 'socialrecap';
        }
      }

      if (subVal != '') {
        ad += subVal + '_tablet';
      }
      else {
        ad += 'tablet';
      }
    }
    else {
      ad += 'tablet';
    }
    ad += ";platform=tablet;!c=tablet";
    ad += ";" + this.keyVals(tag.key_vals);

    // usa_debug('Tablet Device Detected, outputting tablet ad tag: ');
  }
  else {
    // DESKTOP
    // is this an iframe unit or not?

    if (tag.settings.options.method == 'adi') {
      // set our own iframe
      usa_debug(tag.machinename);
      usa_currentTagObjArray[String(tag.machinename)] = tag;

      //document.write('<center><iframe src="/custom-dart-iframe?key='+tag.machinename+'" frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"></iframe></center>');
      iframeQueue.push({'tag' : tag.machinename, 'html' : '<center><iframe src="/custom-dart-iframe?key='+tag.machinename+'" frameborder="0" scrolling="no" width="' + tag.sz.split("x")[0] + '" height="' + tag.sz.split("x")[1] + '"></iframe></center>'});
      return '';
    }


    ad = '<' + tagname + ' ' + options + ' src="';
    ad += dart_url + "/";
    ad += tag.network_id !== '' ? tag.network_id + "/" : "";
    ad += tag.settings.options.method + "/";
    ad += tag.prefix + '.' + tag.site + "/"; // + tag.zone;
    if (typeof tag.key_vals.sect != 'undefined') {
      var sectVal = (tag.key_vals.sect[0].eval) ? eval(tag.key_vals.sect[0].val) : tag.key_vals.sect[0].val;
      if (sectVal != '') {
        ad += sectVal + "_";
      }
    }
    if (typeof tag.key_vals.sub != 'undefined') {
      var subVal = (tag.key_vals.sub[0].eval) ? eval(tag.key_vals.sub[0].val) : tag.key_vals.sub[0].val;

      // social recap
      if (urlParts.length >= 5) {
        if (urlParts[3].toLowerCase() == 'suits' && urlParts[4].toLowerCase() == 'socialrecaps') {
          subVal = 'socialrecap';
        }
      }

      if (subVal != '') {
        ad += subVal;
      }
    }
    ad += ";" + this.keyVals(tag.key_vals);

    // usa_debug('Desktop Detected, outputting desktop ad tag: ');
  }
  // Allow other modules to include js that can manipulate the concatenated tag string.
  rendered_ad = ($ !== undefined) ? $(document).triggerHandler('dart_tag_render', [ad]) : undefined;
  ad = rendered_ad !== undefined ? rendered_ad : ad;

  if (!usa_deviceInfo.smartphone)  {
    ad += '"></' + tagname + '>';
  }
  else {
    ad = ad.replace('pm=1;', ''); // temp hack until I work out where this is being appended
    ad += '&forecast=1&csit=1&dw=1"></' + tagname + '>';
  }

  /* DEBUG: output current ad tag
    usa_debug(tag);
    usa_debug(ad);
  */

  if (Drupal.DART.settings.writeTags) {
    //document.write(ad);
    if (tag.sz == '300x250') {
      document.write(ad);
    }
    else {
     document.write('<center>' + ad + '</center>');
    }
  }

  return ad;
};

/* ========= */
// Debug Info Function
/* ========= */
function usa_debugTablet(msg) {
  if (usa_deviceInfo.mobileDevice) {
    jQuery('body').append('<div style="color:#ffffff"><hr><pre>' +JSON.stringify(msg, null, 4)+ '</pre></div><br><br><br><br>');
  }
}

/* ========= */
// Auto Ad Refresh Functions
/* ========= */
function usa_refreshBannerAd() {
  usa_debug('LEGACY: usa_refreshBannerAd()');

  // 220x60
  if (jQuery('#block-dart-dart-tag-220x60-sponsor-logo iframe').length > 0) {
    jQuery('#block-dart-dart-tag-220x60-sponsor-logo iframe').attr('src', jQuery('#block-dart-dart-tag-220x60-sponsor-logo iframe').attr('src'));
  }
  // 728x90
  if (jQuery('#block-dart-dart-tag-728x90-ifr-reload iframe').length > 0) {
    jQuery('#block-dart-dart-tag-728x90-ifr-reload iframe').attr('src', jQuery('#block-dart-dart-tag-728x90-ifr-reload iframe').attr('src'));
  }
  // 300x250
  if (jQuery('#block-dart-dart-tag-300x250-ifr-reload iframe').length > 0) {
    jQuery('#block-dart-dart-tag-300x250-ifr-reload iframe').attr('src', jQuery('#block-dart-dart-tag-300x250-ifr-reload iframe').attr('src'));
  }
  // 728x90_970x66
  if (jQuery('#block-dart-dart-tag-728x90_970x66_ifr_rel iframe').length > 0) {
    jQuery('#block-dart-dart-tag-728x90_970x66_ifr_rel iframe').attr('src', jQuery('#block-dart-dart-tag-728x90_970x66_ifr_rel iframe').attr('src'));
  }

  // omniture
  if (typeof s_gi != 'undefined') {
    if (typeof s != 'undefined') {
      if (typeof s.prop10 != 'undefined') {
        void (s.t());
      }
    }
  }
}

var usa_adRefreshTO;
function usa_timedAdRefreshes(time) {
  usa_debug('LEGACY: usa_timedAdRefreshes()');

  usa_refreshBannerAd();
  usa_adRefreshTO = setTimeout("usa_timedAdRefreshes("+time+")", time);
}
function usa_setupTimedAdRefreshes(time) {
  usa_debug('LEGACY: usa_setupTimedAdRefreshes()');

  usa_adRefreshTO = setTimeout("usa_timedAdRefreshes("+time+")", time);
}


/* ========= */
// Page Load
/* ========= */
jQuery(document).ready(function() {
  usa_debug('LEGACY: document ready code');

  // auto ad refresh setup
  var usa_setupRefresh = false;
  var usa_refreshTime = 60; // in secs
  // node checkbox for refresh
  if (typeof Drupal.settings.USA.refreshSettings != 'undefined') {
    if (Drupal.settings.USA.refreshSettings.isAutomaticRefresh == '1') {
      usa_setupRefresh = true;
      usa_refreshTime = parseInt(Drupal.settings.USA.refreshSettings.refreshTime);
    }
  }

  // setup the refresh
  if (usa_setupRefresh && typeof s != 'undefined') {
    usa_setupTimedAdRefreshes(usa_refreshTime*1000);
    usa_debug('Ad Refresh Engaged!');
  }


  // green week logo
  //jQuery('#logo a').css('color', '#4fb026');
  //jQuery('.ie8 #logo a').css('background-image', 'url(http://assets.usanetwork.com/usanetwork/logo-usa-earthweek.png)');


  // write iframe ad units to page
  if (iframeQueue.length > 0) {
    // 728x90 first
    for (var i=0 ; i<iframeQueue.length ; i++) {
      if (iframeQueue[i].tag.indexOf('728x90') != '-1') {
        jQuery('.dart-name-' + iframeQueue[i].tag).html(iframeQueue[i].html);
      }
    }
    // 300x250 second
    for (var i=0 ; i<iframeQueue.length ; i++) {
      if (iframeQueue[i].tag.indexOf('300x250') != '-1') {
        jQuery('.dart-name-' + iframeQueue[i].tag).html(iframeQueue[i].html);
      }
    }
    // 220x60 last
    for (var i=0 ; i<iframeQueue.length ; i++) {
      if (iframeQueue[i].tag.indexOf('220x60') != '-1') {
        jQuery('.dart-name-' + iframeQueue[i].tag).html(iframeQueue[i].html);
      }
    }
  }
});

var dart_url = "http://ad.doubleclick.net";
var tile = 1;
var ord = 1000000000 + Math.floor(Math.random() * 900000000);</script>
<script>/* == Homepage GLAAD Spirit Day Logo Change - Oct 15, 2015 ===================================== */
/*
jQuery(document).ready(function() {
  if (jQuery('body').hasClass('page-home')) {
    var start = new Date(2016,4,17,00,00,01).getTime(),
        end = new Date(2016,4,22,23,59,59).getTime(),
        current = new Date().getTime();
    //if (start < current && current < end) {
      jQuery('body header .usa-logo.show-color a').css({'background-color': '#5aad1a'});
    //}
  }
});
*/

/* =============== ADD SOCIAL FEED TO THE "6 QUESTIONS FOR MR. ROBOT SECOND SEASON" CONSUMPTIONATER POST PAGE ===================
var wPath = window.location.pathname;
if (wPath.indexOf('mr-robot-blog/burning-questions-for-mr-robots-second-season') > -1) {
  jQuery(document).ready(function(){
    setTimeout(function(){
      var newHtml = '<div class="block-character-social-content"><div class="social-block show-border"><div class="mr-space" id="mr-space_mrrobots2" data-space-id="usa-network/mrrobots2" style="min-height: 500px;"></div></div></div>',
          $appendElement = jQuery('#block-usanetwork-consumptionator-post-usanetwork-cons-post-main .post-info-main-block'),
          $prevNextElements = jQuery('.consumptionator-post-main-block .post-info-main-block .episode-change-link');
      $appendElement.append(newHtml);
      !function(a,b,c,d,e,f,g,h,i,j,k){h=a[d]=a[d]||{},h.ui=h.ui||[],i=a[e]=a[e]||{},i[f]||(j=b.getElementsByTagName(c)[0],k=b.createElement(c),k.src="//platform.massrelevance.com/js/massrel.js",j.parentNode.insertBefore(k,j),i[f]=function(){h.ui.push([].slice.call(arguments))}),i[f]("load",{el:b.getElementById(g)})}(window,document,"script","massrel","spredfast","exp","mr-space_mrrobots2");
      setTimeout(function(){
        var socialHeight = parseInt($appendElement.find('.block-character-social-content').height() + 39);
        $prevNextElements.css({'bottom': socialHeight + 'px'});
      }, 2000);
    }, 3000);
  });
}
*/

/* == Set auto ad and Omniture refresh for "Tune in to Mr. Robot" -- Spotify Consumptionator Blog page ============================= */
jQuery(document).ready(function() {
  var wUrl = window.location.pathname;
  if (wUrl == '/mrrobot/blog/mr-robot-blog/tune-in-to-mr-robot') {
    setInterval(function(){
      Drupal.behaviors.mpsAdvert.mpsRefreshAd('topbanner topbox');
      s.tl();
    }, 60000);
  }
});


/* == Homepage Minions ===================================== */
/*
jQuery(document).ready(function() {
  // example homepage animation for Minions
  if (jQuery('body').hasClass('page-home')) {
    jQuery('body').append('<div class="hdr-minions" style="background-image: url(http://1.bp.blogspot.com/-zcepnmORnxg/UioQcV57StI/AAAAAAAACjk/ps8cmgPhgg8/s1600/minion_icon_image_picfishblogspotcom+%252811%2529.png);  width: 95px;  height: 100px;  position: absolute;  top: 150px;  left: 17px;  background-size: contain;  background-repeat: no-repeat;  z-index: -1;-webkit-transition: top 1s;  transition: top 1s;"><a href="http://www.minionsmovie.com/" target="_blank"><span style="display:none;">Minions Promo for New Movie</span></a></div>');
    setTimeout(function(){jQuery('.hdr-minions').css('top','50px');}, 2000);
  }
});
*//*
jQuery(document).ready(function() {
  // example homepage animation for Minions
  if (jQuery('body').hasClass('page-home')) {
    var wwidth = jQuery(window).width(),
        easeOutBackBottom = '-10%',
        finalBottom = '0';
    jQuery('#minions').remove();
    jQuery('body header .header-nav-bar .show-color.secondary').css({'background-color': '#FFF'});
    jQuery('body header .header-nav-bar .usa-logo a').css({'outline': 'none', 'background-image': 'url("http://assets.usanetwork.com/usanetwork/minions/usa_logo_minionyellow.png")'});
    jQuery('header .usa-logo').css('position', 'relative').append('<a id="minions-link" href="http://www.minionsmovie.com" target="_blank" style="position: absolute; bottom: -0.5%; left: 0; width: 100%; height: 44%; overflow: hidden; background-image: none"><div id="minions" style="position: absolute; bottom: -100%; left: 0; width: 100%; height: 100%; background-image: url(http://assets.usanetwork.com/usanetwork/minions/usa_minions_252x79.png); background-position: center; background-size: contain; background-repeat: no-repeat"><span style="display: none">Minions Promo for New Movie</span></div></a>');
    setTimeout(function(){
      jQuery('#minions').animate({'bottom': '-69%'}, 500, function(){
        jQuery(this).delay(2000).animate({'bottom': '-100%'}, 800, function(){
          if (wwidth <= 1024 && wwidth > 768) jQuery('header .usa-logo a#minions-link').css('bottom', '-5%');
          jQuery(this).delay(1000).animate({'bottom': easeOutBackBottom}, 100, 'easeOutBack', function(){
            jQuery(this).delay(50).animate({'bottom': finalBottom}, 200);
          });
        });
      });
    }, 2000);
  }
});
*/



/* == Homepage CSS Tweaks ===================================== */
jQuery(document).ready(function() {
  yepnope.injectCss("http://assets.usanetwork.com/usanetwork/css/site.css", function () {
    // CSS Overrides loaded
  });
});





/* == Newsletter Handling ===================================== */
jQuery(document).ready(function() {
  jQuery('#block-usanetwork-lyris-newsletter-subscription').css('display', 'none');
});
function usa_newsletterShowHide() {
  if (jQuery('#block-usanetwork-lyris-newsletter-subscription').css('display') != 'none') {
    jQuery('#block-usanetwork-lyris-newsletter-subscription').css('display', 'none');
  } else {
    jQuery('#block-usanetwork-lyris-newsletter-subscription').css('display', 'block');
  }
}



/* == Admin Tool Tweaks ===================================== */
/*
var usa_setHomepageDefaults;
var usa_setTVShowDefaults;
jQuery(document).ready(function() {
  if (jQuery('body').hasClass('page-node-edit') && jQuery('body').hasClass('node-type-usanetwork-aspot')) {
    jQuery('.aspot-draggable-element').draggable({ grid: [1, 1] }).css("position", "absolute");
    usa_setHomepageDefaults = function() {
	jQuery('#mobile-aspot-draggable-title_prefix').css({left: '40px',position: 'absolute',top: '280px'});
	jQuery('#mobile-aspot-draggable-title').css({left: '40px',position: 'absolute',top: '296px'});
	jQuery('#mobile-aspot-draggable-cta_button_0').css({left: '40px',position: 'absolute',top: '400px'});
	jQuery('#aspot-draggable-title_prefix').css({left: '64px',position: 'absolute',top: '240px'});
	jQuery('#aspot-draggable-title').css({left: '64px',position: 'absolute',top: '256px'});
	jQuery('#aspot-draggable-cta_button_0').css({left: '64px',position: 'absolute',top: '368px'});
    }
    usa_setTVShowDefaults = function() {
	jQuery('#mobile-aspot-draggable-tv_show-title_prefix').css({left: '56px',position: 'absolute',top: '376px'});
	jQuery('#mobile-aspot-draggable-tv_show-title').css({left: '56px',position: 'absolute',top: '392px'});
	jQuery('#mobile-aspot-draggable-tv_show-cta_button_0').css({left: '56px',position: 'absolute',top: '464px'});
	jQuery('#aspot-draggable-tv_show-title_prefix').css({left: '48px',position: 'absolute',top: '337px'});
	jQuery('#aspot-draggable-tv_show-title').css({left: '46px',position: 'absolute',top: '353px'});
	jQuery('#aspot-draggable-tv_show-cta_button_0').css({left: '48px',position: 'absolute',top: '433px'});

    }
    jQuery('.vertical-tabs-list').append('<li class="vertical-tab-button last"><a href="javascript:void(0);" onclick="usa_setHomepageDefaults()"><strong>Homepage A-Spot</strong><span class="summary">Set Defaults</span></a></li>');
    jQuery('.vertical-tabs-list').append('<li class="vertical-tab-button last"><a href="javascript:void(0);" onclick="usa_setTVShowDefaults()"><strong>TV Show A-Spot</strong><span class="summary">Set Defaults</span></a></li>');
  }
});
*/

/* =============================== */
/* NBCUUSA-870 */
jQuery(document).ready(function() {
  if (jQuery('body').hasClass('page-node-cast')) {
    jQuery('#block-usanetwork-person-usanetwork-person-cast-lmb-block').addClass('show-border');
  }
});


/* =============================== */
/* Social Module Height */
function usa_maximizeHeightOfSocialBlock() {
  var newHeight = window.innerHeight - jQuery('.region-header').height() - jQuery('h2.section-title').height() - 50;
  jQuery('#block-usanetwork-mpx-video-usanetwork-social-content .content').css('max-height',String(newHeight) + 'px', 'important');
  jQuery('#block-usanetwork-mpx-video-usanetwork-social-content .show-border').css('max-height',String(newHeight) + 'px', 'important');
  jQuery('.mr-space').each(function () {
    this.style.setProperty( 'height', String(newHeight) + 'px', 'important' );
  });
}

function usa_setVideoSrc() {
  if (usa_deviceInfo.mobileDevice && jQuery('#pdk-player').length > 0) {
    if (jQuery('#pdk-player').attr('src') == '') {
      jQuery('#pdk-player').attr('src', String(jQuery('#pdk-player').attr('data-src')));
    }
  }
}

jQuery(document).ready(function() {
  setTimeout('usa_maximizeHeightOfSocialBlock()', 1000);
  usa_setVideoSrc();
});


/* ==== Add BMW sponsor link and tracking pixel to Royal Pains Blog =============== */
/*
jQuery(document).ready(function(){
  var wUrl = window.location.href;
  if (wUrl.indexOf('royalpains/blog') > -1) {
    var wwidth = jQuery(window).width(),
        $blogHeader = jQuery('body.blog .blog-header'),
        timestamp = new Date().getTime(),
        link = '<div id="rp-blog-bmw-sponsor-links"><!-- <a id="rp-blog-bmw-sponsor-link" href="https://ad.doubleclick.net/ddm/trackclk/N8295.128147.NBCUNIVERSAL/B8516388.118225838;dc_trk_aid=291376479;dc_trk_cid=63186643"><span>Presented by BMW</span></a> --><a id="rp-blog-bmw-sponsor-link" href="http://www.bmwusa.com/"><span>Presented by BMW</span></a><a id="rp-blog-bmw-imp" href="https://ad.doubleclick.net/ddm/trackimp/N8295.128147.NBCUNIVERSAL/B8516388.118225838;dc_trk_aid=291376479;dc_trk_cid=63186643;ord=' + timestamp + '?"></a></div>';
    $blogHeader.append(link);
    $blogHeader.find('#rp-blog-bmw-sponsor-links').click(function(){
      window.location.href = '/royalpains/hamptonsbeyondthehedges';
    });
  }
});
*/



/**
 * Gigya sharebar.
 */
var wUrl = window.location.href;
if (wUrl.indexOf('suits/socialrecaps') > -1) {
  (function ($) {
      /**
       * @todo Undocumented Code!
       */
      Drupal.gigya = Drupal.gigya || {};
      Drupal.gigya.showSharebar = function (settings) {
        if ((settings.gigyaSharebar.hasOwnProperty('facebookDialogType') && settings.gigyaSharebar.facebookDialogType == '') || !settings.gigyaSharebar.hasOwnProperty('facebookDialogType')) {
          settings.gigyaSharebar.facebookDialogType = 'feed';
        }

        //build a media object
        var mediaObj = {type: 'image', href: settings.gigyaSharebar.ua.linkBack};
        if ((settings.gigyaSharebar.ua.imageBhev === 'url') && (settings.gigyaSharebar.ua.imageUrl !== '')) {
          mediaObj.src = settings.gigyaSharebar.ua.imageUrl;
        }
        else if (settings.gigyaSharebar.ua.imageBhev === 'default') {
          if ($('meta[property="og:image"]').length > 0) {
            mediaObj.src = $('meta[property="og:image"]').attr('content');
          }
          else {
            mediaObj.src = $('#block-system-main img').eq(0).attr('src') || $('img').eq(0).attr('src');
          }
        }
        else {
          mediaObj.src = $('#block-system-main img').eq(0).attr('src') || $('img').eq(0).attr('src');
        }
        // Step 1: Construct a UserAction object and fill it with data.
        var ua = new gigya.services.socialize.UserAction();
        if (typeof settings.gigyaSharebar.ua.userMessage !== 'undefined') {
          ua.setUserMessage(settings.gigyaSharebar.ua.userMessage);
        }
        if (typeof settings.gigyaSharebar.ua.linkBack !== 'undefined') {
          ua.setLinkBack(settings.gigyaSharebar.ua.linkBack);
          ua.addActionLink(settings.gigyaSharebar.ua.title, settings.gigyaSharebar.ua.linkBack);
        }
        if (typeof settings.gigyaSharebar.ua.title !== 'undefined') {
          ua.setTitle(settings.gigyaSharebar.ua.title);
        }
        if (typeof settings.gigyaSharebar.ua.subtitle !== 'undefined') {
          ua.setSubtitle(settings.gigyaSharebar.ua.subtitle);
        }
        if (typeof settings.gigyaSharebar.ua.description !== 'undefined') {
          ua.setDescription(settings.gigyaSharebar.ua.description);
        }
        ua.addMediaItem(mediaObj);
        // Step 2: Define the Share Bar Plugin's params object.
        var params = jQuery.extend(true, {}, settings.gigyaSharebar);
        delete params.ua;
        params.userAction = ua;
        // Step 3: Load the Share Bar Plugin.
        gigya.services.socialize.showShareBarUI(params);

      };
      Drupal.behaviors.gigyaShareBar = {
        attach: function (context, settings) {
          if (typeof gigya !== 'undefined') {
            if (typeof Drupal.settings.gigyaSharebars != 'undefined') {
              $.each(Drupal.settings.gigyaSharebars, function (index, sharebar) {
                Drupal.gigya.showSharebar(sharebar);
              });
            }
          }
        }
      };
  })(jQuery);
}
</script>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/js_RMvL3d6EjtDMGY-LKwH6m9Md-6rKJ48l_0kRIa0-3Oc.js"></script><style type="text/css"></style>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/js_brvZGCNu5VjqHT2OfBKTQ4FmDG2_mV1FBcZ96294OEM.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"aurora_usa","theme_token":"qiEiwJgxRDD1Z-rqxvRb1lcmjWiQl1CVJ_m--QNBJak","jquery_version":"1.7","js":{"sites\/usanetwork\/libraries\/modernizr\/modernizr.custom.89692.js":1,"0":1,"profiles\/publisher\/modules\/contrib\/jquery_update\/replace\/jquery\/1.7\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"profiles\/publisher\/modules\/contrib\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"profiles\/publisher\/modules\/contrib\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"profiles\/publisher\/modules\/contrib\/jquery_update\/js\/jquery_update.js":1,"sites\/usanetwork\/modules\/contrib\/environment_indicator\/tinycon.min.js":1,"sites\/usanetwork\/modules\/contrib\/environment_indicator\/environment_indicator.js":1,"sites\/usanetwork\/modules\/contrib\/environment_indicator\/color.js":1,"profiles\/publisher\/modules\/custom\/tve_mvpd\/js\/tve_mvpd.js":1,"sites\/usanetwork\/modules\/custom\/usanetwork_umbel\/js\/usanetwork_umbel.js":1,"sites\/usanetwork\/modules\/contrib\/lazyloader\/jquery.lazyloader.js":1,"\/\/assets.adobedtm.com\/5ed6cf59538a2045d9fe4799a3f70da302c83d5a\/satelliteLib-24e397569ca85a58d3963043838c6696e85c5e9a.js":1,"sites\/usanetwork\/modules\/contrib\/panels\/js\/panels.js":1,"sites\/usanetwork\/modules\/contrib\/views_slideshow\/js\/views_slideshow.js":1,"sites\/usanetwork\/modules\/contrib\/gigya\/js\/gigya.js":1,"sites\/usanetwork\/modules\/contrib\/gigya\/js\/gigya.behaviors.js":1,"misc\/progress.js":1,"profiles\/publisher\/modules\/contrib\/ctools\/js\/ajax-responder.js":1,"profiles\/publisher\/modules\/contrib\/focal_point\/js\/focal_point.js":1,"sites\/usanetwork\/modules\/custom\/usanetwork_aspot\/js\/usanetwork_aspot_home_page.giui.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/aspot-block.js":1,"1":1,"2":1,"sites\/usanetwork\/modules\/contrib\/views_load_more\/views_load_more.js":1,"profiles\/publisher\/modules\/contrib\/dart\/js\/dart.js":1,"3":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/variables-and-functions.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/global-carousels.js":1,"sites\/usanetwork\/libraries\/tve\/dist\/tve-libraries.min.js":1,"4":1,"sites\/usanetwork\/modules\/custom\/usanetwork_ads\/js\/omniture.js":1,"sites\/usanetwork\/modules\/contrib\/gigya\/js\/gigya_comments.js":1,"sites\/usanetwork\/modules\/custom\/usanetwork_dtm\/js\/usa-tve-analytics.js":1,"5":1,"sites\/usanetwork\/modules\/custom\/usanetwork_chartbeat\/js\/usanetwork_chartbeat.js":1,"sites\/usanetwork\/modules\/custom\/usanetwork_umbel\/js\/usanetwork_umbel_main.js":1,"6":1,"7":1,"profiles\/publisher\/modules\/custom\/tve_adobe_pass\/lib\/swfobject.min.js":1,"profiles\/publisher\/modules\/custom\/tve_adobe_pass\/js\/tve_adobe_pass.js":1,"sites\/usanetwork\/libraries\/tve\/dist\/tve-core.min.js":1,"sites\/usanetwork\/modules\/custom\/usanetwork_ads\/js\/device-detect.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/USAN.js":1,"8":1,"9":1,"10":1,"11":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/jquery.xdomainrequest.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/velocity.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/filter-dropdown.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/font-feature-detection.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/tableheader.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/jquery.mCustomScrollbar.concat.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/matchmedia.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/picturefill.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/viewportchecker.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/mps-advert.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/mps-sponsorship.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/jquery.easing.1.3.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/jquery.touchSwipe.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/jquery.jcarousel.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/jquery.jcarousel-control.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/slick.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/consumptionator-carousels.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/lazy-load-custom.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/spin.min.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/usa_new_show_design\/usa_script.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/headroom.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/usa_new_show_design\/usa_header.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/usa_new_show_design\/usa_menu-dropdown.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/usa_new_show_design\/usa_carousels.js":1,"sites\/usanetwork\/themes\/aurora_usa\/javascripts\/usa_new_show_design\/usa_to-top.js":1,"sites\/usanetwork\/libraries\/flexslider\/jquery.flexslider-min.js":1,"sites\/usanetwork\/libraries\/jRespond\/jRespond.min.js":1,"sites\/usanetwork\/libraries\/jpanelmenu\/jquery.jpanelmenu.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"profiles\/publisher\/modules\/contrib\/media_theplatform_mpx\/css\/media_theplatform_mpx.css":1,"modules\/comment\/comment.css":1,"profiles\/publisher\/modules\/contrib\/date\/date_api\/date.css":1,"profiles\/publisher\/modules\/contrib\/date\/date_popup\/themes\/datepicker.1.7.css":1,"profiles\/publisher\/modules\/contrib\/entityreference_live_preview\/entityreference_live_preview.css":1,"sites\/usanetwork\/modules\/contrib\/environment_indicator\/environment_indicator.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"profiles\/publisher\/modules\/contrib\/views\/css\/views.css":1,"sites\/usanetwork\/modules\/contrib\/lazyloader\/lazyloader.css":1,"profiles\/publisher\/modules\/contrib\/ctools\/css\/ctools.css":1,"sites\/usanetwork\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/usanetwork\/modules\/contrib\/views_slideshow\/views_slideshow.css":1,"profiles\/publisher\/modules\/contrib\/focal_point\/css\/focal_point.css":1,"sites\/usanetwork\/modules\/custom\/usanetwork_layouts\/plugins\/layouts\/usa_new_showlanding\/usa_new_showlanding.css":1,"public:\/\/css\/promo_icon.css":1,"sites\/usanetwork\/themes\/aurora_usa\/stylesheets\/style.css":1,"sites\/usanetwork\/themes\/aurora_usa\/static-stylesheets\/static-style.css":1,"public:\/\/tv_show_color\/tv_show_color_schema.css":1,"public:\/\/movie_color\/movie_color_schema.css":1}},"gigya":{"enabledProviders":"Facebook, Twitter","lang":"en","connectWithoutLoginBehavior":"loginExistingUser","mv":"mayor","loginMode":"gigya"},"gigyaComments":{"commentsUIparams":{"categoryID":"USA Blogs","streamID":"56156","containerID":"comments","scope":"both","privacy":"private","context":{"id":"comments"},"version":2,"enabledShareProviders":"facebook,twitter,linkedin","showLoginBar":true}},"usanetwork_tv_shows":{"promo_rows":"1"},"ajax":{"edit-submit--2":{"callback":"newsletter_lyris_ajax_callback","wrapper":"newsletter_lyris_ajax_wrapper","method":"replaceWith","effect":"fade","validate_first":true,"event":"mousedown","keypress":true,"prevent":"click","url":"\/system\/ajax","submit":{"_triggering_element_name":"op","_triggering_element_value":"submit"}},"edit-submit--3":{"callback":"newsletter_lyris_ajax_callback","wrapper":"newsletter_lyris_ajax_wrapper_additional","method":"replaceWith","effect":"fade","validate_first":true,"event":"mousedown","keypress":true,"prevent":"click","url":"\/system\/ajax","submit":{"_triggering_element_name":"op","_triggering_element_value":"submit"}}},"DART":{"bgAdVars":[]},"tve_player":[],"chartbeat_domain":"usanetwork.com","chartbeat_type":null,"analytics":{"brandSuiteId":"nbcuglobal,nbcuusanetworkd","tveSuiteId":"nbcutve,nbcuusanetworkd"},"umbel_code":"iwgdlxrtqfiiortz","umbel_settings":{"usa_umbel_param_1":"Mr. Robot","usa_umbel_param_2":"Landing Page","usa_umbel_param_3":"Homepage"},"umbel_env":"1","USA":{"DART":{"values":{"sect":"other","sub":"home","sub2":""},"is_sponsored":false},"refreshSettings":{"isAutomaticRefresh":"0","refreshTime":""},"adobeTagLoader":{"tagContainerDC":"d2","tagContainerNamespace":"nbcuniversal","tagContainerName":"USANetwork"}},"adobePass":{"adobePassAccessEnablerLoc":"http:\/\/entitlement.auth.adobe.com\/entitlement\/AccessEnabler.swf","adobePassTimeoutLength":"30000","adobePassFlashVer":"10.1.13","adobePassRequestorId":"usa","adobePassResourceId":"usa","errorMessages":{"authorized_err":"Your TV subscription does not include this channel. Please contact your TV Provider about upgrading your service to get access.","internal_err":"We had a problem reaching your TV provider. Please try again.","generic_err":"Your TV subscription does not include this channel."}}});</script>
    <!--[if IE 8 ]>
      <script src="http://www.usanetwork.com/sites/usanetwork/themes/aurora_usa/javascripts/respond.min.js"></script>
      <script src="http://www.usanetwork.com/sites/usanetwork/themes/aurora_usa/javascripts/jquery-extra-selectors.js"></script>
      <script src="http://www.usanetwork.com/sites/usanetwork/themes/aurora_usa/javascripts/ie8.js"></script>
    <![endif]-->
  <script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/pubads_impl_91.js" async=""></script><script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/s-code-contents-44a3ac690c3ebbe6fa39b9a0a60f023aaceca5ce.js"></script><script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/automagic" async=""></script><script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/pubads.js" type="text/javascript"></script><link rel="prefetch" href="http://tpc.googlesyndication.com/safeframe/1-0-4/html/container.html"><script async="" type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/controltag"></script><script async="" type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/LightningBolt.js"></script><script src="http://partner.googleadservices.com/gpt/pubads_impl_91.js" async=""></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><link rel="prefetch" href="http://tpc.googlesyndication.com/safeframe/1-0-4/html/container.html"><script async="" type="text/javascript" src="http://cdn.krxd.net/controltag?confid=Hhr_tqXM"></script><script async="" type="text/javascript" src="http://cdn-akamai.mookie1.com/LB/LightningBolt.js"></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><link rel="prefetch" href="http://tpc.googlesyndication.com/safeframe/1-0-4/html/container.html"><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><script async="" type="text/javascript" src="http://cdn.krxd.net/controltag?confid=Hhr_tqXM"></script><script async="" type="text/javascript" src="http://cdn-akamai.mookie1.com/LB/LightningBolt.js"></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><script type="text/javascript" async="" charset="utf-8" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/utag.20.js?utv=ut4.39.201603171813" id="x_axis_xaxis.-xaxis_20"></script><link rel="prefetch" href="http://tpc.googlesyndication.com/safeframe/1-0-4/html/container.html"><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><script async="" type="text/javascript" src="http://cdn.krxd.net/controltag?confid=Hhr_tqXM"></script><script async="" type="text/javascript" src="http://cdn-akamai.mookie1.com/LB/LightningBolt.js"></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><script src="//www.nbcudigitaladops.com/hosted/pubads.js" type="text/javascript"></script><span class="kxtag kxinvisible" data-id="59177" data-alias="Author Scraper"><script>
(function() {
  Krux('set', 'page_attr_nbcu_authors', typeof window._sf_async_config === 'object' && window._sf_async_config['authors']);
})();
</script></span><span class="kxtag kxinvisible" data-id="13132" data-alias="Krux Scraper - sym and xa"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "sym,xa".split(",")
  });

</script></span><span class="kxtag kxinvisible" data-id="14704" data-alias="AudienceScience - P&amp;G"><script language="JavaScript" type="text/javascript" src="//js.revsci.net/gateway/gw.js?csid=F09828&amp;auto=t&amp;bpid=nbcu"></script></span><span class="kxtag kxinvisible" data-id="10688" data-alias="Krux Scraper - Hierarchy and Attributes"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "aff,area,b,chan,daypart,genre,f,package,pkid,ref,season,sect,show,site,sport,sub,sub2,t,tag,type,pageid".split(",")
  });
  // Set section/subsection
  Krux('set', {
    section: Krux('get', 'domain'),
    subsection: Krux('get', 'page_attr_dart_sect')
  });
</script></span><span class="kxtag kxinvisible" data-id="10957" data-alias="Internal NBC Metrics: SNAS - (w/SegFilterActive)"><script>var __nbcsnasadops={init:function(){if(!top.__nbcudigitaladops_header){return false}this.segfilter=['94118g','12053g','55053g','65151g','15112g','43118g'];this.h=top.__nbcudigitaladops_header;this.sc='snas';this.dc='snas_d';this.nic='snas_noinfo';this.drtp='ssg';this.s=this.h.gc(this.sc)||'';this.d=this.h.gc(this.dc)||'';this.ni=this.h.gc(this.nic)||'';this.u='';this.cookiesEnabled=document.cookie.length>0;if(this.ni){return false}if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.s){this.u=this.extractUUID();this.getDemoByUUID()}else{this.getGlobal()}}},populateDartTags:function(){if(!this.d){return false}var demo=this.d.indexOf('%')>-1?unescape(this.d):this.d;var sdarr=demo.split(';');for(var i=0;i<sdarr.length;i++){for(var j=0;j<this.segfilter.length;j++){if(sdarr[i]==this.segfilter[j]){this.h.dtprm(this.drtp+'='+sdarr[i]+';')}}}},getGlobal:function(){var callback='__nbcsnasadops.doSCallback';var url='http://snas.nbcuni.com/snas/api/getRemoteDomainCookies?callback=';this.jsonp(url,callback)},doSCallback:function(j){if(!j||!j.cookie){return false}this.s=j.cookie[this.sc]||'';if(!this.s){this.setNoInfoCookie();return false}this.u=this.extractUUID();this.d=j.cookie[this.dc]||'';if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.u){this.getDemoByUUID()}else{this.setNoInfoCookie()}}},getDemoByUUID:function(){var callback='__nbcsnasadops.doUCallback';var url='http://demographics.nbcuni.com/demographics/api/getFormattedPersonDemographics/';url+=this.u+'/bt-in-script/';this.jsonp(url,callback)},doUCallback:function(j){if(!j||!j.personDemographics){return false}var d=j.personDemographics||'';if(d){this.d=d;this.populateDartTags();this.setLocalCookies()}},extractUUID:function(){if(this.s.indexOf('data='>-1)){var uuid=this.s.replace(/.*data=(\w+).*/i,"$1");return uuid}return''},setLocalCookies:function(){if(this.d&&(!this.h.gc(this.dc))){var demo=this.d.indexOf(';')>-1?escape(this.d):this.d;var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.dc+'='+demo+'; expires='+d+'; path=/;';document.cookie=c}if(this.s&&(!this.h.gc(this.sc))){var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.sc+'='+this.s+'; expires='+d+'; path=/;';document.cookie=c}return true},saveNBCUNIMetricsDataLocal:function(){},setNoInfoCookie:function(){var c=this.nic+'=1; expires=; path=/;';document.cookie=c},jsonp:function(src,cbk){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=src+=cbk;var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;script.onload=script.onreadystatechange=null;head.removeChild(script)}};head.appendChild(script)}};__nbcsnasadops.init();</script></span><span class="kxtag kxinvisible" data-id="10971" data-alias="Internal NBC Metrics: SNAS - saveActivity"><script>
if( top.__nbcudigitaladops_header ){
        top.__nbcudigitaladops_header.fnc = function(){
                var uuid = '';
                var s = top.__nbcudigitaladops_header.gc('snas');
                if(s.indexOf('data='>-1)){
                        uuid = s.replace(/.*data=(\w+).*/i,"$1");
                }else{
                        var sn_user = unescape(top.__nbcudigitaladops_header.gc('sn_nbc_b')).split('|');
                        uuid = sn_user[1];
                }
                if( !uuid ){ return false; }
                var rand = Math.round(Math.random()*1000000000000);
                var snas_d = top.__nbcudigitaladops_header.gc('snas_d');
                if(snas_d.indexOf('%')>-1){ snas_d = unescape(snas_d); }
                var docurl = document.location.href+'';
                var siteurlpieces = document.location.hostname.split('.');
                var siteurl = siteurlpieces[siteurlpieces.length-2]+'.'+siteurlpieces[siteurlpieces.length-1];
                var snasurl = 'http://snas.nbcuni.com/snas/api/saveActivity?URL='+escape(docurl);
                snasurl += '&contentType=PAGE&personUUID='+uuid+'&siteName='+siteurl+'&siteDomainName='+siteurl;
                snasurl += '&snas_d='+snas_d+'&rand='+rand;
                document.write('<img src="'+snasurl+'" width="1" height="1" />');
        };
        top.__nbcudigitaladops_header.fnc();
}
</script></span><span class="kxtag kxinvisible" data-id="10993" data-alias="Quantcast - Simple Tag"><script>
  _qacct="p-9eJ8k4iSzux46";
</script>
<script src="//secure.quantserve.com/quant.js"></script></span><span class="kxtag kxinvisible" data-id="59177" data-alias="Author Scraper"><script>
(function() {
  Krux('set', 'page_attr_nbcu_authors', typeof window._sf_async_config === 'object' && window._sf_async_config['authors']);
})();
</script></span><span class="kxtag kxinvisible" data-id="13132" data-alias="Krux Scraper - sym and xa"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "sym,xa".split(",")
  });

</script></span><span class="kxtag kxinvisible" data-id="14704" data-alias="AudienceScience - P&amp;G"><script language="JavaScript" type="text/javascript" src="//js.revsci.net/gateway/gw.js?csid=F09828&amp;auto=t&amp;bpid=nbcu"></script></span><span class="kxtag kxinvisible" data-id="10688" data-alias="Krux Scraper - Hierarchy and Attributes"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "aff,area,b,chan,daypart,genre,f,package,pkid,ref,season,sect,show,site,sport,sub,sub2,t,tag,type,pageid".split(",")
  });
  // Set section/subsection
  Krux('set', {
    section: Krux('get', 'domain'),
    subsection: Krux('get', 'page_attr_dart_sect')
  });
</script></span><span class="kxtag kxinvisible" data-id="10957" data-alias="Internal NBC Metrics: SNAS - (w/SegFilterActive)"><script>var __nbcsnasadops={init:function(){if(!top.__nbcudigitaladops_header){return false}this.segfilter=['94118g','12053g','55053g','65151g','15112g','43118g'];this.h=top.__nbcudigitaladops_header;this.sc='snas';this.dc='snas_d';this.nic='snas_noinfo';this.drtp='ssg';this.s=this.h.gc(this.sc)||'';this.d=this.h.gc(this.dc)||'';this.ni=this.h.gc(this.nic)||'';this.u='';this.cookiesEnabled=document.cookie.length>0;if(this.ni){return false}if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.s){this.u=this.extractUUID();this.getDemoByUUID()}else{this.getGlobal()}}},populateDartTags:function(){if(!this.d){return false}var demo=this.d.indexOf('%')>-1?unescape(this.d):this.d;var sdarr=demo.split(';');for(var i=0;i<sdarr.length;i++){for(var j=0;j<this.segfilter.length;j++){if(sdarr[i]==this.segfilter[j]){this.h.dtprm(this.drtp+'='+sdarr[i]+';')}}}},getGlobal:function(){var callback='__nbcsnasadops.doSCallback';var url='http://snas.nbcuni.com/snas/api/getRemoteDomainCookies?callback=';this.jsonp(url,callback)},doSCallback:function(j){if(!j||!j.cookie){return false}this.s=j.cookie[this.sc]||'';if(!this.s){this.setNoInfoCookie();return false}this.u=this.extractUUID();this.d=j.cookie[this.dc]||'';if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.u){this.getDemoByUUID()}else{this.setNoInfoCookie()}}},getDemoByUUID:function(){var callback='__nbcsnasadops.doUCallback';var url='http://demographics.nbcuni.com/demographics/api/getFormattedPersonDemographics/';url+=this.u+'/bt-in-script/';this.jsonp(url,callback)},doUCallback:function(j){if(!j||!j.personDemographics){return false}var d=j.personDemographics||'';if(d){this.d=d;this.populateDartTags();this.setLocalCookies()}},extractUUID:function(){if(this.s.indexOf('data='>-1)){var uuid=this.s.replace(/.*data=(\w+).*/i,"$1");return uuid}return''},setLocalCookies:function(){if(this.d&&(!this.h.gc(this.dc))){var demo=this.d.indexOf(';')>-1?escape(this.d):this.d;var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.dc+'='+demo+'; expires='+d+'; path=/;';document.cookie=c}if(this.s&&(!this.h.gc(this.sc))){var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.sc+'='+this.s+'; expires='+d+'; path=/;';document.cookie=c}return true},saveNBCUNIMetricsDataLocal:function(){},setNoInfoCookie:function(){var c=this.nic+'=1; expires=; path=/;';document.cookie=c},jsonp:function(src,cbk){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=src+=cbk;var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;script.onload=script.onreadystatechange=null;head.removeChild(script)}};head.appendChild(script)}};__nbcsnasadops.init();</script></span><span class="kxtag kxinvisible" data-id="10971" data-alias="Internal NBC Metrics: SNAS - saveActivity"><script>
if( top.__nbcudigitaladops_header ){
        top.__nbcudigitaladops_header.fnc = function(){
                var uuid = '';
                var s = top.__nbcudigitaladops_header.gc('snas');
                if(s.indexOf('data='>-1)){
                        uuid = s.replace(/.*data=(\w+).*/i,"$1");
                }else{
                        var sn_user = unescape(top.__nbcudigitaladops_header.gc('sn_nbc_b')).split('|');
                        uuid = sn_user[1];
                }
                if( !uuid ){ return false; }
                var rand = Math.round(Math.random()*1000000000000);
                var snas_d = top.__nbcudigitaladops_header.gc('snas_d');
                if(snas_d.indexOf('%')>-1){ snas_d = unescape(snas_d); }
                var docurl = document.location.href+'';
                var siteurlpieces = document.location.hostname.split('.');
                var siteurl = siteurlpieces[siteurlpieces.length-2]+'.'+siteurlpieces[siteurlpieces.length-1];
                var snasurl = 'http://snas.nbcuni.com/snas/api/saveActivity?URL='+escape(docurl);
                snasurl += '&contentType=PAGE&personUUID='+uuid+'&siteName='+siteurl+'&siteDomainName='+siteurl;
                snasurl += '&snas_d='+snas_d+'&rand='+rand;
                document.write('<img src="'+snasurl+'" width="1" height="1" />');
        };
        top.__nbcudigitaladops_header.fnc();
}
</script></span><span class="kxtag kxinvisible" data-id="10993" data-alias="Quantcast - Simple Tag"><script>
  _qacct="p-9eJ8k4iSzux46";
</script>
<script src="//secure.quantserve.com/quant.js"></script></span><span class="kxtag kxinvisible" data-id="59177" data-alias="Author Scraper"><script>
(function() {
  Krux('set', 'page_attr_nbcu_authors', typeof window._sf_async_config === 'object' && window._sf_async_config['authors']);
})();
</script></span><span class="kxtag kxinvisible" data-id="13132" data-alias="Krux Scraper - sym and xa"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "sym,xa".split(",")
  });

</script></span><span class="kxtag kxinvisible" data-id="14704" data-alias="AudienceScience - P&amp;G"><script language="JavaScript" type="text/javascript" src="//js.revsci.net/gateway/gw.js?csid=F09828&amp;auto=t&amp;bpid=nbcu"></script></span><span class="kxtag kxinvisible" data-id="10688" data-alias="Krux Scraper - Hierarchy and Attributes"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "aff,area,b,chan,daypart,genre,f,package,pkid,ref,season,sect,show,site,sport,sub,sub2,t,tag,type,pageid".split(",")
  });
  // Set section/subsection
  Krux('set', {
    section: Krux('get', 'domain'),
    subsection: Krux('get', 'page_attr_dart_sect')
  });
</script></span><span class="kxtag kxinvisible" data-id="10957" data-alias="Internal NBC Metrics: SNAS - (w/SegFilterActive)"><script>var __nbcsnasadops={init:function(){if(!top.__nbcudigitaladops_header){return false}this.segfilter=['94118g','12053g','55053g','65151g','15112g','43118g'];this.h=top.__nbcudigitaladops_header;this.sc='snas';this.dc='snas_d';this.nic='snas_noinfo';this.drtp='ssg';this.s=this.h.gc(this.sc)||'';this.d=this.h.gc(this.dc)||'';this.ni=this.h.gc(this.nic)||'';this.u='';this.cookiesEnabled=document.cookie.length>0;if(this.ni){return false}if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.s){this.u=this.extractUUID();this.getDemoByUUID()}else{this.getGlobal()}}},populateDartTags:function(){if(!this.d){return false}var demo=this.d.indexOf('%')>-1?unescape(this.d):this.d;var sdarr=demo.split(';');for(var i=0;i<sdarr.length;i++){for(var j=0;j<this.segfilter.length;j++){if(sdarr[i]==this.segfilter[j]){this.h.dtprm(this.drtp+'='+sdarr[i]+';')}}}},getGlobal:function(){var callback='__nbcsnasadops.doSCallback';var url='http://snas.nbcuni.com/snas/api/getRemoteDomainCookies?callback=';this.jsonp(url,callback)},doSCallback:function(j){if(!j||!j.cookie){return false}this.s=j.cookie[this.sc]||'';if(!this.s){this.setNoInfoCookie();return false}this.u=this.extractUUID();this.d=j.cookie[this.dc]||'';if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.u){this.getDemoByUUID()}else{this.setNoInfoCookie()}}},getDemoByUUID:function(){var callback='__nbcsnasadops.doUCallback';var url='http://demographics.nbcuni.com/demographics/api/getFormattedPersonDemographics/';url+=this.u+'/bt-in-script/';this.jsonp(url,callback)},doUCallback:function(j){if(!j||!j.personDemographics){return false}var d=j.personDemographics||'';if(d){this.d=d;this.populateDartTags();this.setLocalCookies()}},extractUUID:function(){if(this.s.indexOf('data='>-1)){var uuid=this.s.replace(/.*data=(\w+).*/i,"$1");return uuid}return''},setLocalCookies:function(){if(this.d&&(!this.h.gc(this.dc))){var demo=this.d.indexOf(';')>-1?escape(this.d):this.d;var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.dc+'='+demo+'; expires='+d+'; path=/;';document.cookie=c}if(this.s&&(!this.h.gc(this.sc))){var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.sc+'='+this.s+'; expires='+d+'; path=/;';document.cookie=c}return true},saveNBCUNIMetricsDataLocal:function(){},setNoInfoCookie:function(){var c=this.nic+'=1; expires=; path=/;';document.cookie=c},jsonp:function(src,cbk){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=src+=cbk;var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;script.onload=script.onreadystatechange=null;head.removeChild(script)}};head.appendChild(script)}};__nbcsnasadops.init();</script></span><span class="kxtag kxinvisible" data-id="10971" data-alias="Internal NBC Metrics: SNAS - saveActivity"><script>
if( top.__nbcudigitaladops_header ){
        top.__nbcudigitaladops_header.fnc = function(){
                var uuid = '';
                var s = top.__nbcudigitaladops_header.gc('snas');
                if(s.indexOf('data='>-1)){
                        uuid = s.replace(/.*data=(\w+).*/i,"$1");
                }else{
                        var sn_user = unescape(top.__nbcudigitaladops_header.gc('sn_nbc_b')).split('|');
                        uuid = sn_user[1];
                }
                if( !uuid ){ return false; }
                var rand = Math.round(Math.random()*1000000000000);
                var snas_d = top.__nbcudigitaladops_header.gc('snas_d');
                if(snas_d.indexOf('%')>-1){ snas_d = unescape(snas_d); }
                var docurl = document.location.href+'';
                var siteurlpieces = document.location.hostname.split('.');
                var siteurl = siteurlpieces[siteurlpieces.length-2]+'.'+siteurlpieces[siteurlpieces.length-1];
                var snasurl = 'http://snas.nbcuni.com/snas/api/saveActivity?URL='+escape(docurl);
                snasurl += '&contentType=PAGE&personUUID='+uuid+'&siteName='+siteurl+'&siteDomainName='+siteurl;
                snasurl += '&snas_d='+snas_d+'&rand='+rand;
                document.write('<img src="'+snasurl+'" width="1" height="1" />');
        };
        top.__nbcudigitaladops_header.fnc();
}
</script></span><span class="kxtag kxinvisible" data-id="10993" data-alias="Quantcast - Simple Tag"><script>
  _qacct="p-9eJ8k4iSzux46";
</script>
<script src="//secure.quantserve.com/quant.js"></script></span><span class="kxtag kxinvisible" data-id="11327" data-alias="Technographic Data provider tag"><script>
// this tag is intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="32786" data-alias="Krux URL Scraper"><script>
// Using UrlPath 1 to produce page attribute url_path_1
Krux('scrape', { 'page_attr_url_path_1': {url_path: '1'}});
Krux('scrape', { 'page_attr_url_path_2': {url_path: '2'}});
Krux('scrape', { 'page_attr_url_path_3': {url_path: '3'}});
Krux('scrape', { 'page_attr_url_path_4': {url_path: '4'}});
Krux('set', {'page_attr_FullUrl': window.location.href});
Krux('scrape', { 'page_attr_dart_akw': {dart: "akw"}});
</script></span><span class="kxtag kxinvisible" data-id="24980" data-alias="Krux Track Social"><script type="text/javascript">Krux('social.init');</script></span><span class="kxtag kxinvisible" data-id="82629" data-alias="MediaMath user match "><script>

(function(){
	var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
	var url = prefix + '//pixel.mathtag.com/sync/img?redir=' + prefix + '%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dmediamath%26mmuuid%3D%5BMM_UUID%5D';
	(new Image()).src = url;
})();

</script></span><span class="kxtag kxinvisible" data-id="11476" data-alias="krux-dfp-site-zone"><script type="text/javascript">
(function() {
  function findEl(els) {
    for(var i = 0; i < els.length; ++i) {
      try {
        var pathname = (m = els[i].src.match(/\.doubleclick\.net(\/[^;]*)/)) ?
          m[1] : '';

        if(pathname) {
          var parts = pathname.split('/');
          Krux.require('util').set({
            page_attr_dfpsite: parts[2],
            page_attr_dfpzone: parts[3]
          });
          return true;
        }
      } catch (e) {}
    }
  }

  findEl(document.getElementsByTagName('SCRIPT')) ||
  findEl(document.getElementsByTagName('IFRAME'));

})();
</script></span><span class="kxtag kxinvisible" data-id="15596" data-alias="Quantcast / Krux"><script>
(function () {
    if (location.protocol.indexOf('s') > -1) {
       return;
    }
    var u = "http://pixel.quantserve.com/seg/r;a=p-9eJ8k4iSzux46;rand=" +
        Math.round(Math.random() * 999999942) + ";redirect=" +
        "http://beacon.krxd.net/data.gif?_kdpid=c28722fa-1ec3-4a33-838f-d360c76c0aca&segs=!qcsegs";

    (new Image()).src = u;
})();
</script></span><span class="kxtag kxinvisible" data-id="11327" data-alias="Technographic Data provider tag"><script>
// this tag is intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="32786" data-alias="Krux URL Scraper"><script>
// Using UrlPath 1 to produce page attribute url_path_1
Krux('scrape', { 'page_attr_url_path_1': {url_path: '1'}});
Krux('scrape', { 'page_attr_url_path_2': {url_path: '2'}});
Krux('scrape', { 'page_attr_url_path_3': {url_path: '3'}});
Krux('scrape', { 'page_attr_url_path_4': {url_path: '4'}});
Krux('set', {'page_attr_FullUrl': window.location.href});
Krux('scrape', { 'page_attr_dart_akw': {dart: "akw"}});
</script></span><span class="kxtag kxinvisible" data-id="24980" data-alias="Krux Track Social"><script type="text/javascript">Krux('social.init');</script></span><span class="kxtag kxinvisible" data-id="82629" data-alias="MediaMath user match "><script>

(function(){
	var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
	var url = prefix + '//pixel.mathtag.com/sync/img?redir=' + prefix + '%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dmediamath%26mmuuid%3D%5BMM_UUID%5D';
	(new Image()).src = url;
})();

</script></span><span class="kxtag kxinvisible" data-id="11476" data-alias="krux-dfp-site-zone"><script type="text/javascript">
(function() {
  function findEl(els) {
    for(var i = 0; i < els.length; ++i) {
      try {
        var pathname = (m = els[i].src.match(/\.doubleclick\.net(\/[^;]*)/)) ?
          m[1] : '';

        if(pathname) {
          var parts = pathname.split('/');
          Krux.require('util').set({
            page_attr_dfpsite: parts[2],
            page_attr_dfpzone: parts[3]
          });
          return true;
        }
      } catch (e) {}
    }
  }

  findEl(document.getElementsByTagName('SCRIPT')) ||
  findEl(document.getElementsByTagName('IFRAME'));

})();
</script></span><span class="kxtag kxinvisible" data-id="15596" data-alias="Quantcast / Krux"><script>
(function () {
    if (location.protocol.indexOf('s') > -1) {
       return;
    }
    var u = "http://pixel.quantserve.com/seg/r;a=p-9eJ8k4iSzux46;rand=" +
        Math.round(Math.random() * 999999942) + ";redirect=" +
        "http://beacon.krxd.net/data.gif?_kdpid=c28722fa-1ec3-4a33-838f-d360c76c0aca&segs=!qcsegs";

    (new Image()).src = u;
})();
</script></span><span class="kxtag kxinvisible" data-id="11327" data-alias="Technographic Data provider tag"><script>
// this tag is intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="32786" data-alias="Krux URL Scraper"><script>
// Using UrlPath 1 to produce page attribute url_path_1
Krux('scrape', { 'page_attr_url_path_1': {url_path: '1'}});
Krux('scrape', { 'page_attr_url_path_2': {url_path: '2'}});
Krux('scrape', { 'page_attr_url_path_3': {url_path: '3'}});
Krux('scrape', { 'page_attr_url_path_4': {url_path: '4'}});
Krux('set', {'page_attr_FullUrl': window.location.href});
Krux('scrape', { 'page_attr_dart_akw': {dart: "akw"}});
</script></span><span class="kxtag kxinvisible" data-id="24980" data-alias="Krux Track Social"><script type="text/javascript">Krux('social.init');</script></span><span class="kxtag kxinvisible" data-id="82629" data-alias="MediaMath user match "><script>

(function(){
	var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
	var url = prefix + '//pixel.mathtag.com/sync/img?redir=' + prefix + '%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dmediamath%26mmuuid%3D%5BMM_UUID%5D';
	(new Image()).src = url;
})();

</script></span><span class="kxtag kxinvisible" data-id="11476" data-alias="krux-dfp-site-zone"><script type="text/javascript">
(function() {
  function findEl(els) {
    for(var i = 0; i < els.length; ++i) {
      try {
        var pathname = (m = els[i].src.match(/\.doubleclick\.net(\/[^;]*)/)) ?
          m[1] : '';

        if(pathname) {
          var parts = pathname.split('/');
          Krux.require('util').set({
            page_attr_dfpsite: parts[2],
            page_attr_dfpzone: parts[3]
          });
          return true;
        }
      } catch (e) {}
    }
  }

  findEl(document.getElementsByTagName('SCRIPT')) ||
  findEl(document.getElementsByTagName('IFRAME'));

})();
</script></span><span class="kxtag kxinvisible" data-id="15596" data-alias="Quantcast / Krux"><script>
(function () {
    if (location.protocol.indexOf('s') > -1) {
       return;
    }
    var u = "http://pixel.quantserve.com/seg/r;a=p-9eJ8k4iSzux46;rand=" +
        Math.round(Math.random() * 999999942) + ";redirect=" +
        "http://beacon.krxd.net/data.gif?_kdpid=c28722fa-1ec3-4a33-838f-d360c76c0aca&segs=!qcsegs";

    (new Image()).src = u;
})();
</script></span></head><body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-56156 node-type-tv-show usa-tv-show auth2-pages show-mrrobot show-new-design jquery-once-5-processed jquery-once-6-processed jquery-once-7-processed jquery-once-8-processed jquery-once-9-processed jquery-once-10-processed"><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/436086029.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828%2CF09828%2CF09828%2CF09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/248123922.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828%2CF09828%2CF09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/750231818.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828%2CF09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/589790746.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/45427738.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/267628390.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/50329969.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/807786872.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828%2CF09828"></script><script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/877782026.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828"></script><span class="kxtag kxinvisible" data-id="59177" data-alias="Author Scraper"><script>
(function() {
  Krux('set', 'page_attr_nbcu_authors', typeof window._sf_async_config === 'object' && window._sf_async_config['authors']);
})();
</script></span><span class="kxtag kxinvisible" data-id="85716" data-alias="The Trade Desk User Match"><script>
(function()
{ var i = new Image(); i.src = '//match.adsrvr.org/track/cmf/generic?ttd_pid=krux&ttd_tpi=1'; }
)();
</script></span><span class="kxtag kxinvisible" data-id="55860" data-alias="Nielsen - Precision Marketing (via Exelate) provid"></span><span class="kxtag kxinvisible" data-id="13132" data-alias="Krux Scraper - sym and xa"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "sym,xa".split(",")
  });

</script></span><span class="kxtag kxinvisible" data-id="14704" data-alias="AudienceScience - P&amp;G"><script language="JavaScript" type="text/javascript" src="//js.revsci.net/gateway/gw.js?csid=F09828&amp;auto=t&amp;bpid=nbcu"></script></span><span class="kxtag kxinvisible" data-id="10688" data-alias="Krux Scraper - Hierarchy and Attributes"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "aff,area,b,chan,daypart,genre,f,package,pkid,ref,season,sect,show,site,sport,sub,sub2,t,tag,type,pageid".split(",")
  });
  // Set section/subsection
  Krux('set', {
    section: Krux('get', 'domain'),
    subsection: Krux('get', 'page_attr_dart_sect')
  });
</script></span><span class="kxtag kxinvisible" data-id="10957" data-alias="Internal NBC Metrics: SNAS - (w/SegFilterActive)"><script>var __nbcsnasadops={init:function(){if(!top.__nbcudigitaladops_header){return false}this.segfilter=['94118g','12053g','55053g','65151g','15112g','43118g'];this.h=top.__nbcudigitaladops_header;this.sc='snas';this.dc='snas_d';this.nic='snas_noinfo';this.drtp='ssg';this.s=this.h.gc(this.sc)||'';this.d=this.h.gc(this.dc)||'';this.ni=this.h.gc(this.nic)||'';this.u='';this.cookiesEnabled=document.cookie.length>0;if(this.ni){return false}if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.s){this.u=this.extractUUID();this.getDemoByUUID()}else{this.getGlobal()}}},populateDartTags:function(){if(!this.d){return false}var demo=this.d.indexOf('%')>-1?unescape(this.d):this.d;var sdarr=demo.split(';');for(var i=0;i<sdarr.length;i++){for(var j=0;j<this.segfilter.length;j++){if(sdarr[i]==this.segfilter[j]){this.h.dtprm(this.drtp+'='+sdarr[i]+';')}}}},getGlobal:function(){var callback='__nbcsnasadops.doSCallback';var url='http://snas.nbcuni.com/snas/api/getRemoteDomainCookies?callback=';this.jsonp(url,callback)},doSCallback:function(j){if(!j||!j.cookie){return false}this.s=j.cookie[this.sc]||'';if(!this.s){this.setNoInfoCookie();return false}this.u=this.extractUUID();this.d=j.cookie[this.dc]||'';if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.u){this.getDemoByUUID()}else{this.setNoInfoCookie()}}},getDemoByUUID:function(){var callback='__nbcsnasadops.doUCallback';var url='http://demographics.nbcuni.com/demographics/api/getFormattedPersonDemographics/';url+=this.u+'/bt-in-script/';this.jsonp(url,callback)},doUCallback:function(j){if(!j||!j.personDemographics){return false}var d=j.personDemographics||'';if(d){this.d=d;this.populateDartTags();this.setLocalCookies()}},extractUUID:function(){if(this.s.indexOf('data='>-1)){var uuid=this.s.replace(/.*data=(\w+).*/i,"$1");return uuid}return''},setLocalCookies:function(){if(this.d&&(!this.h.gc(this.dc))){var demo=this.d.indexOf(';')>-1?escape(this.d):this.d;var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.dc+'='+demo+'; expires='+d+'; path=/;';document.cookie=c}if(this.s&&(!this.h.gc(this.sc))){var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.sc+'='+this.s+'; expires='+d+'; path=/;';document.cookie=c}return true},saveNBCUNIMetricsDataLocal:function(){},setNoInfoCookie:function(){var c=this.nic+'=1; expires=; path=/;';document.cookie=c},jsonp:function(src,cbk){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=src+=cbk;var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;script.onload=script.onreadystatechange=null;head.removeChild(script)}};head.appendChild(script)}};__nbcsnasadops.init();</script></span><span class="kxtag kxinvisible" data-id="10971" data-alias="Internal NBC Metrics: SNAS - saveActivity"><script>
if( top.__nbcudigitaladops_header ){
        top.__nbcudigitaladops_header.fnc = function(){
                var uuid = '';
                var s = top.__nbcudigitaladops_header.gc('snas');
                if(s.indexOf('data='>-1)){
                        uuid = s.replace(/.*data=(\w+).*/i,"$1");
                }else{
                        var sn_user = unescape(top.__nbcudigitaladops_header.gc('sn_nbc_b')).split('|');
                        uuid = sn_user[1];
                }
                if( !uuid ){ return false; }
                var rand = Math.round(Math.random()*1000000000000);
                var snas_d = top.__nbcudigitaladops_header.gc('snas_d');
                if(snas_d.indexOf('%')>-1){ snas_d = unescape(snas_d); }
                var docurl = document.location.href+'';
                var siteurlpieces = document.location.hostname.split('.');
                var siteurl = siteurlpieces[siteurlpieces.length-2]+'.'+siteurlpieces[siteurlpieces.length-1];
                var snasurl = 'http://snas.nbcuni.com/snas/api/saveActivity?URL='+escape(docurl);
                snasurl += '&contentType=PAGE&personUUID='+uuid+'&siteName='+siteurl+'&siteDomainName='+siteurl;
                snasurl += '&snas_d='+snas_d+'&rand='+rand;
                document.write('<img src="'+snasurl+'" width="1" height="1" />');
        };
        top.__nbcudigitaladops_header.fnc();
}
</script></span><span class="kxtag kxinvisible" data-id="10993" data-alias="Quantcast - Simple Tag"><script>
  _qacct="p-9eJ8k4iSzux46";
</script>
<script src="//secure.quantserve.com/quant.js"></script></span><span class="kxtag kxinvisible" data-id="11109" data-alias="eXelate Media provider tag"><script>
(function(){
  var kuid = Krux('get', 'user');
  if (kuid) {
    Krux('require:http').pixel({
      url: "//loadm.exelator.com/load",
      data: {
          _kdpid: 'e4942ff0-4070-4896-a7ef-e6a5a30ce9f9',
          buid: kuid,
          p: '204',
          g: '270',
          j: '0'
      }});
  }
  })();
</script></span><span class="kxtag kxinvisible" data-id="87320" data-alias="Nielsen NBCU NCS (via eXelate) provider tag"></span><span class="kxtag kxinvisible" data-id="27697" data-alias="HealthyOffers - NBCU (via LiveRamp) provider tag"><script>
// tag intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="45116" data-alias="Proximic provider tag"></span><span class="kxtag kxinvisible" data-id="11327" data-alias="Technographic Data provider tag"><script>
// this tag is intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="16002" data-alias="Quantcast provider tag"></span><span class="kxtag kxinvisible" data-id="86461" data-alias="Crossix Private (Approval Needed) provider tag"></span><span class="kxtag kxinvisible" data-id="85185" data-alias="IXI Digital (Network) provider tag"><script>
    // Empty by design.
</script>
</span><span class="kxtag kxinvisible" data-id="85186" data-alias="IXI Digital Open Market provider tag"><script>
(function(){
    var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
    new Image().src = prefix + '//kr.ixiaa.com/C726AB29-0470-440B-B8D2-D552CED3A3DC/a.gif';
})();
</script></span><span class="kxtag kxinvisible" data-id="23254" data-alias="Krux Geographic Data provider tag"></span><span class="kxtag kxinvisible" data-id="63191" data-alias="Visual DNA provider tag"><script>

(function() {
    (new Image()).src = "//apiservices.krxd.net/um?partner=vdna&r=" + window.location.protocol + "//e.visualdna.com/conversion&_kdpid=8f95f20d-4acf-43fc-9832-3f5174a166cc";
})();

</script></span><span class="kxtag kxinvisible" data-id="14072" data-alias="Nielsen (via Exelate) provider tag"><script>
// Blank
</script></span><span class="kxtag kxinvisible" data-id="27407" data-alias="PubMatic Segment Sharing"><script type="text/javascript">
(function() {
  var prvx_segs = Krux('get', 'user_prvx_segments') || [];
  if (prvx_segs.length) {
    (new Image()).src =
      '//aud.pubmatic.com/AdServer/Artemis?dpid=14' +
      '&segid=' + prvx_segs.join(',');
  }
})();
</script></span><span class="kxtag kxinvisible" data-id="32786" data-alias="Krux URL Scraper"><script>
// Using UrlPath 1 to produce page attribute url_path_1
Krux('scrape', { 'page_attr_url_path_1': {url_path: '1'}});
Krux('scrape', { 'page_attr_url_path_2': {url_path: '2'}});
Krux('scrape', { 'page_attr_url_path_3': {url_path: '3'}});
Krux('scrape', { 'page_attr_url_path_4': {url_path: '4'}});
Krux('set', {'page_attr_FullUrl': window.location.href});
Krux('scrape', { 'page_attr_dart_akw': {dart: "akw"}});
</script></span><span class="kxtag kxinvisible" data-id="85298" data-alias="Freewheel User Match SITE VISIT"><script>
(function() {
    if (window.location.protocol == 'http:') {
        var img = new Image();
        img.src = "//bea4.v.fwmrm.net/ad/u?mode=echo&cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D"
        img.setAttribute("style", "width:0px; height:0px; visibility:hidden;");
        document.body.appendChild(img);
    }
})();
</script></span><img src="//bea4.v.fwmrm.net/ad/u?mode=echo&amp;cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D" style="width:0px; height:0px; visibility:hidden;"><img src="//bea4.v.fwmrm.net/ad/u?mode=echo&amp;cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D" style="width:0px; height:0px; visibility:hidden;"><span class="kxtag kxinvisible" data-id="18290" data-alias="Acxiom S2S provider tag"><script>
(function(){
  var kuid = Krux('get', 'user');
  if (kuid) {
      var liveramp_url = 'https://idsync.rlcdn.com/379708.gif?partner_uid=' + kuid;
      var i = new Image();
      i.src = liveramp_url;
  }
})();
</script></span><span class="kxtag kxinvisible" data-id="35454" data-alias="TubeMogul User Match"><script>
    (function() {
        var prefix = location.protocol == 'https:' ? "https" : "http";
        var tm_url = prefix + '://rtd.tubemogul.com/upi/pid/NC4WTmcy?redir=' + prefix + '%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner_id%3Dcb276571-e0d9-4438-9fd4-80a1ff034b01%26puid%3D%24%7BTM_USER_ID%7D'
        var i = new Image();
        i.src = tm_url;
    })();
</script></span><span class="kxtag kxinvisible" data-id="24980" data-alias="Krux Track Social"><script type="text/javascript">Krux('social.init');</script></span><span class="kxtag kxinvisible" data-id="69297" data-alias="Quantcast S2S provider tag"><script>
(function(){
        var kuid = Krux('get', 'user');
        if (kuid) {
           var qcast_url = '//pixel.quantserve.com/pixel/p-j_f_9hh7_PWUw.gif?idmatch=0';
           var i = new Image();
           i.src = qcast_url;
        }
})();
</script></span><span class="kxtag kxinvisible" data-id="82629" data-alias="MediaMath user match "><script>

(function(){
	var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
	var url = prefix + '//pixel.mathtag.com/sync/img?redir=' + prefix + '%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dmediamath%26mmuuid%3D%5BMM_UUID%5D';
	(new Image()).src = url;
})();

</script></span><span class="kxtag kxinvisible" data-id="85453" data-alias="NBCUniversal - Google User Matching"><script>
(function(){
  var kuid = Krux('get', 'user');
  if (kuid && typeof kuid != 'undefined') {
      var prefix = location.protocol == 'https:' ? "https" :"http";
      var r_url = prefix + '://cm.g.doubleclick.net/pixel'
      var kurl = prefix + '://apiservices.krxd.net/um?partner=google&protocol=' + prefix + '&r=' + r_url;
      var i = new Image();
      i.src = kurl;
  }
})();
</script></span><span class="kxtag kxinvisible" data-id="11476" data-alias="krux-dfp-site-zone"><script type="text/javascript">
(function() {
  function findEl(els) {
    for(var i = 0; i < els.length; ++i) {
      try {
        var pathname = (m = els[i].src.match(/\.doubleclick\.net(\/[^;]*)/)) ?
          m[1] : '';

        if(pathname) {
          var parts = pathname.split('/');
          Krux.require('util').set({
            page_attr_dfpsite: parts[2],
            page_attr_dfpzone: parts[3]
          });
          return true;
        }
      } catch (e) {}
    }
  }

  findEl(document.getElementsByTagName('SCRIPT')) ||
  findEl(document.getElementsByTagName('IFRAME'));

})();
</script></span><span class="kxtag kxinvisible" data-id="15596" data-alias="Quantcast / Krux"><script>
(function () {
    if (location.protocol.indexOf('s') > -1) {
       return;
    }
    var u = "http://pixel.quantserve.com/seg/r;a=p-9eJ8k4iSzux46;rand=" +
        Math.round(Math.random() * 999999942) + ";redirect=" +
        "http://beacon.krxd.net/data.gif?_kdpid=c28722fa-1ec3-4a33-838f-d360c76c0aca&segs=!qcsegs";

    (new Image()).src = u;
})();
</script></span><span class="kxtag kxinvisible" data-id="20727" data-alias="Crowd Science (NBCU) provider tag"><script type="text/javascript" charset="utf-8">
  function CS_data_callback(cs_data) {
    if (cs_data && cs_data.segments) {
      var p = location.protocol === 'https:' ? 'https:' : 'http:';
      new Image().src = p + '//beacon.krxd.net/data.gif?_kdpid=b1f402c1-9cee-4d2c-95e8-f87ec628694e&cs_segs=' +
        encodeURIComponent(cs_data.segments.join(','));
    }
  }
</script>
<script src="http://static.crowdscience.com/max-7881f43af0.js?callback=CS_data_callback" type="text/javascript" charset="utf-8"></script> </span>
  <script type="text/javascript" src="http://pix04.revsci.net/F09828/b3/0/3/120814/448314197.js?D=DM_LOC%3Dhttp%253A%252F%252Flocalhost%253A3000%252Findex2%253Fbpid%253Dnbcu%2526_rsiL%253D0%26DM_EOM%3D1&amp;C=F09828"></script><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/322122262.js"></script><div id="mboxImported-default-target-global-mbox-0" style="visibility: visible; display: block;"></div>
    <div id="skip-link">
      <a href="http://www.usanetwork.com/mrrobot#main-content" class="element-invisible element-focusable" role="link">Skip to main content</a>
    </div>
    <script type="text/javascript">var AdobeTracking = new Object();
// New Tracking Features
if (typeof AdobeTracking != 'undefined') {
  // set breakpoint
  if (typeof(document.documentElement.clientWidth) != 'undefined') {
    usa_cw = document.documentElement.clientWidth;
    if (usa_cw <= 644) {
      AdobeTracking.rwdBreakpoint = usa_deviceInfo.mobileDevice ? 'Smartphone Portrait' : 'Desktop';
    } else if (usa_cw >= 645 && usa_cw <= 959) {
      AdobeTracking.rwdBreakpoint = usa_deviceInfo.mobileDevice ? 'Tablet Portrait' : 'Desktop';
    } else if (usa_cw >= 960 && usa_cw <= 1274) {
      AdobeTracking.rwdBreakpoint = usa_deviceInfo.mobileDevice ? 'Tablet Landscape' : 'Desktop';
    } else if (usa_cw >= 1275) {
      AdobeTracking.rwdBreakpoint = 'Desktop Large';
    }
  }
  // Desktop Large | Desktop | Tablet Landscape | Tablet Portrait | Smartphone Portrait

  // set screen height
  AdobeTracking.screenHeight = typeof(document.documentElement.clientHeight) != 'undefined' ? document.documentElement.clientHeight : '';

  // set screen width
  AdobeTracking.screenWidth = typeof(document.documentElement.clientWidth) != 'undefined' ? document.documentElement.clientWidth : '';

  // set device type
  if (usa_deviceInfo.mobileDevice && usa_deviceInfo.smartphone) {
    AdobeTracking.deviceType = 'Smartphone';
  } else if (usa_deviceInfo.mobileDevice && !usa_deviceInfo.smartphone) {
    AdobeTracking.deviceType = 'Tablet';
  } else {
    AdobeTracking.deviceType = 'Desktop';
  }

  // set screen orientation - for mobile devices only
  AdobeTracking.screenOrientation = 'Desktop'; // default value when not on a mobile device
  if (usa_deviceInfo.mobileDevice) {
    if (typeof window.onorientationchange != 'undefined') {
      if (orientation == 0) {
        AdobeTracking.screenOrientation = 'Portrait'; // Landscape | Portrait
      } else if (orientation == 90) {
        AdobeTracking.screenOrientation = 'Landscape';
      } else if (orientation == -90) {
        AdobeTracking.screenOrientation = 'Landscape';
      } else if (orientation == 180) {
        AdobeTracking.screenOrientation = 'Portrait';
      }
    }
  }

  // check for sponsored flag
  if (Drupal.settings.USA.DART.is_sponsored) {
    AdobeTracking.sponsorship = 'Sponsored';
  } else {
    AdobeTracking.sponsorship = 'Not Sponsored';
  }

  var usa_pageTitle = document.title;
  usa_pageTitleElements = usa_pageTitle.split(' | ');
  var usa_pageTitleFinal = '';

  if (usa_pageTitleElements.length > 1) {
    for (var i = usa_pageTitleElements.length - 2; i >= 0; i--) {
      usa_pageTitleFinal += usa_pageTitleElements[i];
      if (i > 0) {
        usa_pageTitleFinal += ' : ';
      }
    }
  } else {
    usa_pageTitleFinal = usa_pageTitle;
  }

  AdobeTracking.pageName = usa_pageTitleFinal;
  AdobeTracking.tve_platform = jQuery.browser.mobile ? "Mobile" : "PC";
}

AdobeTracking.userGroup="anonymous user";
AdobeTracking.division="Cable";
AdobeTracking.businessUnit="USA Network";
AdobeTracking.tve_domain="";
AdobeTracking.tve_date="07-15-2016";
AdobeTracking.tve_day="Friday";
AdobeTracking.tve_hour="23";
AdobeTracking.tve_minute="23:05";
AdobeTracking.contentGroup="Drama";
AdobeTracking.contentType="Home";
AdobeTracking.showSiteFeature="Home Index";
AdobeTracking.showSite="Mr. Robot";
AdobeTracking.nodeID="56156";
AdobeTracking.pageName="Mr. Robot";
umbel="Mr. Robot";
</script>




<div class="usa-wrap">  <!-- MAIN CONTENT -->
  <div id="main" role="main" class="clearfix">
                    <div id="content" role="article" class="column">
            <a id="main-content"></a>
      <div class="tabs"></div>                    <div class="region region-content">
    <div class="panel-display panel-onecol-stacked clearfix">
  <div class="panel-wrapper">



              <div class="panel-panel panel-four panel-row latest-episodes-block">
        <div class="panel-pane pane-new-design-episodes">



  <div class="pane-content">
    <div class="usa-section-title show-border">
  <h2 class="title">Episodes</h2>
  <a href="http://www.usanetwork.com/mrrobot/episodes" class="view-more-link">View more</a></div>
<div class="episodes-wrapper">
  <div class="main-episode full-episode">

    <div class="image-block">
            <a href="http://www.usanetwork.com/mrrobot">
        <div class="meta-icon full-video-icon-default"></div>
            <div class="asset-img" data-picture="" data-alt="" data-class="tile-img">
                  <div data-src="http://www.usanetwork.com/sites/usanetwork/files/styles/655x408/public/usa_video_image/160707_3064525_eps2_0_unm4sk_pt1_tc_anvver_1.jpg?itok=XOoQR8ZR"></div>
                          <div data-media="(min-width: 769px)" data-src="http://www.usanetwork.com/sites/usanetwork/files/styles/1040x585/public/usa_video_image/160707_3064525_eps2_0_unm4sk_pt1_tc_anvver_1.jpg?itok=KVvH1lmG"></div>
          <!--[if (IE 8) & (!IEMobile)]>
          <div data-src="http://www.usanetwork.com/sites/usanetwork/files/styles/1040x585/public/usa_video_image/160707_3064525_eps2_0_unm4sk_pt1_tc_anvver_1.jpg?itok=KVvH1lmG"></div>
          <![endif]-->
                          <noscript>&amp;amp;amp;lt;img src="http://www.usanetwork.com/sites/usanetwork/files/styles/1040x585/public/usa_video_image/160707_3064525_eps2_0_unm4sk_pt1_tc_anvver_1.jpg?itok=KVvH1lmG" alt=""
                         title=""/&amp;amp;amp;gt;</noscript>
              <img alt="" class="tile-img" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/160707_3064525_eps2_0_unm4sk_pt1_tc_anvver_1.jpg"></div>
              </a>
          </div>

    <div class="meta-wrapper">
      <div class="meta-wrapper-inner">
        <div class="meta">
          <div class="caption">S2            &nbsp;EP1</div>
                      <div class="title">
              eps2.0_unm4sk-pt1.tc            </div>
            <div class="additional">
              <a href="http://www.usanetwork.com/mrrobot/videos/eps20unm4sk-pt1tc" class="additional-link show-color show-font">
                Watch                &gt;
              </a><br>
              <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-2-episode-1-eps20unm4sk-pt1tc" class="additional-link show-color show-font">
                Read the Recap                &gt;
              </a><br>
            </div>
                  </div>
      </div>
    </div>
  </div>
  <div class="episodes-list" id="episode-list">
    <ul class="slider-list mCustomScrollbar _mCS_2 mCS-autoHide"><div id="mCSB_2" class="mCustomScrollBox mCS-light mCSB_vertical mCSB_inside" tabindex="0"><div id="mCSB_2_container" class="mCSB_container" style="position:relative; top:0; left:0;" dir="ltr">
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo full-episode">
  <div class="image-block">
          <a href="http://www.usanetwork.com/mrrobot/videos/eps20unm4sk-pt2tc" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/160707_3064526_eps2_0_unm4sk_pt2_tc_anvver_1.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S2&nbsp;EP2</div>
                          <div class="title">eps2.0_unm4sk-pt2.tc</div>
                          <a href="http://www.usanetwork.com/mrrobot/videos/eps20unm4sk-pt2tc" class="additional show-color show-font omniture-tracking-processed">
            Watch          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-2-episode-2-eps20unm4sk-pt2tc" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_110_1920x1080.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP10</div>
                          <div class="title">eps1.9_zer0-day.avi</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-10-eps19zer0-dayavi" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_109_2560x1440.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP9</div>
                          <div class="title">eps1.8_m1rr0r1ng.qt</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-9-eps18m1rr0r1ngqt" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_108_2560x1440.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP8</div>
                          <div class="title">eps1.7_wh1ter0se.m4v</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-8-eps17wh1ter0sem4v" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_e107epguide_1920x1080.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP7</div>
                          <div class="title">eps1.6_v1ew-s0urce.flv</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-7-eps16v1ew-s0urceflv" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_ep106_2560x1440.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP6</div>
                          <div class="title">eps1.5_br4ve-trave1er.asf</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-6-eps15br4ve-trave1erasf" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_e105_2560x1440.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP5</div>
                          <div class="title">eps1.4_3xpl0its.wmv</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-5-eps143xpl0itswmv" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_e104_2560x1440.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP4</div>
                          <div class="title">eps1.3_da3m0ns.mp4</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-4-eps13da3m0nsmp4" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_epguide_103.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP3</div>
                          <div class="title">eps1.2_d3bug.mkv</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-3-eps12d3bugmkv" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrrobot_promo_epguide_e102_2560x1440.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP2</div>
                          <div class="title">eps1.1_ones-and-zer0es.mpeg</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-2-eps11ones-and-zer0esmpeg" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
              <li>
          <div class="node node-usanetwork-promo usa-episodes-carousel-promo">
  <div class="image-block">
          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="omniture-tracking-processed">
        <div class="meta-icon full-video-icon-default"></div>
          <div class="asset-img">
        <img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mrr_pilot_grabs18.jpg" alt="" class="mCS_img_loaded">
      </div>
          </a>
      </div>
  <div class="meta-wrapper">
    <div class="meta-wrapper-inner">
      <div class="meta">
                  <div class="caption">S1&nbsp;EP1</div>
                          <div class="title">eps1.0_hellofriend.mov</div>
                          <a href="https://www.amazon.com/eps1-0_hellofriend-mov/dp/B00YBX664Q/ref=sr_1_1/ref=sr_1_1" class="additional show-color show-font omniture-tracking-processed">
            Watch on Amazon Prime          </a>
                <a href="http://www.usanetwork.com/mrrobot/episode-guide/season-1-episode-1-eps10hellofriendmov" class="additional show-color omniture-tracking-processed">
          Read the Recap        </a>
      </div>
    </div>
  </div>
</div>
        </li>
          </div><div id="mCSB_2_scrollbar_vertical" class="mCSB_scrollTools mCSB_2_scrollbar mCS-light mCSB_scrollTools_vertical" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_2_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; display: block; height: 208px; max-height: 448px;" oncontextmenu="return false;"><div class="mCSB_dragger_bar" style="line-height: 30px;"></div></div><div class="mCSB_draggerRail"></div></div></div></div></ul>
  </div>
  <div class="view-more">
    <a href="http://www.usanetwork.com/mrrobot/episodes" class="view-more-link">View all Episodes</a>  </div>
</div>

  </div>


  </div>


      </div>


      </div>
</div>
  </div>
          </div>

        <!-- #content-suffix -->
      </div><!-- #main -->
  <!-- /MAIN CONTENT -->

  <!-- PERSONALIZATION -->
  <aside id="personalization-panel" class="clearfix">
      </aside>
  <!-- /PERSONALIZATION -->

  <!-- FOOTER -->
  <footer id="footer" role="contentinfo" class="clearfix">
      </footer>
  <!-- /FOOTER -->
</div>
          <noscript>
        &amp;amp;amp;lt;style type="text/css" media="all"&amp;amp;amp;gt;
          img[data-src] { display: none !important; }
        &amp;amp;amp;lt;/style&amp;amp;amp;gt;
      </noscript>






<script src="/js/js_mhMgsOmdYKmYkqqwNMQiiiQWbTho7thTHw5gKCjrEnk.js"></script>
<script>_satellite.pageBottom();</script>
<script src="/js/js_5V2v0IaecWyIRFV6B3NOGYc5kc7yQDvSScxfd6Z9bos.js"></script>
<script src="/js/js_P41P4K9yqF22wihThHuPes5u6btOP5fef-nZYEY_sCg.js"></script>
<script>      (function ($) {
        Drupal.behaviors.lazyloader = {
          attach: function (context, settings) {
            $("img[data-src]:not(.nolazyload)").lazyloader({distance: 0, icon: "/sites/usanetwork/modules/contrib/lazyloader/loader/loader-7.gif" });
          }
        };
      }(jQuery));</script>
<script src="/js/js_4ZrhQ_bVUwSZD8N5FLx5JHYY-X_M8TsZMozNdlvYZso.js"></script>
<script>typeof(mps.writeFooter)=='function' && mps.writeFooter();</script>
<!-- NO MPS OMNITURE TEMPLATE MAPPING DEFINED FOR SITE (skipping) -->

<!--shared-->
<script>if(!mps._loadset||0===mps._loadset){var sharedjs=document.createElement("script"),_src=mps._protocol()+"//"+mps.pagevars.mpsurl+"/request/component/automagic?name=shared.js";"object"==typeof debugmode&&1<parseInt(debugmode.log)&&(_src+="&CACHESKIP=1");sharedjs.src=_src;sharedjs.async=!0;document.getElementsByTagName("head")[0].appendChild(sharedjs)};</script>

<!--USA Facebook Pixel-->
<script>(function(){var a=window._fbq||(window._fbq=[]);if(!a.loaded){var b=document.createElement("script");b.async=!0;b.src="//connect.facebook.net/en_US/fbds.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);a.loaded=!0}a.push(["addPixelId","1621341978095212"])})();window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}]);</script>

<script>window.console && console.log('--[executed]--> MPS Footer Additions (3)');</script>
<script>
var adBlockEnabled = true;
(function () {
  mps = mps || {};
  mps._queue = mps._queue || {};
  mps._queue.abdetect = mps._queue.abdetect || [];
  mps._ab = mps._ab || {};
  mps._ab.timer = 0;
  mps._ab.run = false;
  mps._ab.type = null;
  mps._ab.delays = mps._delays.abdetect || 8000;
  mps._ab.render = function (name) {
    mps._ab.run = true;
    if(typeof mps._queue.render === 'function') {
      mps._queue.render('abdetect', name);
    }
    if(typeof mps.abdetectCallback === 'function') {
      mps.abdetectCallback(name);
    }
    if(!name) {
      mps._debug('[mps:AB] NOT ENABLED')
    } else {
      mps._debug('[mps:AB] DETECTED (' + name + ')');
    }
  };
  mps._ab.detect = function () {
    if(mps._ab.run) {
      return false;
    }
    mps._ab.timer = mps._ab.timer + 500;
    // Script blocked.
    if (adBlockEnabled === true) {
      mps._ab.type = 'filename';
      mps._ab.render('filename');
      // Domain blocked.
    } else if ((mps._gptError && mps._gptError === true) || mps._ab.timer === mps._ab.delays) {
      mps._ab.type = 'domain';
      mps._ab.render('domain');
      // MPS not loaded.
    } else if (mps._gptError === undefined && mps._ab.timer < mps._ab.delays) {
      setTimeout(function (){
        mps._ab.detect();
      }, 500);
      mps._debug('[mps:AB] waiting... (try ' + mps._ab.timer / 500 + ' of 16)');
      return false;
      // No detection, append container div.
    } else {
      if(!document.getElementById('adbanner')) {
        if(document.getElementsByTagName('body')[0]) {
          var _abcont = document.createElement('div');
          _abcont.id = 'adbanner';
          _abcont.style = 'width:0;height:0;';
          document.getElementsByTagName('body')[0].appendChild(_abcont);
          setTimeout(function (){
            mps._ab.detect();
          }, 100);
        } else {
          setTimeout(function (){
            mps._ab.detect();
          }, 500);
        }
      } else {
        var _abconttest = document.getElementById('adbanner');
        if(_abconttest && _abconttest.offsetParent === null) {
          mps._ab.type = 'container';
          mps._ab.render('container');
        } else {
          mps._ab.type = false;
          mps._ab.render(false);
        }
      }
    }
  };
  var _abdetect = document.createElement('script');
  _abdetect.src = '//www.nbcudigitaladops.com/hosted/pubads.js';
  _abdetect.type = 'text/javascript';
  _abdetect.onload = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  _abdetect.onerror = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  document.getElementsByTagName('head')[0].appendChild(_abdetect);
}());

</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--{@bodyfooter} Floodlight: USA Floodlight Tags-->
<script>
var baseurl='1445917.fls.doubleclick.net/activityi;',
_writeFL=function(cat,keyvals){if(mps._loadset>0)return!1;if(!cat||!mps.pagevars.cats||typeof cat!="string"||typeof mps.pagevars.cats!="object"||typeof keyvals!="string")return!1;var cats=mps.pagevars.cats.join("|"),catarr=cat.split("|");for(var i=0;i<catarr.length;i++)if(mps.pagevars.cats[i]!=catarr[i])return !1;var src=("https:"==document.location.protocol?"https:":"http:")+"//"+baseurl+mps._trim(keyvals,";")+";ord="+1E17*Math.random()+"?";mps._debug("[mps/Floodlight] "+"(cat="+cat+") "+"INSERT "+src);
var usafloodLightHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);
    usafloodLightHolder.setAttribute("id", holderID);
    document.body.appendChild(usafloodLightHolder);
document.getElementById(holderID).innerHTML ='<iframe src="'+src+'" width="1" height="1" frameborder="0" style="display:none"></iframe>';
}

_writeFL("graceland","src=1445917;type=2012g832;cat=grace041;");

_writeFL("rush","src=1445917;type=2014b766;cat=usa-r562;");

_writeFL("satisfaction","src=1445917;type=2014b766;cat=usa-s644;");

_writeFL("royalpains","src=1445917;type=2009o386;cat=royal068;");

_writeFL("whitecollar","src=1445917;type=2009o386;cat=white368;");

_writeFL("chrisleyknowsbest","src=1445917;type=2014b766;cat=chris342;");

_writeFL("covertaffairs","src=1445917;type=2010a975;cat=cover674;");

_writeFL("suits","src=1445917;type=2011d848;cat=suits889;");

_writeFL("sirens","src=1445917;type=2014b766;cat=siren497;");

_writeFL("playinghouse","src=1445917;type=2014b766;cat=playi219;");

_writeFL("burnnotice","src=1445917;type=burnn832;cat=burnn655;");

_writeFL("commonlaw","src=1445917;type=2012g832;cat=commo012;");

_writeFL("fairlylegal","src=1445917;type=2010a975;cat=fairl582;");

_writeFL("inplainsight","src=1445917;type=inpla773;cat=inpla560;");

_writeFL("monk","src=1445917;type=monkx344;cat=monkz207;");

_writeFL("necessaryroughness","src=1445917;type=2011d848;cat=neces763;");

_writeFL("politicalanimals","src=1445917;type=2012g832;cat=polit063;");

_writeFL("psych","src=1445917;type=2011d848;cat=psych222;");

_writeFL("csi","src=1445917;type=2013i356;cat=csiyk570;");

_writeFL("house","src=1445917;type=2009o386;cat=house033;");

_writeFL("criminalintent","src=1445917;type=2011d848;cat=lawor499;");

_writeFL("svu","src=1445917;type=2011d848;cat=lawor176;");

_writeFL("modernfamily","src=1445917;type=2013i356;cat=moder594;");

_writeFL("ncis","src=1445917;type=2009o386;cat=ncisv947;");

_writeFL("ncisla","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("wwe","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("mrrobot","src=1445917;type=2015s0;cat=usa-m0;");

_writeFL("dig","src=1445917;type=2014b766;cat=usa-d409;");

_writeFL("complications","src=1445917;type=2015s0;cat=usa-c0;");

_writeFL("benched","src=1445917;type=2014b766;cat=USA-B0;");

_writeFL("donny","src=1445917;type=2015s0;cat=usa-d0;");

_writeFL("queenofthesouth","src=1445917;type=2015s0;cat=usa-q0;");

_writeFL("colony","src=1445917;type=shox30;cat=showp00;");

_writeFL("eyewitness","src=1445917;type=eyewi0;cat=usa-e0;");

_writeFL("fallingwater","src=1445917;type=falli0;cat=usa-f0;");

_writeFL("firstimpressions","src=1445917;type=first0;cat=usa-f0;");

_writeFL("shooter","src=1445917;type=shoot0;cat=usa-s0;");

_writeFL("motive","src=1445917;type=usa-m0;cat=usa-m0;");

</script>


<!--{@bodyfooter} moatadblock: Moat Adblock Tracking-->

<script>
if (debugmode.log) {
(function() {
try{var a={l1:document.location.host.replace(/^www./,""),l2:document.title||"Untitled",l3:"__page__",l4:"-",sa:"",sn:""},b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));b=b.join("&");(new Image).src="//d28nxrgt4y7pn6.cloudfront.net?a=1212b7832905405abe5afd281711940f";var d=document.createElement("script");d.type="text/javascript";d.async=!0;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);d.src="https://z.moatads.com/nbcu194EPtQ90/moatcontent.js#"+b}catch(f){try{var g=
"//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i=MOATCONTENTABSNIPPET1&ac=1&k="+encodeURIComponent(f)+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();(new Image).src=g}catch(h){}};
})();
} // [close] if (debugmode.log)
</script>



<!--{@bodyfooter} sourcepoint: Sourcepoint AdBlock Tracking-->
<script async="async" data-client-id="PebocMUQMgmSHpr" type="text/javascript" src="//d3qxwzhswv93jk.cloudfront.net/esf.js"></script>


<!--{@bodyfooter} tve-floodlight-tags: TVE floodlight tags-->
<script>
/* Logic for all tags */
var baseurl = '1445917.fls.doubleclick.net/activityi;',
  nbcuUser = JSON.parse(decodeURIComponent(mps._ck.r('nbcu_user_settings'))),
  userIsAuthN = !!nbcuUser && nbcuUser.authn,
  _writeFLTag = function(cat, keyvals) {
    if (cat.indexOf('svu') && window.location.pathname.indexOf('svu/cast') != -1 && mps._loadset == 1) {
      mps.pagevars.cats[0] = 'svu';
    }
    if (mps._loadset > 0 && cat.indexOf('svu') == -1) return !1;
    if (!cat || !mps.pagevars.cats || typeof cat != "string" || typeof mps.pagevars.cats != "object" || typeof keyvals != "string") return !1;
    var cats = mps.pagevars.cats.join("|"),
      catarr = cat.split("|");
    for (var i = 0; i < catarr.length; i++)
      if ((mps.pagevars.cats[i] != catarr[i] && catarr[i] != '%') || mps.pagevars.cats.length != catarr.length) return !1;
    var src = ("https:" == document.location.protocol ? "https:" : "http:") + "//" + baseurl + mps._trim(keyvals, ";") + ";ord=" + 1E17 * Math.random() + "?";
    mps._debug("[mps/Floodlight] " + "(cat=" + cat + ") " + "INSERT " + src);
    var floodLightTagHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);

    floodLightTagHolder.setAttribute("id", holderID);
    document.body.appendChild(floodLightTagHolder);
    document.getElementById(holderID).innerHTML ='<iframe src="' + src + '" width="1" height="1" frameborder="0" style="display:none"></iframe>';
  };

if (userIsAuthN) {
  triggerPlaybackFloodLightTag();
} else {
  window.setAuthenticationStatus = function(isAuthenticated, errorCode) {
    tve.adobePass.performPostAuthCheckActions(isAuthenticated, errorCode);
    if (isAuthenticated) {
      // AuthN success tag goes here
      _writeFLTag(getPageCategory(), "src=1445917;type=auth50;cat=authe0;");

      triggerPlaybackFloodLightTag();
    }
  };
}

function getPageCategory() {
  if (typeof mps.pagevars.cats == "object") {
    return mps.pagevars.cats.join("|")
  }
}

function triggerPlaybackFloodLightTag() {
  // Code for firing playback event
  episodeName = encodeURIComponent(getMetaContentByName('og:title'));

  //live
  _writeFLTag("videos|live", "src=1445917;type=vodsi0;cat=linea0;");

  //VOD tag
  _writeFLTag("suits|videos", "src=1445917;type=vodsi0;cat=episo0;u2=" + episodeName + ";");
  _writeFLTag("mrrobot|videos", "src=1445917;type=vodsi0;cat=episo00;u2=" + episodeName + ";");
  _writeFLTag("playinghouse|videos", "src=1445917;type=vodsi0;cat=episo000;u2=" + episodeName + ";");
  _writeFLTag("chrisleyknowsbest|videos", "src=1445917;type=vodsi0;cat=episo001;u2=" + episodeName + ";");

}

function globalPageLevelFloodLightTags() {
  // All global Level flood light tags will be added here

  _writeFLTag("home", "src=1445917;type=globa0;cat=globa0;");

  if (location.href.indexOf('/videos') == -1) {

    _writeFLTag("svu|%", "src=1445917;type=shox30;cat=showp006;");
    _writeFLTag("suits|%", "src=1445917;type=shox30;cat=shows0;");
    _writeFLTag("mrrobot|%", "src=1445917;type=shox30;cat=showm0;");
    _writeFLTag("playinghouse|%", "src=1445917;type=shox30;cat=showp0;");
    _writeFLTag("chrisleyknowsbest|%", "src=1445917;type=shox30;cat=showc0;");
    _writeFLTag("colony|%", "src=1445917;type=shox30;cat=showp00;");
    _writeFLTag("complications|%", "src=1445917;type=shox30;cat=showp000;");
    _writeFLTag("csi|%", "src=1445917;type=shox30;cat=showp001;");  // if it will work
    _writeFLTag("dig", "src=1445917;type=shox30;cat=showp002;");
    _writeFLTag("donny|%", "src=1445917;type=shox30;cat=showp003;");
    _writeFLTag("criminalintent|%", "src=1445917;type=shox30;cat=showp005;");
    _writeFLTag("graceland|%", "src=1445917;type=shox30;cat=showp004;");
    _writeFLTag("modernfamily|%", "src=1445917;type=shox30;cat=showp007;");
    _writeFLTag("ncis|%", "src=1445917;type=shox30;cat=showp008;");
    _writeFLTag("ncisla|%", "src=1445917;type=shox30;cat=showp009;");
    _writeFLTag("queenofthesouth|%", "src=1445917;type=shox30;cat=showp00-;");
    _writeFLTag("royalpains|%", "src=1445917;type=shox30;cat=showp00a;");
    _writeFLTag("satisfaction|%", "src=1445917;type=shox30;cat=showp00b;");
    _writeFLTag("wwe|%", "src=1445917;type=shox30;cat=showp00c;");
    _writeFLTag("wwetoughenough|%", "src=1445917;type=shox30;cat=showp00d;");
    _writeFLTag("shows", "src=1445917;type=shox30;cat=showp00e;");
  }

}

globalPageLevelFloodLightTags();

function getMetaContentByName(name){
  var metas = document.getElementsByTagName('meta');

  for (i=0; i<metas.length; i++) {
    if (metas[i].getAttribute("property") == name) {
      return metas[i].getAttribute("content");
    }
  }

  return "";
}
</script>


<!--{@bodyfooter} xaxislb: Xaxis Lightning Bolt-->
<!-- Lightning Bolt Begins -->
      <script type="text/javascript" id="lightning_bolt" src="//cdn-akamai.mookie1.com/LB/LightningBolt.js"></script>
      <!-- Lightning Bolt Ends -->



<!--{@bodyfooter}-PM-comscore: [pm] comScore Beacon-->
<script class="mps-pm3" data-mps-pm3="comscore">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('comscore',function(){
  mps.pm3.ids.comscore = '6035083';
  _comscore = window._comscore || [];
  _comscore.push({ c1: "2", c2: mps.pm3.ids.comscore });
  (function(){
    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
    s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
    el.parentNode.insertBefore(s, el);
  })();
});
</script>


<!--{@bodyfooter}-PM-krux: [pm] Krux Control Tag-->
<script class="mps-pm3" data-mps-pm3="krux-control-tag">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('krux-control-tag',function(){
  mps.pm3.ids.kruxconfid = mps._datamapValue('kruxids');
  if(mps.pm3.ids.kruxconfid) {
    mps._postscribe.enable();
    window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);
    mps._loadJS(mps._protocol()+'//'+'//cdn.krxd.net/controltag?confid='+mps.pm3.ids.kruxconfid, function(){ mps._d('[mps:PM3] JS LOADED: Krux Control Tag - '+mps.pm3.ids.kruxconfid); mps._postscribe.disable(); });
  } else {
    mps._d('[mps:PM3] Krux Control Tag Skipped (no mapped kruxid)');
  }
});
</script>


<!--{@bodyfooter}-PM-nielsen: [pm] Nielsen Hybrid Tag v6-->
<script class="mps-pm3" data-mps-pm3="nielsen">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('nielsen',function(){
  var a=new Image(1,1);a.onerror=a.onload=function(){a.onerror=a.onload=null};a.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-503541h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&ts=compact&rnd=",(new Date).getTime()].join("");
});
</script>


<!--{@bodyfooter}-PM-remo: [pm] Remo Node Control-->
<script class="mps-pm3" data-mps-pm3="remo">//--[2016-04-06]
  mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('remo',function(){
  var subdoms = window.location.host.split('.'), topdom = subdoms.pop(); topdom = subdoms.pop()+'.'+topdom;
  mps.pm3.ids.remodomain = topdom;
  function sitePerformedInvite(id) {
    var r = /(REMO_INVITE)=([^;]*)/gi.exec(document.cookie);
    return r && unescape(r[2]);
  }
  function siteInvited(id) {
    id != undefined || (id = "1");
    var ex = new Date((new Date).getTime() + 864E5 * 7);
    document.cookie = "REMO_INVITE" + "=" + escape(id) + (!ex || !(ex instanceof Date) ? "" : "; expires=" + ex.toGMTString()) + ";path=/;domain="+topdom+"";
  }
});
</script>


<!--{@bodyfooter}-PM-xaxis: [pm] Xaxis Lightning Bolt-->
<script class="mps-pm3" data-mps-pm3="xaxislb">//--[2016-05-02]
    mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('xaxislb',function(){
     mps._loadJS(mps._protocol()+'//cdn-akamai.mookie1.com/LB/LightningBolt.js', function(){ mps._d('[mps:PM3] JS LOADED: Xaxis Lightning Bolt v2');});
    });
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<!-- NO MPS OMNITURE TEMPLATE MAPPING DEFINED FOR SITE (skipping) -->

<!--shared-->
<script>if(!mps._loadset||0===mps._loadset){var sharedjs=document.createElement("script"),_src=mps._protocol()+"//"+mps.pagevars.mpsurl+"/request/component/automagic?name=shared.js";"object"==typeof debugmode&&1<parseInt(debugmode.log)&&(_src+="&CACHESKIP=1");sharedjs.src=_src;sharedjs.async=!0;document.getElementsByTagName("head")[0].appendChild(sharedjs)};</script>

<!--USA Facebook Pixel-->
<script>(function(){var a=window._fbq||(window._fbq=[]);if(!a.loaded){var b=document.createElement("script");b.async=!0;b.src="//connect.facebook.net/en_US/fbds.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);a.loaded=!0}a.push(["addPixelId","1621341978095212"])})();window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}]);</script>

<script>window.console && console.log('--[executed]--> MPS Footer Additions (3)');</script>
<script>
var adBlockEnabled = true;
(function () {
  mps = mps || {};
  mps._queue = mps._queue || {};
  mps._queue.abdetect = mps._queue.abdetect || [];
  mps._ab = mps._ab || {};
  mps._ab.timer = 0;
  mps._ab.run = false;
  mps._ab.type = null;
  mps._ab.delays = mps._delays.abdetect || 8000;
  mps._ab.render = function (name) {
    mps._ab.run = true;
    if(typeof mps._queue.render === 'function') {
      mps._queue.render('abdetect', name);
    }
    if(typeof mps.abdetectCallback === 'function') {
      mps.abdetectCallback(name);
    }
    if(!name) {
      mps._debug('[mps:AB] NOT ENABLED')
    } else {
      mps._debug('[mps:AB] DETECTED (' + name + ')');
    }
  };
  mps._ab.detect = function () {
    if(mps._ab.run) {
      return false;
    }
    mps._ab.timer = mps._ab.timer + 500;
    // Script blocked.
    if (adBlockEnabled === true) {
      mps._ab.type = 'filename';
      mps._ab.render('filename');
      // Domain blocked.
    } else if ((mps._gptError && mps._gptError === true) || mps._ab.timer === mps._ab.delays) {
      mps._ab.type = 'domain';
      mps._ab.render('domain');
      // MPS not loaded.
    } else if (mps._gptError === undefined && mps._ab.timer < mps._ab.delays) {
      setTimeout(function (){
        mps._ab.detect();
      }, 500);
      mps._debug('[mps:AB] waiting... (try ' + mps._ab.timer / 500 + ' of 16)');
      return false;
      // No detection, append container div.
    } else {
      if(!document.getElementById('adbanner')) {
        if(document.getElementsByTagName('body')[0]) {
          var _abcont = document.createElement('div');
          _abcont.id = 'adbanner';
          _abcont.style = 'width:0;height:0;';
          document.getElementsByTagName('body')[0].appendChild(_abcont);
          setTimeout(function (){
            mps._ab.detect();
          }, 100);
        } else {
          setTimeout(function (){
            mps._ab.detect();
          }, 500);
        }
      } else {
        var _abconttest = document.getElementById('adbanner');
        if(_abconttest && _abconttest.offsetParent === null) {
          mps._ab.type = 'container';
          mps._ab.render('container');
        } else {
          mps._ab.type = false;
          mps._ab.render(false);
        }
      }
    }
  };
  var _abdetect = document.createElement('script');
  _abdetect.src = '//www.nbcudigitaladops.com/hosted/pubads.js';
  _abdetect.type = 'text/javascript';
  _abdetect.onload = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  _abdetect.onerror = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  document.getElementsByTagName('head')[0].appendChild(_abdetect);
}());

</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--{@bodyfooter} Floodlight: USA Floodlight Tags-->
<script>
var baseurl='1445917.fls.doubleclick.net/activityi;',
_writeFL=function(cat,keyvals){if(mps._loadset>0)return!1;if(!cat||!mps.pagevars.cats||typeof cat!="string"||typeof mps.pagevars.cats!="object"||typeof keyvals!="string")return!1;var cats=mps.pagevars.cats.join("|"),catarr=cat.split("|");for(var i=0;i<catarr.length;i++)if(mps.pagevars.cats[i]!=catarr[i])return !1;var src=("https:"==document.location.protocol?"https:":"http:")+"//"+baseurl+mps._trim(keyvals,";")+";ord="+1E17*Math.random()+"?";mps._debug("[mps/Floodlight] "+"(cat="+cat+") "+"INSERT "+src);
var usafloodLightHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);
    usafloodLightHolder.setAttribute("id", holderID);
    document.body.appendChild(usafloodLightHolder);
document.getElementById(holderID).innerHTML ='<iframe src="'+src+'" width="1" height="1" frameborder="0" style="display:none"></iframe>';
}

_writeFL("graceland","src=1445917;type=2012g832;cat=grace041;");

_writeFL("rush","src=1445917;type=2014b766;cat=usa-r562;");

_writeFL("satisfaction","src=1445917;type=2014b766;cat=usa-s644;");

_writeFL("royalpains","src=1445917;type=2009o386;cat=royal068;");

_writeFL("whitecollar","src=1445917;type=2009o386;cat=white368;");

_writeFL("chrisleyknowsbest","src=1445917;type=2014b766;cat=chris342;");

_writeFL("covertaffairs","src=1445917;type=2010a975;cat=cover674;");

_writeFL("suits","src=1445917;type=2011d848;cat=suits889;");

_writeFL("sirens","src=1445917;type=2014b766;cat=siren497;");

_writeFL("playinghouse","src=1445917;type=2014b766;cat=playi219;");

_writeFL("burnnotice","src=1445917;type=burnn832;cat=burnn655;");

_writeFL("commonlaw","src=1445917;type=2012g832;cat=commo012;");

_writeFL("fairlylegal","src=1445917;type=2010a975;cat=fairl582;");

_writeFL("inplainsight","src=1445917;type=inpla773;cat=inpla560;");

_writeFL("monk","src=1445917;type=monkx344;cat=monkz207;");

_writeFL("necessaryroughness","src=1445917;type=2011d848;cat=neces763;");

_writeFL("politicalanimals","src=1445917;type=2012g832;cat=polit063;");

_writeFL("psych","src=1445917;type=2011d848;cat=psych222;");

_writeFL("csi","src=1445917;type=2013i356;cat=csiyk570;");

_writeFL("house","src=1445917;type=2009o386;cat=house033;");

_writeFL("criminalintent","src=1445917;type=2011d848;cat=lawor499;");

_writeFL("svu","src=1445917;type=2011d848;cat=lawor176;");

_writeFL("modernfamily","src=1445917;type=2013i356;cat=moder594;");

_writeFL("ncis","src=1445917;type=2009o386;cat=ncisv947;");

_writeFL("ncisla","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("wwe","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("mrrobot","src=1445917;type=2015s0;cat=usa-m0;");

_writeFL("dig","src=1445917;type=2014b766;cat=usa-d409;");

_writeFL("complications","src=1445917;type=2015s0;cat=usa-c0;");

_writeFL("benched","src=1445917;type=2014b766;cat=USA-B0;");

_writeFL("donny","src=1445917;type=2015s0;cat=usa-d0;");

_writeFL("queenofthesouth","src=1445917;type=2015s0;cat=usa-q0;");

_writeFL("colony","src=1445917;type=shox30;cat=showp00;");

_writeFL("eyewitness","src=1445917;type=eyewi0;cat=usa-e0;");

_writeFL("fallingwater","src=1445917;type=falli0;cat=usa-f0;");

_writeFL("firstimpressions","src=1445917;type=first0;cat=usa-f0;");

_writeFL("shooter","src=1445917;type=shoot0;cat=usa-s0;");

_writeFL("motive","src=1445917;type=usa-m0;cat=usa-m0;");

</script>


<!--{@bodyfooter} moatadblock: Moat Adblock Tracking-->

<script>
if (debugmode.log) {
(function() {
try{var a={l1:document.location.host.replace(/^www./,""),l2:document.title||"Untitled",l3:"__page__",l4:"-",sa:"",sn:""},b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));b=b.join("&");(new Image).src="//d28nxrgt4y7pn6.cloudfront.net?a=1212b7832905405abe5afd281711940f";var d=document.createElement("script");d.type="text/javascript";d.async=!0;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);d.src="https://z.moatads.com/nbcu194EPtQ90/moatcontent.js#"+b}catch(f){try{var g=
"//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i=MOATCONTENTABSNIPPET1&ac=1&k="+encodeURIComponent(f)+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();(new Image).src=g}catch(h){}};
})();
} // [close] if (debugmode.log)
</script>



<!--{@bodyfooter} sourcepoint: Sourcepoint AdBlock Tracking-->
<script async="async" data-client-id="PebocMUQMgmSHpr" type="text/javascript" src="//d3qxwzhswv93jk.cloudfront.net/esf.js"></script>


<!--{@bodyfooter} tve-floodlight-tags: TVE floodlight tags-->
<script>
/* Logic for all tags */
var baseurl = '1445917.fls.doubleclick.net/activityi;',
  nbcuUser = JSON.parse(decodeURIComponent(mps._ck.r('nbcu_user_settings'))),
  userIsAuthN = !!nbcuUser && nbcuUser.authn,
  _writeFLTag = function(cat, keyvals) {
    if (cat.indexOf('svu') && window.location.pathname.indexOf('svu/cast') != -1 && mps._loadset == 1) {
      mps.pagevars.cats[0] = 'svu';
    }
    if (mps._loadset > 0 && cat.indexOf('svu') == -1) return !1;
    if (!cat || !mps.pagevars.cats || typeof cat != "string" || typeof mps.pagevars.cats != "object" || typeof keyvals != "string") return !1;
    var cats = mps.pagevars.cats.join("|"),
      catarr = cat.split("|");
    for (var i = 0; i < catarr.length; i++)
      if ((mps.pagevars.cats[i] != catarr[i] && catarr[i] != '%') || mps.pagevars.cats.length != catarr.length) return !1;
    var src = ("https:" == document.location.protocol ? "https:" : "http:") + "//" + baseurl + mps._trim(keyvals, ";") + ";ord=" + 1E17 * Math.random() + "?";
    mps._debug("[mps/Floodlight] " + "(cat=" + cat + ") " + "INSERT " + src);
    var floodLightTagHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);

    floodLightTagHolder.setAttribute("id", holderID);
    document.body.appendChild(floodLightTagHolder);
    document.getElementById(holderID).innerHTML ='<iframe src="' + src + '" width="1" height="1" frameborder="0" style="display:none"></iframe>';
  };

if (userIsAuthN) {
  triggerPlaybackFloodLightTag();
} else {
  window.setAuthenticationStatus = function(isAuthenticated, errorCode) {
    tve.adobePass.performPostAuthCheckActions(isAuthenticated, errorCode);
    if (isAuthenticated) {
      // AuthN success tag goes here
      _writeFLTag(getPageCategory(), "src=1445917;type=auth50;cat=authe0;");

      triggerPlaybackFloodLightTag();
    }
  };
}

function getPageCategory() {
  if (typeof mps.pagevars.cats == "object") {
    return mps.pagevars.cats.join("|")
  }
}

function triggerPlaybackFloodLightTag() {
  // Code for firing playback event
  episodeName = encodeURIComponent(getMetaContentByName('og:title'));

  //live
  _writeFLTag("videos|live", "src=1445917;type=vodsi0;cat=linea0;");

  //VOD tag
  _writeFLTag("suits|videos", "src=1445917;type=vodsi0;cat=episo0;u2=" + episodeName + ";");
  _writeFLTag("mrrobot|videos", "src=1445917;type=vodsi0;cat=episo00;u2=" + episodeName + ";");
  _writeFLTag("playinghouse|videos", "src=1445917;type=vodsi0;cat=episo000;u2=" + episodeName + ";");
  _writeFLTag("chrisleyknowsbest|videos", "src=1445917;type=vodsi0;cat=episo001;u2=" + episodeName + ";");

}

function globalPageLevelFloodLightTags() {
  // All global Level flood light tags will be added here

  _writeFLTag("home", "src=1445917;type=globa0;cat=globa0;");

  if (location.href.indexOf('/videos') == -1) {

    _writeFLTag("svu|%", "src=1445917;type=shox30;cat=showp006;");
    _writeFLTag("suits|%", "src=1445917;type=shox30;cat=shows0;");
    _writeFLTag("mrrobot|%", "src=1445917;type=shox30;cat=showm0;");
    _writeFLTag("playinghouse|%", "src=1445917;type=shox30;cat=showp0;");
    _writeFLTag("chrisleyknowsbest|%", "src=1445917;type=shox30;cat=showc0;");
    _writeFLTag("colony|%", "src=1445917;type=shox30;cat=showp00;");
    _writeFLTag("complications|%", "src=1445917;type=shox30;cat=showp000;");
    _writeFLTag("csi|%", "src=1445917;type=shox30;cat=showp001;");  // if it will work
    _writeFLTag("dig", "src=1445917;type=shox30;cat=showp002;");
    _writeFLTag("donny|%", "src=1445917;type=shox30;cat=showp003;");
    _writeFLTag("criminalintent|%", "src=1445917;type=shox30;cat=showp005;");
    _writeFLTag("graceland|%", "src=1445917;type=shox30;cat=showp004;");
    _writeFLTag("modernfamily|%", "src=1445917;type=shox30;cat=showp007;");
    _writeFLTag("ncis|%", "src=1445917;type=shox30;cat=showp008;");
    _writeFLTag("ncisla|%", "src=1445917;type=shox30;cat=showp009;");
    _writeFLTag("queenofthesouth|%", "src=1445917;type=shox30;cat=showp00-;");
    _writeFLTag("royalpains|%", "src=1445917;type=shox30;cat=showp00a;");
    _writeFLTag("satisfaction|%", "src=1445917;type=shox30;cat=showp00b;");
    _writeFLTag("wwe|%", "src=1445917;type=shox30;cat=showp00c;");
    _writeFLTag("wwetoughenough|%", "src=1445917;type=shox30;cat=showp00d;");
    _writeFLTag("shows", "src=1445917;type=shox30;cat=showp00e;");
  }

}

globalPageLevelFloodLightTags();

function getMetaContentByName(name){
  var metas = document.getElementsByTagName('meta');

  for (i=0; i<metas.length; i++) {
    if (metas[i].getAttribute("property") == name) {
      return metas[i].getAttribute("content");
    }
  }

  return "";
}
</script>


<!--{@bodyfooter} xaxislb: Xaxis Lightning Bolt-->
<!-- Lightning Bolt Begins -->
      <script type="text/javascript" id="lightning_bolt" src="//cdn-akamai.mookie1.com/LB/LightningBolt.js"></script><iframe id="xaxis_dm_0033018567" style="display: none;" src="//cdn-akamai.mookie1.com/html/x71.html"></iframe>
      <!-- Lightning Bolt Ends -->



<!--{@bodyfooter}-PM-comscore: [pm] comScore Beacon-->
<script class="mps-pm3" data-mps-pm3="comscore">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('comscore',function(){
  mps.pm3.ids.comscore = '6035083';
  _comscore = window._comscore || [];
  _comscore.push({ c1: "2", c2: mps.pm3.ids.comscore });
  (function(){
    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
    s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
    el.parentNode.insertBefore(s, el);
  })();
});
</script>


<!--{@bodyfooter}-PM-krux: [pm] Krux Control Tag-->
<script class="mps-pm3" data-mps-pm3="krux-control-tag">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('krux-control-tag',function(){
  mps.pm3.ids.kruxconfid = mps._datamapValue('kruxids');
  if(mps.pm3.ids.kruxconfid) {
    mps._postscribe.enable();
    window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);
    mps._loadJS(mps._protocol()+'//'+'//cdn.krxd.net/controltag?confid='+mps.pm3.ids.kruxconfid, function(){ mps._d('[mps:PM3] JS LOADED: Krux Control Tag - '+mps.pm3.ids.kruxconfid); mps._postscribe.disable(); });
  } else {
    mps._d('[mps:PM3] Krux Control Tag Skipped (no mapped kruxid)');
  }
});
</script>


<!--{@bodyfooter}-PM-nielsen: [pm] Nielsen Hybrid Tag v6-->
<script class="mps-pm3" data-mps-pm3="nielsen">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('nielsen',function(){
  var a=new Image(1,1);a.onerror=a.onload=function(){a.onerror=a.onload=null};a.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-503541h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&ts=compact&rnd=",(new Date).getTime()].join("");
});
</script>


<!--{@bodyfooter}-PM-remo: [pm] Remo Node Control-->
<script class="mps-pm3" data-mps-pm3="remo">//--[2016-04-06]
  mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('remo',function(){
  var subdoms = window.location.host.split('.'), topdom = subdoms.pop(); topdom = subdoms.pop()+'.'+topdom;
  mps.pm3.ids.remodomain = topdom;
  function sitePerformedInvite(id) {
    var r = /(REMO_INVITE)=([^;]*)/gi.exec(document.cookie);
    return r && unescape(r[2]);
  }
  function siteInvited(id) {
    id != undefined || (id = "1");
    var ex = new Date((new Date).getTime() + 864E5 * 7);
    document.cookie = "REMO_INVITE" + "=" + escape(id) + (!ex || !(ex instanceof Date) ? "" : "; expires=" + ex.toGMTString()) + ";path=/;domain="+topdom+"";
  }
});
</script>


<!--{@bodyfooter}-PM-xaxis: [pm] Xaxis Lightning Bolt-->
<script class="mps-pm3" data-mps-pm3="xaxislb">//--[2016-05-02]
    mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('xaxislb',function(){
     mps._loadJS(mps._protocol()+'//cdn-akamai.mookie1.com/LB/LightningBolt.js', function(){ mps._d('[mps:PM3] JS LOADED: Xaxis Lightning Bolt v2');});
    });
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<!-- NO MPS OMNITURE TEMPLATE MAPPING DEFINED FOR SITE (skipping) -->

<!--shared-->
<script>if(!mps._loadset||0===mps._loadset){var sharedjs=document.createElement("script"),_src=mps._protocol()+"//"+mps.pagevars.mpsurl+"/request/component/automagic?name=shared.js";"object"==typeof debugmode&&1<parseInt(debugmode.log)&&(_src+="&CACHESKIP=1");sharedjs.src=_src;sharedjs.async=!0;document.getElementsByTagName("head")[0].appendChild(sharedjs)};</script>

<!--USA Facebook Pixel-->
<script>(function(){var a=window._fbq||(window._fbq=[]);if(!a.loaded){var b=document.createElement("script");b.async=!0;b.src="//connect.facebook.net/en_US/fbds.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);a.loaded=!0}a.push(["addPixelId","1621341978095212"])})();window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}]);</script>

<script>window.console && console.log('--[executed]--> MPS Footer Additions (3)');</script>
<script>
var adBlockEnabled = true;
(function () {
  mps = mps || {};
  mps._queue = mps._queue || {};
  mps._queue.abdetect = mps._queue.abdetect || [];
  mps._ab = mps._ab || {};
  mps._ab.timer = 0;
  mps._ab.run = false;
  mps._ab.type = null;
  mps._ab.delays = mps._delays.abdetect || 8000;
  mps._ab.render = function (name) {
    mps._ab.run = true;
    if(typeof mps._queue.render === 'function') {
      mps._queue.render('abdetect', name);
    }
    if(typeof mps.abdetectCallback === 'function') {
      mps.abdetectCallback(name);
    }
    if(!name) {
      mps._debug('[mps:AB] NOT ENABLED')
    } else {
      mps._debug('[mps:AB] DETECTED (' + name + ')');
    }
  };
  mps._ab.detect = function () {
    if(mps._ab.run) {
      return false;
    }
    mps._ab.timer = mps._ab.timer + 500;
    // Script blocked.
    if (adBlockEnabled === true) {
      mps._ab.type = 'filename';
      mps._ab.render('filename');
      // Domain blocked.
    } else if ((mps._gptError && mps._gptError === true) || mps._ab.timer === mps._ab.delays) {
      mps._ab.type = 'domain';
      mps._ab.render('domain');
      // MPS not loaded.
    } else if (mps._gptError === undefined && mps._ab.timer < mps._ab.delays) {
      setTimeout(function (){
        mps._ab.detect();
      }, 500);
      mps._debug('[mps:AB] waiting... (try ' + mps._ab.timer / 500 + ' of 16)');
      return false;
      // No detection, append container div.
    } else {
      if(!document.getElementById('adbanner')) {
        if(document.getElementsByTagName('body')[0]) {
          var _abcont = document.createElement('div');
          _abcont.id = 'adbanner';
          _abcont.style = 'width:0;height:0;';
          document.getElementsByTagName('body')[0].appendChild(_abcont);
          setTimeout(function (){
            mps._ab.detect();
          }, 100);
        } else {
          setTimeout(function (){
            mps._ab.detect();
          }, 500);
        }
      } else {
        var _abconttest = document.getElementById('adbanner');
        if(_abconttest && _abconttest.offsetParent === null) {
          mps._ab.type = 'container';
          mps._ab.render('container');
        } else {
          mps._ab.type = false;
          mps._ab.render(false);
        }
      }
    }
  };
  var _abdetect = document.createElement('script');
  _abdetect.src = '//www.nbcudigitaladops.com/hosted/pubads.js';
  _abdetect.type = 'text/javascript';
  _abdetect.onload = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  _abdetect.onerror = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  document.getElementsByTagName('head')[0].appendChild(_abdetect);
}());

</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--{@bodyfooter} Floodlight: USA Floodlight Tags-->
<script>
var baseurl='1445917.fls.doubleclick.net/activityi;',
_writeFL=function(cat,keyvals){if(mps._loadset>0)return!1;if(!cat||!mps.pagevars.cats||typeof cat!="string"||typeof mps.pagevars.cats!="object"||typeof keyvals!="string")return!1;var cats=mps.pagevars.cats.join("|"),catarr=cat.split("|");for(var i=0;i<catarr.length;i++)if(mps.pagevars.cats[i]!=catarr[i])return !1;var src=("https:"==document.location.protocol?"https:":"http:")+"//"+baseurl+mps._trim(keyvals,";")+";ord="+1E17*Math.random()+"?";mps._debug("[mps/Floodlight] "+"(cat="+cat+") "+"INSERT "+src);
var usafloodLightHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);
    usafloodLightHolder.setAttribute("id", holderID);
    document.body.appendChild(usafloodLightHolder);
document.getElementById(holderID).innerHTML ='<iframe src="'+src+'" width="1" height="1" frameborder="0" style="display:none"></iframe>';
}

_writeFL("graceland","src=1445917;type=2012g832;cat=grace041;");

_writeFL("rush","src=1445917;type=2014b766;cat=usa-r562;");

_writeFL("satisfaction","src=1445917;type=2014b766;cat=usa-s644;");

_writeFL("royalpains","src=1445917;type=2009o386;cat=royal068;");

_writeFL("whitecollar","src=1445917;type=2009o386;cat=white368;");

_writeFL("chrisleyknowsbest","src=1445917;type=2014b766;cat=chris342;");

_writeFL("covertaffairs","src=1445917;type=2010a975;cat=cover674;");

_writeFL("suits","src=1445917;type=2011d848;cat=suits889;");

_writeFL("sirens","src=1445917;type=2014b766;cat=siren497;");

_writeFL("playinghouse","src=1445917;type=2014b766;cat=playi219;");

_writeFL("burnnotice","src=1445917;type=burnn832;cat=burnn655;");

_writeFL("commonlaw","src=1445917;type=2012g832;cat=commo012;");

_writeFL("fairlylegal","src=1445917;type=2010a975;cat=fairl582;");

_writeFL("inplainsight","src=1445917;type=inpla773;cat=inpla560;");

_writeFL("monk","src=1445917;type=monkx344;cat=monkz207;");

_writeFL("necessaryroughness","src=1445917;type=2011d848;cat=neces763;");

_writeFL("politicalanimals","src=1445917;type=2012g832;cat=polit063;");

_writeFL("psych","src=1445917;type=2011d848;cat=psych222;");

_writeFL("csi","src=1445917;type=2013i356;cat=csiyk570;");

_writeFL("house","src=1445917;type=2009o386;cat=house033;");

_writeFL("criminalintent","src=1445917;type=2011d848;cat=lawor499;");

_writeFL("svu","src=1445917;type=2011d848;cat=lawor176;");

_writeFL("modernfamily","src=1445917;type=2013i356;cat=moder594;");

_writeFL("ncis","src=1445917;type=2009o386;cat=ncisv947;");

_writeFL("ncisla","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("wwe","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("mrrobot","src=1445917;type=2015s0;cat=usa-m0;");

_writeFL("dig","src=1445917;type=2014b766;cat=usa-d409;");

_writeFL("complications","src=1445917;type=2015s0;cat=usa-c0;");

_writeFL("benched","src=1445917;type=2014b766;cat=USA-B0;");

_writeFL("donny","src=1445917;type=2015s0;cat=usa-d0;");

_writeFL("queenofthesouth","src=1445917;type=2015s0;cat=usa-q0;");

_writeFL("colony","src=1445917;type=shox30;cat=showp00;");

_writeFL("eyewitness","src=1445917;type=eyewi0;cat=usa-e0;");

_writeFL("fallingwater","src=1445917;type=falli0;cat=usa-f0;");

_writeFL("firstimpressions","src=1445917;type=first0;cat=usa-f0;");

_writeFL("shooter","src=1445917;type=shoot0;cat=usa-s0;");

_writeFL("motive","src=1445917;type=usa-m0;cat=usa-m0;");

</script>


<!--{@bodyfooter} moatadblock: Moat Adblock Tracking-->

<script>
if (debugmode.log) {
(function() {
try{var a={l1:document.location.host.replace(/^www./,""),l2:document.title||"Untitled",l3:"__page__",l4:"-",sa:"",sn:""},b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));b=b.join("&");(new Image).src="//d28nxrgt4y7pn6.cloudfront.net?a=1212b7832905405abe5afd281711940f";var d=document.createElement("script");d.type="text/javascript";d.async=!0;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);d.src="https://z.moatads.com/nbcu194EPtQ90/moatcontent.js#"+b}catch(f){try{var g=
"//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i=MOATCONTENTABSNIPPET1&ac=1&k="+encodeURIComponent(f)+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();(new Image).src=g}catch(h){}};
})();
} // [close] if (debugmode.log)
</script>



<!--{@bodyfooter} sourcepoint: Sourcepoint AdBlock Tracking-->
<script async="async" data-client-id="PebocMUQMgmSHpr" type="text/javascript" src="//d3qxwzhswv93jk.cloudfront.net/esf.js"></script>


<!--{@bodyfooter} tve-floodlight-tags: TVE floodlight tags-->
<script>
/* Logic for all tags */
var baseurl = '1445917.fls.doubleclick.net/activityi;',
  nbcuUser = JSON.parse(decodeURIComponent(mps._ck.r('nbcu_user_settings'))),
  userIsAuthN = !!nbcuUser && nbcuUser.authn,
  _writeFLTag = function(cat, keyvals) {
    if (cat.indexOf('svu') && window.location.pathname.indexOf('svu/cast') != -1 && mps._loadset == 1) {
      mps.pagevars.cats[0] = 'svu';
    }
    if (mps._loadset > 0 && cat.indexOf('svu') == -1) return !1;
    if (!cat || !mps.pagevars.cats || typeof cat != "string" || typeof mps.pagevars.cats != "object" || typeof keyvals != "string") return !1;
    var cats = mps.pagevars.cats.join("|"),
      catarr = cat.split("|");
    for (var i = 0; i < catarr.length; i++)
      if ((mps.pagevars.cats[i] != catarr[i] && catarr[i] != '%') || mps.pagevars.cats.length != catarr.length) return !1;
    var src = ("https:" == document.location.protocol ? "https:" : "http:") + "//" + baseurl + mps._trim(keyvals, ";") + ";ord=" + 1E17 * Math.random() + "?";
    mps._debug("[mps/Floodlight] " + "(cat=" + cat + ") " + "INSERT " + src);
    var floodLightTagHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);

    floodLightTagHolder.setAttribute("id", holderID);
    document.body.appendChild(floodLightTagHolder);
    document.getElementById(holderID).innerHTML ='<iframe src="' + src + '" width="1" height="1" frameborder="0" style="display:none"></iframe>';
  };

if (userIsAuthN) {
  triggerPlaybackFloodLightTag();
} else {
  window.setAuthenticationStatus = function(isAuthenticated, errorCode) {
    tve.adobePass.performPostAuthCheckActions(isAuthenticated, errorCode);
    if (isAuthenticated) {
      // AuthN success tag goes here
      _writeFLTag(getPageCategory(), "src=1445917;type=auth50;cat=authe0;");

      triggerPlaybackFloodLightTag();
    }
  };
}

function getPageCategory() {
  if (typeof mps.pagevars.cats == "object") {
    return mps.pagevars.cats.join("|")
  }
}

function triggerPlaybackFloodLightTag() {
  // Code for firing playback event
  episodeName = encodeURIComponent(getMetaContentByName('og:title'));

  //live
  _writeFLTag("videos|live", "src=1445917;type=vodsi0;cat=linea0;");

  //VOD tag
  _writeFLTag("suits|videos", "src=1445917;type=vodsi0;cat=episo0;u2=" + episodeName + ";");
  _writeFLTag("mrrobot|videos", "src=1445917;type=vodsi0;cat=episo00;u2=" + episodeName + ";");
  _writeFLTag("playinghouse|videos", "src=1445917;type=vodsi0;cat=episo000;u2=" + episodeName + ";");
  _writeFLTag("chrisleyknowsbest|videos", "src=1445917;type=vodsi0;cat=episo001;u2=" + episodeName + ";");

}

function globalPageLevelFloodLightTags() {
  // All global Level flood light tags will be added here

  _writeFLTag("home", "src=1445917;type=globa0;cat=globa0;");

  if (location.href.indexOf('/videos') == -1) {

    _writeFLTag("svu|%", "src=1445917;type=shox30;cat=showp006;");
    _writeFLTag("suits|%", "src=1445917;type=shox30;cat=shows0;");
    _writeFLTag("mrrobot|%", "src=1445917;type=shox30;cat=showm0;");
    _writeFLTag("playinghouse|%", "src=1445917;type=shox30;cat=showp0;");
    _writeFLTag("chrisleyknowsbest|%", "src=1445917;type=shox30;cat=showc0;");
    _writeFLTag("colony|%", "src=1445917;type=shox30;cat=showp00;");
    _writeFLTag("complications|%", "src=1445917;type=shox30;cat=showp000;");
    _writeFLTag("csi|%", "src=1445917;type=shox30;cat=showp001;");  // if it will work
    _writeFLTag("dig", "src=1445917;type=shox30;cat=showp002;");
    _writeFLTag("donny|%", "src=1445917;type=shox30;cat=showp003;");
    _writeFLTag("criminalintent|%", "src=1445917;type=shox30;cat=showp005;");
    _writeFLTag("graceland|%", "src=1445917;type=shox30;cat=showp004;");
    _writeFLTag("modernfamily|%", "src=1445917;type=shox30;cat=showp007;");
    _writeFLTag("ncis|%", "src=1445917;type=shox30;cat=showp008;");
    _writeFLTag("ncisla|%", "src=1445917;type=shox30;cat=showp009;");
    _writeFLTag("queenofthesouth|%", "src=1445917;type=shox30;cat=showp00-;");
    _writeFLTag("royalpains|%", "src=1445917;type=shox30;cat=showp00a;");
    _writeFLTag("satisfaction|%", "src=1445917;type=shox30;cat=showp00b;");
    _writeFLTag("wwe|%", "src=1445917;type=shox30;cat=showp00c;");
    _writeFLTag("wwetoughenough|%", "src=1445917;type=shox30;cat=showp00d;");
    _writeFLTag("shows", "src=1445917;type=shox30;cat=showp00e;");
  }

}

globalPageLevelFloodLightTags();

function getMetaContentByName(name){
  var metas = document.getElementsByTagName('meta');

  for (i=0; i<metas.length; i++) {
    if (metas[i].getAttribute("property") == name) {
      return metas[i].getAttribute("content");
    }
  }

  return "";
}
</script>


<!--{@bodyfooter} xaxislb: Xaxis Lightning Bolt-->
<!-- Lightning Bolt Begins -->
      <script type="text/javascript" id="lightning_bolt" src="//cdn-akamai.mookie1.com/LB/LightningBolt.js"></script><iframe id="xaxis_dm_0026120981" style="display: none;" src="//cdn-akamai.mookie1.com/html/x71.html"></iframe>
      <!-- Lightning Bolt Ends -->



<!--{@bodyfooter}-PM-comscore: [pm] comScore Beacon-->
<script class="mps-pm3" data-mps-pm3="comscore">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('comscore',function(){
  mps.pm3.ids.comscore = '6035083';
  _comscore = window._comscore || [];
  _comscore.push({ c1: "2", c2: mps.pm3.ids.comscore });
  (function(){
    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
    s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
    el.parentNode.insertBefore(s, el);
  })();
});
</script>


<!--{@bodyfooter}-PM-krux: [pm] Krux Control Tag-->
<script class="mps-pm3" data-mps-pm3="krux-control-tag">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('krux-control-tag',function(){
  mps.pm3.ids.kruxconfid = mps._datamapValue('kruxids');
  if(mps.pm3.ids.kruxconfid) {
    mps._postscribe.enable();
    window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);
    mps._loadJS(mps._protocol()+'//'+'//cdn.krxd.net/controltag?confid='+mps.pm3.ids.kruxconfid, function(){ mps._d('[mps:PM3] JS LOADED: Krux Control Tag - '+mps.pm3.ids.kruxconfid); mps._postscribe.disable(); });
  } else {
    mps._d('[mps:PM3] Krux Control Tag Skipped (no mapped kruxid)');
  }
});
</script>


<!--{@bodyfooter}-PM-nielsen: [pm] Nielsen Hybrid Tag v6-->
<script class="mps-pm3" data-mps-pm3="nielsen">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('nielsen',function(){
  var a=new Image(1,1);a.onerror=a.onload=function(){a.onerror=a.onload=null};a.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-503541h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&ts=compact&rnd=",(new Date).getTime()].join("");
});
</script>


<!--{@bodyfooter}-PM-remo: [pm] Remo Node Control-->
<script class="mps-pm3" data-mps-pm3="remo">//--[2016-04-06]
  mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('remo',function(){
  var subdoms = window.location.host.split('.'), topdom = subdoms.pop(); topdom = subdoms.pop()+'.'+topdom;
  mps.pm3.ids.remodomain = topdom;
  function sitePerformedInvite(id) {
    var r = /(REMO_INVITE)=([^;]*)/gi.exec(document.cookie);
    return r && unescape(r[2]);
  }
  function siteInvited(id) {
    id != undefined || (id = "1");
    var ex = new Date((new Date).getTime() + 864E5 * 7);
    document.cookie = "REMO_INVITE" + "=" + escape(id) + (!ex || !(ex instanceof Date) ? "" : "; expires=" + ex.toGMTString()) + ";path=/;domain="+topdom+"";
  }
});
</script>


<!--{@bodyfooter}-PM-xaxis: [pm] Xaxis Lightning Bolt-->
<script class="mps-pm3" data-mps-pm3="xaxislb">//--[2016-05-02]
    mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('xaxislb',function(){
     mps._loadJS(mps._protocol()+'//cdn-akamai.mookie1.com/LB/LightningBolt.js', function(){ mps._d('[mps:PM3] JS LOADED: Xaxis Lightning Bolt v2');});
    });
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<!-- NO MPS OMNITURE TEMPLATE MAPPING DEFINED FOR SITE (skipping) -->

<!--shared-->
<script>if(!mps._loadset||0===mps._loadset){var sharedjs=document.createElement("script"),_src=mps._protocol()+"//"+mps.pagevars.mpsurl+"/request/component/automagic?name=shared.js";"object"==typeof debugmode&&1<parseInt(debugmode.log)&&(_src+="&CACHESKIP=1");sharedjs.src=_src;sharedjs.async=!0;document.getElementsByTagName("head")[0].appendChild(sharedjs)};</script>

<!--USA Facebook Pixel-->
<script>(function(){var a=window._fbq||(window._fbq=[]);if(!a.loaded){var b=document.createElement("script");b.async=!0;b.src="//connect.facebook.net/en_US/fbds.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);a.loaded=!0}a.push(["addPixelId","1621341978095212"])})();window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}]);</script>

<script>window.console && console.log('--[executed]--> MPS Footer Additions (3)');</script>
<script>
var adBlockEnabled = true;
(function () {
  mps = mps || {};
  mps._queue = mps._queue || {};
  mps._queue.abdetect = mps._queue.abdetect || [];
  mps._ab = mps._ab || {};
  mps._ab.timer = 0;
  mps._ab.run = false;
  mps._ab.type = null;
  mps._ab.delays = mps._delays.abdetect || 8000;
  mps._ab.render = function (name) {
    mps._ab.run = true;
    if(typeof mps._queue.render === 'function') {
      mps._queue.render('abdetect', name);
    }
    if(typeof mps.abdetectCallback === 'function') {
      mps.abdetectCallback(name);
    }
    if(!name) {
      mps._debug('[mps:AB] NOT ENABLED')
    } else {
      mps._debug('[mps:AB] DETECTED (' + name + ')');
    }
  };
  mps._ab.detect = function () {
    if(mps._ab.run) {
      return false;
    }
    mps._ab.timer = mps._ab.timer + 500;
    // Script blocked.
    if (adBlockEnabled === true) {
      mps._ab.type = 'filename';
      mps._ab.render('filename');
      // Domain blocked.
    } else if ((mps._gptError && mps._gptError === true) || mps._ab.timer === mps._ab.delays) {
      mps._ab.type = 'domain';
      mps._ab.render('domain');
      // MPS not loaded.
    } else if (mps._gptError === undefined && mps._ab.timer < mps._ab.delays) {
      setTimeout(function (){
        mps._ab.detect();
      }, 500);
      mps._debug('[mps:AB] waiting... (try ' + mps._ab.timer / 500 + ' of 16)');
      return false;
      // No detection, append container div.
    } else {
      if(!document.getElementById('adbanner')) {
        if(document.getElementsByTagName('body')[0]) {
          var _abcont = document.createElement('div');
          _abcont.id = 'adbanner';
          _abcont.style = 'width:0;height:0;';
          document.getElementsByTagName('body')[0].appendChild(_abcont);
          setTimeout(function (){
            mps._ab.detect();
          }, 100);
        } else {
          setTimeout(function (){
            mps._ab.detect();
          }, 500);
        }
      } else {
        var _abconttest = document.getElementById('adbanner');
        if(_abconttest && _abconttest.offsetParent === null) {
          mps._ab.type = 'container';
          mps._ab.render('container');
        } else {
          mps._ab.type = false;
          mps._ab.render(false);
        }
      }
    }
  };
  var _abdetect = document.createElement('script');
  _abdetect.src = '//www.nbcudigitaladops.com/hosted/pubads.js';
  _abdetect.type = 'text/javascript';
  _abdetect.onload = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  _abdetect.onerror = function () {
    setTimeout(function (){
      mps._ab.detect();
    }, 500);
  };
  document.getElementsByTagName('head')[0].appendChild(_abdetect);
}());

</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>

<!--{@bodyfooter} Floodlight: USA Floodlight Tags-->
<script>
var baseurl='1445917.fls.doubleclick.net/activityi;',
_writeFL=function(cat,keyvals){if(mps._loadset>0)return!1;if(!cat||!mps.pagevars.cats||typeof cat!="string"||typeof mps.pagevars.cats!="object"||typeof keyvals!="string")return!1;var cats=mps.pagevars.cats.join("|"),catarr=cat.split("|");for(var i=0;i<catarr.length;i++)if(mps.pagevars.cats[i]!=catarr[i])return !1;var src=("https:"==document.location.protocol?"https:":"http:")+"//"+baseurl+mps._trim(keyvals,";")+";ord="+1E17*Math.random()+"?";mps._debug("[mps/Floodlight] "+"(cat="+cat+") "+"INSERT "+src);
var usafloodLightHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);
    usafloodLightHolder.setAttribute("id", holderID);
    document.body.appendChild(usafloodLightHolder);
document.getElementById(holderID).innerHTML ='<iframe src="'+src+'" width="1" height="1" frameborder="0" style="display:none"></iframe>';
}

_writeFL("graceland","src=1445917;type=2012g832;cat=grace041;");

_writeFL("rush","src=1445917;type=2014b766;cat=usa-r562;");

_writeFL("satisfaction","src=1445917;type=2014b766;cat=usa-s644;");

_writeFL("royalpains","src=1445917;type=2009o386;cat=royal068;");

_writeFL("whitecollar","src=1445917;type=2009o386;cat=white368;");

_writeFL("chrisleyknowsbest","src=1445917;type=2014b766;cat=chris342;");

_writeFL("covertaffairs","src=1445917;type=2010a975;cat=cover674;");

_writeFL("suits","src=1445917;type=2011d848;cat=suits889;");

_writeFL("sirens","src=1445917;type=2014b766;cat=siren497;");

_writeFL("playinghouse","src=1445917;type=2014b766;cat=playi219;");

_writeFL("burnnotice","src=1445917;type=burnn832;cat=burnn655;");

_writeFL("commonlaw","src=1445917;type=2012g832;cat=commo012;");

_writeFL("fairlylegal","src=1445917;type=2010a975;cat=fairl582;");

_writeFL("inplainsight","src=1445917;type=inpla773;cat=inpla560;");

_writeFL("monk","src=1445917;type=monkx344;cat=monkz207;");

_writeFL("necessaryroughness","src=1445917;type=2011d848;cat=neces763;");

_writeFL("politicalanimals","src=1445917;type=2012g832;cat=polit063;");

_writeFL("psych","src=1445917;type=2011d848;cat=psych222;");

_writeFL("csi","src=1445917;type=2013i356;cat=csiyk570;");

_writeFL("house","src=1445917;type=2009o386;cat=house033;");

_writeFL("criminalintent","src=1445917;type=2011d848;cat=lawor499;");

_writeFL("svu","src=1445917;type=2011d848;cat=lawor176;");

_writeFL("modernfamily","src=1445917;type=2013i356;cat=moder594;");

_writeFL("ncis","src=1445917;type=2009o386;cat=ncisv947;");

_writeFL("ncisla","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("wwe","src=1445917;type=wwera869;cat=wwera436;");

_writeFL("mrrobot","src=1445917;type=2015s0;cat=usa-m0;");

_writeFL("dig","src=1445917;type=2014b766;cat=usa-d409;");

_writeFL("complications","src=1445917;type=2015s0;cat=usa-c0;");

_writeFL("benched","src=1445917;type=2014b766;cat=USA-B0;");

_writeFL("donny","src=1445917;type=2015s0;cat=usa-d0;");

_writeFL("queenofthesouth","src=1445917;type=2015s0;cat=usa-q0;");

_writeFL("colony","src=1445917;type=shox30;cat=showp00;");

_writeFL("eyewitness","src=1445917;type=eyewi0;cat=usa-e0;");

_writeFL("fallingwater","src=1445917;type=falli0;cat=usa-f0;");

_writeFL("firstimpressions","src=1445917;type=first0;cat=usa-f0;");

_writeFL("shooter","src=1445917;type=shoot0;cat=usa-s0;");

_writeFL("motive","src=1445917;type=usa-m0;cat=usa-m0;");

</script><div id="floodLight50"><iframe src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/activityi.html" width="1" height="1" frameborder="0" style="display:none"></iframe></div>


<!--{@bodyfooter} moatadblock: Moat Adblock Tracking-->

<script>
if (debugmode.log) {
(function() {
try{var a={l1:document.location.host.replace(/^www./,""),l2:document.title||"Untitled",l3:"__page__",l4:"-",sa:"",sn:""},b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));b=b.join("&");(new Image).src="//d28nxrgt4y7pn6.cloudfront.net?a=1212b7832905405abe5afd281711940f";var d=document.createElement("script");d.type="text/javascript";d.async=!0;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);d.src="https://z.moatads.com/nbcu194EPtQ90/moatcontent.js#"+b}catch(f){try{var g=
"//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i=MOATCONTENTABSNIPPET1&ac=1&k="+encodeURIComponent(f)+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();(new Image).src=g}catch(h){}};
})();
} // [close] if (debugmode.log)
</script>



<!--{@bodyfooter} sourcepoint: Sourcepoint AdBlock Tracking-->
<script async="async" data-client-id="PebocMUQMgmSHpr" type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/esf.js"></script>


<!--{@bodyfooter} tve-floodlight-tags: TVE floodlight tags-->
<script>
/* Logic for all tags */
var baseurl = '1445917.fls.doubleclick.net/activityi;',
  nbcuUser = JSON.parse(decodeURIComponent(mps._ck.r('nbcu_user_settings'))),
  userIsAuthN = !!nbcuUser && nbcuUser.authn,
  _writeFLTag = function(cat, keyvals) {
    if (cat.indexOf('svu') && window.location.pathname.indexOf('svu/cast') != -1 && mps._loadset == 1) {
      mps.pagevars.cats[0] = 'svu';
    }
    if (mps._loadset > 0 && cat.indexOf('svu') == -1) return !1;
    if (!cat || !mps.pagevars.cats || typeof cat != "string" || typeof mps.pagevars.cats != "object" || typeof keyvals != "string") return !1;
    var cats = mps.pagevars.cats.join("|"),
      catarr = cat.split("|");
    for (var i = 0; i < catarr.length; i++)
      if ((mps.pagevars.cats[i] != catarr[i] && catarr[i] != '%') || mps.pagevars.cats.length != catarr.length) return !1;
    var src = ("https:" == document.location.protocol ? "https:" : "http:") + "//" + baseurl + mps._trim(keyvals, ";") + ";ord=" + 1E17 * Math.random() + "?";
    mps._debug("[mps/Floodlight] " + "(cat=" + cat + ") " + "INSERT " + src);
    var floodLightTagHolder = document.createElement('div'),
      holderID = "floodLight" + Math.floor((Math.random() * 50) + 1);

    floodLightTagHolder.setAttribute("id", holderID);
    document.body.appendChild(floodLightTagHolder);
    document.getElementById(holderID).innerHTML ='<iframe src="' + src + '" width="1" height="1" frameborder="0" style="display:none"></iframe>';
  };

if (userIsAuthN) {
  triggerPlaybackFloodLightTag();
} else {
  window.setAuthenticationStatus = function(isAuthenticated, errorCode) {
    tve.adobePass.performPostAuthCheckActions(isAuthenticated, errorCode);
    if (isAuthenticated) {
      // AuthN success tag goes here
      _writeFLTag(getPageCategory(), "src=1445917;type=auth50;cat=authe0;");

      triggerPlaybackFloodLightTag();
    }
  };
}

function getPageCategory() {
  if (typeof mps.pagevars.cats == "object") {
    return mps.pagevars.cats.join("|")
  }
}

function triggerPlaybackFloodLightTag() {
  // Code for firing playback event
  episodeName = encodeURIComponent(getMetaContentByName('og:title'));

  //live
  _writeFLTag("videos|live", "src=1445917;type=vodsi0;cat=linea0;");

  //VOD tag
  _writeFLTag("suits|videos", "src=1445917;type=vodsi0;cat=episo0;u2=" + episodeName + ";");
  _writeFLTag("mrrobot|videos", "src=1445917;type=vodsi0;cat=episo00;u2=" + episodeName + ";");
  _writeFLTag("playinghouse|videos", "src=1445917;type=vodsi0;cat=episo000;u2=" + episodeName + ";");
  _writeFLTag("chrisleyknowsbest|videos", "src=1445917;type=vodsi0;cat=episo001;u2=" + episodeName + ";");

}

function globalPageLevelFloodLightTags() {
  // All global Level flood light tags will be added here

  _writeFLTag("home", "src=1445917;type=globa0;cat=globa0;");

  if (location.href.indexOf('/videos') == -1) {

    _writeFLTag("svu|%", "src=1445917;type=shox30;cat=showp006;");
    _writeFLTag("suits|%", "src=1445917;type=shox30;cat=shows0;");
    _writeFLTag("mrrobot|%", "src=1445917;type=shox30;cat=showm0;");
    _writeFLTag("playinghouse|%", "src=1445917;type=shox30;cat=showp0;");
    _writeFLTag("chrisleyknowsbest|%", "src=1445917;type=shox30;cat=showc0;");
    _writeFLTag("colony|%", "src=1445917;type=shox30;cat=showp00;");
    _writeFLTag("complications|%", "src=1445917;type=shox30;cat=showp000;");
    _writeFLTag("csi|%", "src=1445917;type=shox30;cat=showp001;");  // if it will work
    _writeFLTag("dig", "src=1445917;type=shox30;cat=showp002;");
    _writeFLTag("donny|%", "src=1445917;type=shox30;cat=showp003;");
    _writeFLTag("criminalintent|%", "src=1445917;type=shox30;cat=showp005;");
    _writeFLTag("graceland|%", "src=1445917;type=shox30;cat=showp004;");
    _writeFLTag("modernfamily|%", "src=1445917;type=shox30;cat=showp007;");
    _writeFLTag("ncis|%", "src=1445917;type=shox30;cat=showp008;");
    _writeFLTag("ncisla|%", "src=1445917;type=shox30;cat=showp009;");
    _writeFLTag("queenofthesouth|%", "src=1445917;type=shox30;cat=showp00-;");
    _writeFLTag("royalpains|%", "src=1445917;type=shox30;cat=showp00a;");
    _writeFLTag("satisfaction|%", "src=1445917;type=shox30;cat=showp00b;");
    _writeFLTag("wwe|%", "src=1445917;type=shox30;cat=showp00c;");
    _writeFLTag("wwetoughenough|%", "src=1445917;type=shox30;cat=showp00d;");
    _writeFLTag("shows", "src=1445917;type=shox30;cat=showp00e;");
  }

}

globalPageLevelFloodLightTags();

function getMetaContentByName(name){
  var metas = document.getElementsByTagName('meta');

  for (i=0; i<metas.length; i++) {
    if (metas[i].getAttribute("property") == name) {
      return metas[i].getAttribute("content");
    }
  }

  return "";
}
</script><div id="floodLight31"><iframe src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/activityi(1).html" width="1" height="1" frameborder="0" style="display:none"></iframe></div>


<!--{@bodyfooter} xaxislb: Xaxis Lightning Bolt-->
<!-- Lightning Bolt Begins -->
      <script type="text/javascript" id="lightning_bolt" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/LightningBolt.js"></script><iframe id="xaxis_dm_0398940078" style="display: none;" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/x71.html"></iframe>
      <!-- Lightning Bolt Ends -->



<!--{@bodyfooter}-PM-comscore: [pm] comScore Beacon-->
<script class="mps-pm3" data-mps-pm3="comscore">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('comscore',function(){
  mps.pm3.ids.comscore = '6035083';
  _comscore = window._comscore || [];
  _comscore.push({ c1: "2", c2: mps.pm3.ids.comscore });
  (function(){
    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
    s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
    el.parentNode.insertBefore(s, el);
  })();
});
</script>


<!--{@bodyfooter}-PM-krux: [pm] Krux Control Tag-->
<script class="mps-pm3" data-mps-pm3="krux-control-tag">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('krux-control-tag',function(){
  mps.pm3.ids.kruxconfid = mps._datamapValue('kruxids');
  if(mps.pm3.ids.kruxconfid) {
    mps._postscribe.enable();
    window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);
    mps._loadJS(mps._protocol()+'//'+'//cdn.krxd.net/controltag?confid='+mps.pm3.ids.kruxconfid, function(){ mps._d('[mps:PM3] JS LOADED: Krux Control Tag - '+mps.pm3.ids.kruxconfid); mps._postscribe.disable(); });
  } else {
    mps._d('[mps:PM3] Krux Control Tag Skipped (no mapped kruxid)');
  }
});
</script>


<!--{@bodyfooter}-PM-nielsen: [pm] Nielsen Hybrid Tag v6-->
<script class="mps-pm3" data-mps-pm3="nielsen">//--[2016-04-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('nielsen',function(){
  var a=new Image(1,1);a.onerror=a.onload=function(){a.onerror=a.onload=null};a.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-503541h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&ts=compact&rnd=",(new Date).getTime()].join("");
});
</script>


<!--{@bodyfooter}-PM-remo: [pm] Remo Node Control-->
<script class="mps-pm3" data-mps-pm3="remo">//--[2016-04-06]
  mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('remo',function(){
  var subdoms = window.location.host.split('.'), topdom = subdoms.pop(); topdom = subdoms.pop()+'.'+topdom;
  mps.pm3.ids.remodomain = topdom;
  function sitePerformedInvite(id) {
    var r = /(REMO_INVITE)=([^;]*)/gi.exec(document.cookie);
    return r && unescape(r[2]);
  }
  function siteInvited(id) {
    id != undefined || (id = "1");
    var ex = new Date((new Date).getTime() + 864E5 * 7);
    document.cookie = "REMO_INVITE" + "=" + escape(id) + (!ex || !(ex instanceof Date) ? "" : "; expires=" + ex.toGMTString()) + ";path=/;domain="+topdom+"";
  }
});
</script>


<!--{@bodyfooter}-PM-xaxis: [pm] Xaxis Lightning Bolt-->
<script class="mps-pm3" data-mps-pm3="xaxislb">//--[2016-05-02]
    mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('xaxislb',function(){
     mps._loadJS(mps._protocol()+'//cdn-akamai.mookie1.com/LB/LightningBolt.js', function(){ mps._d('[mps:PM3] JS LOADED: Xaxis Lightning Bolt v2');});
    });
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"78333456c2","applicationID":"11948648","transactionName":"Y1NSZEFXWBZQWhVaX1oZcVNHX1kLHkkAVFVrW1FeUlFTF25XDldVa0BZVURpRgRWXA==","queueTime":0,"applicationTime":1468,"atts":"TxRREglNSxg=","errorBeacon":"bam.nr-data.net","agent":""}</script>

<div id="adbanner" style="width: 0px; height: 0px;"></div><iframe style="display:none" height="1" width="1" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mobile.html"></iframe><img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mpspix.gif" class="mpspix" style="display:none;width:0;height:0;border:0;" height="0" width="0"><script type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/Serving" async=""></script><img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mpspix(1).gif" class="mpspix" style="display:none;width:0;height:0;border:0;" height="0" width="0"><div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatMessageSender6191999613"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/MessageSenderV4.swf"><param name="FlashVars" value="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/MessageSenderV4.swf" quality="high" flashvars="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com" bgcolor="#ffffff" width="1" height="1" id="moatMessageSenderEmbed6191999613" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatCap"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/cap.swf"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/cap.swf" quality="high" bgcolor="#ffffff" width="1" height="1" id="moatCapEmbed" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/mpspix(2).gif" class="mpspix" style="display:none;width:0;height:0;border:0;" height="0" width="0"><iframe id="destination_publishing_iframe_nbcu_0" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/dest5.html" style="display: none; width: 0px; height: 0px;" class="aamIframeLoaded"></iframe><script language="javascript" type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/chartbeat.js"></script><div class="kxhead" data-id="Hhr_tqXM" style="display:none !important;"><span class="kxtag kxinvisible" data-id="59177" data-alias="Author Scraper"><script>
(function() {
  Krux('set', 'page_attr_nbcu_authors', typeof window._sf_async_config === 'object' && window._sf_async_config['authors']);
})();
</script></span><span class="kxtag kxinvisible" data-id="85716" data-alias="The Trade Desk User Match"><script>
(function()
{ var i = new Image(); i.src = '//match.adsrvr.org/track/cmf/generic?ttd_pid=krux&ttd_tpi=1'; }
)();
</script></span><span class="kxtag kxinvisible" data-id="55860" data-alias="Nielsen - Precision Marketing (via Exelate) provid"></span><span class="kxtag kxinvisible" data-id="13132" data-alias="Krux Scraper - sym and xa"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "sym,xa".split(",")
  });

</script></span><span class="kxtag kxinvisible" data-id="14704" data-alias="AudienceScience - P&amp;G"><script language="JavaScript" type="text/javascript" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/gw.js"></script></span><span class="kxtag kxinvisible" data-id="10688" data-alias="Krux Scraper - Hierarchy and Attributes"><script type="text/javascript">
  // Scrape dart
  Krux('scrape.dart', {
    page_attr_dart: "aff,area,b,chan,daypart,genre,f,package,pkid,ref,season,sect,show,site,sport,sub,sub2,t,tag,type,pageid".split(",")
  });
  // Set section/subsection
  Krux('set', {
    section: Krux('get', 'domain'),
    subsection: Krux('get', 'page_attr_dart_sect')
  });
</script></span><span class="kxtag kxinvisible" data-id="10957" data-alias="Internal NBC Metrics: SNAS - (w/SegFilterActive)"><script>var __nbcsnasadops={init:function(){if(!top.__nbcudigitaladops_header){return false}this.segfilter=['94118g','12053g','55053g','65151g','15112g','43118g'];this.h=top.__nbcudigitaladops_header;this.sc='snas';this.dc='snas_d';this.nic='snas_noinfo';this.drtp='ssg';this.s=this.h.gc(this.sc)||'';this.d=this.h.gc(this.dc)||'';this.ni=this.h.gc(this.nic)||'';this.u='';this.cookiesEnabled=document.cookie.length>0;if(this.ni){return false}if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.s){this.u=this.extractUUID();this.getDemoByUUID()}else{this.getGlobal()}}},populateDartTags:function(){if(!this.d){return false}var demo=this.d.indexOf('%')>-1?unescape(this.d):this.d;var sdarr=demo.split(';');for(var i=0;i<sdarr.length;i++){for(var j=0;j<this.segfilter.length;j++){if(sdarr[i]==this.segfilter[j]){this.h.dtprm(this.drtp+'='+sdarr[i]+';')}}}},getGlobal:function(){var callback='__nbcsnasadops.doSCallback';var url='http://snas.nbcuni.com/snas/api/getRemoteDomainCookies?callback=';this.jsonp(url,callback)},doSCallback:function(j){if(!j||!j.cookie){return false}this.s=j.cookie[this.sc]||'';if(!this.s){this.setNoInfoCookie();return false}this.u=this.extractUUID();this.d=j.cookie[this.dc]||'';if(this.d){this.populateDartTags();this.setLocalCookies()}else{if(this.u){this.getDemoByUUID()}else{this.setNoInfoCookie()}}},getDemoByUUID:function(){var callback='__nbcsnasadops.doUCallback';var url='http://demographics.nbcuni.com/demographics/api/getFormattedPersonDemographics/';url+=this.u+'/bt-in-script/';this.jsonp(url,callback)},doUCallback:function(j){if(!j||!j.personDemographics){return false}var d=j.personDemographics||'';if(d){this.d=d;this.populateDartTags();this.setLocalCookies()}},extractUUID:function(){if(this.s.indexOf('data='>-1)){var uuid=this.s.replace(/.*data=(\w+).*/i,"$1");return uuid}return''},setLocalCookies:function(){if(this.d&&(!this.h.gc(this.dc))){var demo=this.d.indexOf(';')>-1?escape(this.d):this.d;var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.dc+'='+demo+'; expires='+d+'; path=/;';document.cookie=c}if(this.s&&(!this.h.gc(this.sc))){var d=new Date((new Date().valueOf())+2592000000).toUTCString();var c=this.sc+'='+this.s+'; expires='+d+'; path=/;';document.cookie=c}return true},saveNBCUNIMetricsDataLocal:function(){},setNoInfoCookie:function(){var c=this.nic+'=1; expires=; path=/;';document.cookie=c},jsonp:function(src,cbk){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=src+=cbk;var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;script.onload=script.onreadystatechange=null;head.removeChild(script)}};head.appendChild(script)}};__nbcsnasadops.init();</script></span><span class="kxtag kxinvisible" data-id="10971" data-alias="Internal NBC Metrics: SNAS - saveActivity"><script>
if( top.__nbcudigitaladops_header ){
        top.__nbcudigitaladops_header.fnc = function(){
                var uuid = '';
                var s = top.__nbcudigitaladops_header.gc('snas');
                if(s.indexOf('data='>-1)){
                        uuid = s.replace(/.*data=(\w+).*/i,"$1");
                }else{
                        var sn_user = unescape(top.__nbcudigitaladops_header.gc('sn_nbc_b')).split('|');
                        uuid = sn_user[1];
                }
                if( !uuid ){ return false; }
                var rand = Math.round(Math.random()*1000000000000);
                var snas_d = top.__nbcudigitaladops_header.gc('snas_d');
                if(snas_d.indexOf('%')>-1){ snas_d = unescape(snas_d); }
                var docurl = document.location.href+'';
                var siteurlpieces = document.location.hostname.split('.');
                var siteurl = siteurlpieces[siteurlpieces.length-2]+'.'+siteurlpieces[siteurlpieces.length-1];
                var snasurl = 'http://snas.nbcuni.com/snas/api/saveActivity?URL='+escape(docurl);
                snasurl += '&contentType=PAGE&personUUID='+uuid+'&siteName='+siteurl+'&siteDomainName='+siteurl;
                snasurl += '&snas_d='+snas_d+'&rand='+rand;
                document.write('<img src="'+snasurl+'" width="1" height="1" />');
        };
        top.__nbcudigitaladops_header.fnc();
}
</script></span><span class="kxtag kxinvisible" data-id="10993" data-alias="Quantcast - Simple Tag"><script>
  _qacct="p-9eJ8k4iSzux46";
</script>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/quant.js"></script></span><span class="kxtag kxinvisible" data-id="11109" data-alias="eXelate Media provider tag"><script>
(function(){
  var kuid = Krux('get', 'user');
  if (kuid) {
    Krux('require:http').pixel({
      url: "//loadm.exelator.com/load",
      data: {
          _kdpid: 'e4942ff0-4070-4896-a7ef-e6a5a30ce9f9',
          buid: kuid,
          p: '204',
          g: '270',
          j: '0'
      }});
  }
  })();
</script></span><span class="kxtag kxinvisible" data-id="87320" data-alias="Nielsen NBCU NCS (via eXelate) provider tag"></span><span class="kxtag kxinvisible" data-id="27697" data-alias="HealthyOffers - NBCU (via LiveRamp) provider tag"><script>
// tag intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="45116" data-alias="Proximic provider tag"></span><span class="kxtag kxinvisible" data-id="11327" data-alias="Technographic Data provider tag"><script>
// this tag is intentionally blank
</script></span><span class="kxtag kxinvisible" data-id="16002" data-alias="Quantcast provider tag"></span><span class="kxtag kxinvisible" data-id="86461" data-alias="Crossix Private (Approval Needed) provider tag"></span><span class="kxtag kxinvisible" data-id="85185" data-alias="IXI Digital (Network) provider tag"><script>
    // Empty by design.
</script>
</span><span class="kxtag kxinvisible" data-id="85186" data-alias="IXI Digital Open Market provider tag"><script>
(function(){
    var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
    new Image().src = prefix + '//kr.ixiaa.com/C726AB29-0470-440B-B8D2-D552CED3A3DC/a.gif';
})();
</script></span><span class="kxtag kxinvisible" data-id="23254" data-alias="Krux Geographic Data provider tag"></span><span class="kxtag kxinvisible" data-id="63191" data-alias="Visual DNA provider tag"><script>

(function() {
    (new Image()).src = "//apiservices.krxd.net/um?partner=vdna&r=" + window.location.protocol + "//e.visualdna.com/conversion&_kdpid=8f95f20d-4acf-43fc-9832-3f5174a166cc";
})();

</script></span><span class="kxtag kxinvisible" data-id="14072" data-alias="Nielsen (via Exelate) provider tag"><script>
// Blank
</script></span><span class="kxtag kxinvisible" data-id="27407" data-alias="PubMatic Segment Sharing"><script type="text/javascript">
(function() {
  var prvx_segs = Krux('get', 'user_prvx_segments') || [];
  if (prvx_segs.length) {
    (new Image()).src =
      '//aud.pubmatic.com/AdServer/Artemis?dpid=14' +
      '&segid=' + prvx_segs.join(',');
  }
})();
</script></span><span class="kxtag kxinvisible" data-id="32786" data-alias="Krux URL Scraper"><script>
// Using UrlPath 1 to produce page attribute url_path_1
Krux('scrape', { 'page_attr_url_path_1': {url_path: '1'}});
Krux('scrape', { 'page_attr_url_path_2': {url_path: '2'}});
Krux('scrape', { 'page_attr_url_path_3': {url_path: '3'}});
Krux('scrape', { 'page_attr_url_path_4': {url_path: '4'}});
Krux('set', {'page_attr_FullUrl': window.location.href});
Krux('scrape', { 'page_attr_dart_akw': {dart: "akw"}});
</script></span><span class="kxtag kxinvisible" data-id="85298" data-alias="Freewheel User Match SITE VISIT"><script>
(function() {
    if (window.location.protocol == 'http:') {
        var img = new Image();
        img.src = "//bea4.v.fwmrm.net/ad/u?mode=echo&cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D"
        img.setAttribute("style", "width:0px; height:0px; visibility:hidden;");
        document.body.appendChild(img);
    }
})();
</script></span><span class="kxtag kxinvisible" data-id="19045" data-alias="AdAdvisor S2S provider tag"><img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/g.js"></span><span class="kxtag kxinvisible" data-id="18290" data-alias="Acxiom S2S provider tag"><script>
(function(){
  var kuid = Krux('get', 'user');
  if (kuid) {
      var liveramp_url = 'https://idsync.rlcdn.com/379708.gif?partner_uid=' + kuid;
      var i = new Image();
      i.src = liveramp_url;
  }
})();
</script></span><span class="kxtag kxinvisible" data-id="35454" data-alias="TubeMogul User Match"><script>
    (function() {
        var prefix = location.protocol == 'https:' ? "https" : "http";
        var tm_url = prefix + '://rtd.tubemogul.com/upi/pid/NC4WTmcy?redir=' + prefix + '%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner_id%3Dcb276571-e0d9-4438-9fd4-80a1ff034b01%26puid%3D%24%7BTM_USER_ID%7D'
        var i = new Image();
        i.src = tm_url;
    })();
</script></span><span class="kxtag kxinvisible" data-id="24980" data-alias="Krux Track Social"><script type="text/javascript">Krux('social.init');</script></span><span class="kxtag kxinvisible" data-id="69297" data-alias="Quantcast S2S provider tag"><script>
(function(){
        var kuid = Krux('get', 'user');
        if (kuid) {
           var qcast_url = '//pixel.quantserve.com/pixel/p-j_f_9hh7_PWUw.gif?idmatch=0';
           var i = new Image();
           i.src = qcast_url;
        }
})();
</script></span><span class="kxtag kxinvisible" data-id="82629" data-alias="MediaMath user match "><script>

(function(){
	var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';
	var url = prefix + '//pixel.mathtag.com/sync/img?redir=' + prefix + '%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dmediamath%26mmuuid%3D%5BMM_UUID%5D';
	(new Image()).src = url;
})();

</script></span><span class="kxtag kxinvisible" data-id="85453" data-alias="NBCUniversal - Google User Matching"><script>
(function(){
  var kuid = Krux('get', 'user');
  if (kuid && typeof kuid != 'undefined') {
      var prefix = location.protocol == 'https:' ? "https" :"http";
      var r_url = prefix + '://cm.g.doubleclick.net/pixel'
      var kurl = prefix + '://apiservices.krxd.net/um?partner=google&protocol=' + prefix + '&r=' + r_url;
      var i = new Image();
      i.src = kurl;
  }
})();
</script></span><span class="kxtag kxinvisible" data-id="11476" data-alias="krux-dfp-site-zone"><script type="text/javascript">
(function() {
  function findEl(els) {
    for(var i = 0; i < els.length; ++i) {
      try {
        var pathname = (m = els[i].src.match(/\.doubleclick\.net(\/[^;]*)/)) ?
          m[1] : '';

        if(pathname) {
          var parts = pathname.split('/');
          Krux.require('util').set({
            page_attr_dfpsite: parts[2],
            page_attr_dfpzone: parts[3]
          });
          return true;
        }
      } catch (e) {}
    }
  }

  findEl(document.getElementsByTagName('SCRIPT')) ||
  findEl(document.getElementsByTagName('IFRAME'));

})();
</script></span><span class="kxtag kxinvisible" data-id="15596" data-alias="Quantcast / Krux"><script>
(function () {
    if (location.protocol.indexOf('s') > -1) {
       return;
    }
    var u = "http://pixel.quantserve.com/seg/r;a=p-9eJ8k4iSzux46;rand=" +
        Math.round(Math.random() * 999999942) + ";redirect=" +
        "http://beacon.krxd.net/data.gif?_kdpid=c28722fa-1ec3-4a33-838f-d360c76c0aca&segs=!qcsegs";

    (new Image()).src = u;
})();
</script></span><span class="kxtag kxinvisible" data-id="20727" data-alias="Crowd Science (NBCU) provider tag"><script type="text/javascript" charset="utf-8">
  function CS_data_callback(cs_data) {
    if (cs_data && cs_data.segments) {
      var p = location.protocol === 'https:' ? 'https:' : 'http:';
      new Image().src = p + '//beacon.krxd.net/data.gif?_kdpid=b1f402c1-9cee-4d2c-95e8-f87ec628694e&cs_segs=' +
        encodeURIComponent(cs_data.segments.join(','));
    }
  }
</script>
<script src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/max-7881f43af0.js" type="text/javascript" charset="utf-8"></script> </span></div><iframe style="display:none" height="1" width="1" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/mobile.html?order_id=&amp;order_total=0.00&amp;order_subtotal=0.00&amp;lbData_MP1=&amp;=undefined&amp;xaxis_domain=undefined&amp;xaxis_pathname=%2F&amp;xaxis_url=undefined%2F&amp;xaxis_hash=&amp;xaxis_query_string=&amp;refAction=direct&amp;order_currency=USD&amp;xaxis_title=Mr.%20Robot%20-%20TV%20Show%20-%20Watch%20Full%20Episodes%20%7C%20USA%20Network&amp;xaxis_hash=&amp;xaxis_domain=localhost&amp;xaxis_pathname=%2Findex2&amp;xaxis_url=http%3A%2F%2Flocalhost%3A3000%2Findex2&amp;xaxis_referrer="></iframe><img src="//bea4.v.fwmrm.net/ad/u?mode=echo&amp;cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D" style="width:0px; height:0px; visibility:hidden;"><img src="//bea4.v.fwmrm.net/ad/u?mode=echo&amp;cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D" style="width:0px; height:0px; visibility:hidden;"><iframe style="display:none" height="1" width="1" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/mobile.html?order_id=&amp;order_total=0.00&amp;order_subtotal=0.00&amp;lbData_MP1=&amp;=undefined&amp;xaxis_domain=undefined&amp;xaxis_pathname=%2F&amp;xaxis_url=undefined%2F&amp;xaxis_hash=&amp;xaxis_query_string=&amp;refAction=direct&amp;order_currency=USD&amp;xaxis_title=Mr.%20Robot%20-%20TV%20Show%20-%20Watch%20Full%20Episodes%20%7C%20USA%20Network&amp;xaxis_hash=&amp;xaxis_domain=localhost&amp;xaxis_pathname=%2Findex2&amp;xaxis_url=http%3A%2F%2Flocalhost%3A3000%2Findex2&amp;xaxis_referrer="></iframe><img src="//bea4.v.fwmrm.net/ad/u?mode=echo&amp;cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D" style="width:0px; height:0px; visibility:hidden;"><img src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/u" style="width:0px; height:0px; visibility:hidden;">
<iframe id="google_osd_static_frame_7821656230131" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./Mr. Robot - TV Show - Watch Full Episodes _ USA Network_files/saved_resource(6).html"></iframe>
<div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatMessageSender9535278388"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/MessageSenderV4.swf"><param name="FlashVars" value="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/MessageSenderV4.swf" quality="high" flashvars="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com" bgcolor="#ffffff" width="1" height="1" id="moatMessageSenderEmbed9535278388" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatCap"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/cap.swf"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/cap.swf" quality="high" bgcolor="#ffffff" width="1" height="1" id="moatCapEmbed" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><iframe style="display:none" height="1" width="1" src="//tags.tiqcdn.com/utag/xaxis/-xaxis/prod/mobile.html?order_id=&amp;order_total=0.00&amp;order_subtotal=0.00&amp;lbData_MP1=&amp;refAction=direct&amp;order_currency=USD&amp;xaxis_title=Mr.%20Robot%20-%20TV%20Show%20-%20Watch%20Full%20Episodes%20%7C%20USA%20Network&amp;xaxis_hash=&amp;xaxis_domain=localhost&amp;xaxis_pathname=%2Findex2&amp;xaxis_url=http%3A%2F%2Flocalhost%3A3000%2Findex2&amp;xaxis_referrer="></iframe><iframe id="google_osd_static_frame_8951123551296" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe><img src="//bea4.v.fwmrm.net/ad/u?mode=echo&amp;cr=http%3A%2F%2Fbeacon.krxd.net%2Fusermatch.gif%3Fpartner%3Dfreewheel%26partner_uid%3D%23%7Buser.id%7D" style="width:0px; height:0px; visibility:hidden;"><div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatMessageSender4156881123"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/MessageSenderV4.swf"><param name="FlashVars" value="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/MessageSenderV4.swf" quality="high" flashvars="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com" bgcolor="#ffffff" width="1" height="1" id="moatMessageSenderEmbed4156881123" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatCap"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/cap.swf"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/cap.swf" quality="high" bgcolor="#ffffff" width="1" height="1" id="moatCapEmbed" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div>
<iframe id="google_osd_static_frame_9764526776840" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe>
<div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatMessageSender8537175956"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/MessageSenderV4.swf"><param name="FlashVars" value="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/MessageSenderV4.swf" quality="high" flashvars="r=MoatSuperV22.yh.zb&amp;s=MoatSuperV22.yh.zc&amp;e=MoatSuperV22.yh.zd&amp;td=afs.moatads.com" bgcolor="#ffffff" width="1" height="1" id="moatMessageSenderEmbed8537175956" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><div style="position: absolute; overflow: hidden; width: 0px; height: 0px;"><div style="position: absolute; left: -9999px; top: -9999px;"><object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1" id="moatCap"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="false"><param name="movie" value="https://z.moatads.com/swf/cap.swf"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><embed type="application/x-shockwave-flash" src="https://z.moatads.com/swf/cap.swf" quality="high" bgcolor="#ffffff" width="1" height="1" id="moatCapEmbed" align="middle" allowscriptaccess="always" allowfullscreen="false"></object></div></div><div class="kxhead" data-id="no-confid" style="display:none !important;"></div><iframe id="google_osd_static_frame_4281783413137" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body></html>
